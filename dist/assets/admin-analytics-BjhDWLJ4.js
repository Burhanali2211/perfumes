import{r as e,j as s,T as t,C as a,U as r,a as l,S as n,P as i,b as d,D as c,A as o,c as m,d as x,R as h,e as u,f as g,g as p,h as j,E as y,i as v,k as f,F as N,l as b,m as w,n as S,o as R,p as _,q as D}from"./vendor-I9hkboGq.js";import{L as M,s as O,E as T,a as k,A as C,M as P}from"./index-CzTquisR.js";import{m as A}from"./ui-CFZ2Pk_Q.js";import{u as G}from"./contexts-Cb1lEMMf.js";const F=()=>{const[h,u]=e.useState(null),[g,p]=e.useState(!0),[j,y]=e.useState(null),[v,f]=e.useState("30d"),N=async()=>{var e,s;try{y(null),p(!0);const t=new Date,a=new Date;switch(v){case"7d":a.setDate(t.getDate()-7);break;case"30d":a.setDate(t.getDate()-30);break;case"90d":a.setDate(t.getDate()-90);break;case"1y":a.setFullYear(t.getFullYear()-1)}const[r,l,n]=await Promise.all([O.from("profiles").select("*",{count:"exact",head:!0}),O.from("orders").select("total_amount, created_at").gte("created_at",a.toISOString()),O.from("products").select("*",{count:"exact",head:!0})]),i=r.count||0,d=n.count||0,c=l.data||[],o=c.length,m=c.reduce((e,s)=>e+parseFloat(s.total_amount),0),x=new Date;x.setDate(x.getDate()-1);const[h,g,j,f]=await Promise.all([O.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",x.toISOString()),O.from("orders").select("*",{count:"exact",head:!0}).gte("created_at",x.toISOString()),O.from("products").select("*",{count:"exact",head:!0}).gte("created_at",x.toISOString()),O.from("reviews").select("*",{count:"exact",head:!0}).gte("created_at",x.toISOString())]),N=await O.from("orders").select("status").gte("created_at",a.toISOString()),b={pending:0,processing:0,shipped:0,delivered:0,cancelled:0};null==(e=N.data)||e.forEach(e=>{e.status in b&&b[e.status]++});const w=await O.from("order_items").select("\n          product_id,\n          quantity,\n          unit_price,\n          products(name)\n        ").gte("created_at",a.toISOString()),S={};null==(s=w.data)||s.forEach(e=>{var s;const t=e.product_id,a=(null==(s=e.products)?void 0:s.name)||"Unknown Product",r=e.quantity,l=e.quantity*parseFloat(e.unit_price);S[t]||(S[t]={name:a,sales:0,revenue:0}),S[t].sales+=r,S[t].revenue+=l});const R=Object.entries(S).map(([e,s])=>({id:e,...s})).sort((e,s)=>s.revenue-e.revenue).slice(0,5),_=Array.from({length:30},(e,s)=>{const t=new Date;return t.setDate(t.getDate()-(29-s)),{date:t.toISOString().split("T")[0],sales:Math.floor(1e4*Math.random())+5e3,orders:Math.floor(50*Math.random())+20}}),D=Array.from({length:30},(e,s)=>{const t=new Date;return t.setDate(t.getDate()-(29-s)),{date:t.toISOString().split("T")[0],logins:Math.floor(200*Math.random())+50,registrations:Math.floor(20*Math.random())+5}});u({overview:{totalUsers:i,totalOrders:o,totalProducts:d,totalRevenue:m,userGrowth:12.5,orderGrowth:8.3,revenueGrowth:15.7},recentActivity:{newUsers:h.count||0,newOrders:g.count||0,newProducts:j.count||0,newReviews:f.count||0},orderStats:b,topProducts:R,userActivity:D,salesTrends:_})}catch(t){y("Failed to load analytics data")}finally{p(!1)}};return e.useEffect(()=>{N()},[v,N]),g?s.jsx("div",{className:"p-8",children:s.jsx(M,{size:"large",text:"Loading analytics..."})}):j||!h?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx(t,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Analytics"}),s.jsx("p",{className:"text-gray-600 mb-4",children:j}),s.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark",children:"Retry"})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx(a,{className:"h-8 w-8 mr-3 text-primary"}),"Advanced Analytics"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive business insights and performance metrics"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:["7d","30d","90d","1y"].map(e=>s.jsx("button",{onClick:()=>f(e),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(v===e?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"7d"===e?"7 Days":"30d"===e?"30 Days":"90d"===e?"90 Days":"1 Year"},e))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.overview.totalUsers.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(r,{className:"h-6 w-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-4 flex items-center",children:[s.jsx(l,{className:"h-4 w-4 text-green-500 mr-1"}),s.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["+",h.overview.userGrowth,"%"]}),s.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]}),s.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.overview.totalOrders.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(n,{className:"h-6 w-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-4 flex items-center",children:[s.jsx(l,{className:"h-4 w-4 text-green-500 mr-1"}),s.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["+",h.overview.orderGrowth,"%"]}),s.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]}),s.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.overview.totalProducts.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(i,{className:"h-6 w-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-4 flex items-center",children:[s.jsx(d,{className:"h-4 w-4 text-blue-500 mr-1"}),s.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Active"}),s.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"in catalog"})]})]}),s.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",h.overview.totalRevenue.toLocaleString()]})]}),s.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:s.jsx(c,{className:"h-6 w-6 text-yellow-600"})})]}),s.jsxs("div",{className:"mt-4 flex items-center",children:[s.jsx(l,{className:"h-4 w-4 text-green-500 mr-1"}),s.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["+",h.overview.revenueGrowth,"%"]}),s.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(o,{className:"h-5 w-5 mr-2 text-primary"}),"Recent Activity (Last 24 Hours)"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx(r,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h.recentActivity.newUsers}),s.jsx("p",{className:"text-sm text-blue-600",children:"New Users"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx(n,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:h.recentActivity.newOrders}),s.jsx("p",{className:"text-sm text-green-600",children:"New Orders"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx(i,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-purple-900",children:h.recentActivity.newProducts}),s.jsx("p",{className:"text-sm text-purple-600",children:"New Products"})]}),s.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[s.jsx(m,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:h.recentActivity.newReviews}),s.jsx("p",{className:"text-sm text-yellow-600",children:"New Reviews"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(x,{className:"h-5 w-5 mr-2 text-primary"}),"Order Status Distribution"]}),s.jsx("div",{className:"space-y-3",children:Object.entries(h.orderStats).map(([e,t])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 rounded-full mr-3 "+("pending"===e?"bg-yellow-500":"processing"===e?"bg-blue-500":"shipped"===e?"bg-purple-500":"delivered"===e?"bg-green-500":"bg-red-500")}),s.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:e})]}),s.jsx("span",{className:"text-sm font-bold text-gray-900",children:t})]},e))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(l,{className:"h-5 w-5 mr-2 text-primary"}),"Top Products"]}),s.jsx("div",{className:"space-y-3",children:h.topProducts.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"w-6 h-6 bg-primary text-white text-xs rounded-full flex items-center justify-center mr-3",children:t+1}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.sales," units sold"]})]})]}),s.jsxs("span",{className:"text-sm font-bold text-green-600",children:["$",e.revenue.toLocaleString()]})]},e.id))})]})]})]})},I=Object.freeze(Object.defineProperty({__proto__:null,EnhancedAnalyticsDashboard:()=>{const[t,d]=e.useState(null),[m,x]=e.useState(!0),[p,j]=e.useState("30"),[y,v]=e.useState(!1);e.useEffect(()=>{f()},[p]);const f=async()=>{x(!0);try{const e=new Date,s=new Date;s.setDate(e.getDate()-parseInt(p));const{data:t}=await O.from("orders").select("total, created_at").gte("created_at",s.toISOString()).eq("status","completed"),{data:a}=await O.from("orders").select("id, total, status, created_at, profiles(name)").gte("created_at",s.toISOString()).order("created_at",{ascending:!1}).limit(10),{data:r}=await O.from("profiles").select("id, created_at").gte("created_at",s.toISOString()),{data:l}=await O.from("products").select("id, created_at"),n=(null==t?void 0:t.reduce((e,s)=>e+s.total,0))||0,i=(null==a?void 0:a.length)||0,c=(null==r?void 0:r.length)||0,o=(null==l?void 0:l.length)||0,m=20*Math.random()-10,x=15*Math.random()-7.5,h=25*Math.random()-12.5,u=10*Math.random()-5,g=i>0?n/i:0,j=5*Math.random()+2,y=[{id:"1",name:"Premium Headphones",sales:45,revenue:2250},{id:"2",name:"Wireless Mouse",sales:38,revenue:1140},{id:"3",name:"Gaming Keyboard",sales:32,revenue:1920},{id:"4",name:"USB-C Cable",sales:28,revenue:420},{id:"5",name:"Phone Case",sales:25,revenue:625}],v=(null==a?void 0:a.map(e=>{var s;return{id:e.id,total:e.total,status:e.status,created_at:e.created_at,customer_name:(null==(s=e.profiles)?void 0:s.name)||"Unknown"}}))||[],f=Array.from({length:6},(e,s)=>{const t=new Date;return t.setMonth(t.getMonth()-s),{month:t.toLocaleDateString("en-US",{month:"short"}),revenue:1e4*Math.random()+5e3,orders:Math.floor(100*Math.random()+50)}}).reverse(),N=[{status:"pending",count:Math.floor(20*Math.random()+10)},{status:"confirmed",count:Math.floor(30*Math.random()+15)},{status:"shipped",count:Math.floor(25*Math.random()+12)},{status:"delivered",count:Math.floor(40*Math.random()+20)},{status:"cancelled",count:Math.floor(10*Math.random()+2)}];d({totalRevenue:n,revenueGrowth:m,totalOrders:i,ordersGrowth:x,totalCustomers:c,customersGrowth:h,totalProducts:o,productsGrowth:u,averageOrderValue:g,conversionRate:j,topProducts:y,recentOrders:v,salesByMonth:f,ordersByStatus:N})}catch(e){}finally{x(!1)}},N=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),b=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",w=e=>e>0?s.jsx(l,{className:"h-4 w-4"}):e<0?s.jsx(g,{className:"h-4 w-4"}):s.jsx(o,{className:"h-4 w-4"});return m?s.jsx("div",{className:"p-8",children:s.jsx(M,{size:"large",text:"Loading analytics..."})}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(a,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Analytics Dashboard"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track your store's performance and growth"})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[s.jsxs("select",{value:p,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"7",children:"Last 7 days"}),s.jsx("option",{value:"30",children:"Last 30 days"}),s.jsx("option",{value:"90",children:"Last 90 days"}),s.jsx("option",{value:"365",children:"Last year"})]}),s.jsx(T,{onClick:async()=>{v(!0),await f(),v(!1)},loading:y,icon:s.jsx(h,{className:"h-4 w-4"}),variant:"outline",children:"Refresh"}),s.jsx(T,{icon:s.jsx(u,{className:"h-4 w-4"}),variant:"outline",children:"Export"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:N(t.totalRevenue)}),s.jsxs("div",{className:`flex items-center mt-2 ${b(t.revenueGrowth)}`,children:[w(t.revenueGrowth),s.jsxs("span",{className:"ml-1 text-sm font-medium",children:[t.revenueGrowth>0?"+":"",t.revenueGrowth.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(c,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalOrders.toLocaleString()}),s.jsxs("div",{className:`flex items-center mt-2 ${b(t.ordersGrowth)}`,children:[w(t.ordersGrowth),s.jsxs("span",{className:"ml-1 text-sm font-medium",children:[t.ordersGrowth>0?"+":"",t.ordersGrowth.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(n,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalCustomers.toLocaleString()}),s.jsxs("div",{className:`flex items-center mt-2 ${b(t.customersGrowth)}`,children:[w(t.customersGrowth),s.jsxs("span",{className:"ml-1 text-sm font-medium",children:[t.customersGrowth>0?"+":"",t.customersGrowth.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(r,{className:"h-6 w-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:N(t.averageOrderValue)}),s.jsxs("div",{className:"flex items-center mt-2 text-gray-600",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsxs("span",{className:"ml-1 text-sm font-medium",children:[t.conversionRate.toFixed(1),"% conversion"]})]})]}),s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:s.jsx(i,{className:"h-6 w-6 text-orange-600"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Products"}),s.jsx("div",{className:"space-y-3",children:t.topProducts.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-500 w-6",children:["#",t+1]}),s.jsx("span",{className:"text-sm font-medium text-gray-900 ml-2",children:e.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:N(e.revenue)}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.sales," sales"]})]})]},e.id))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Orders"}),s.jsx("div",{className:"space-y-3",children:t.recentOrders.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.customer_name}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:N(e.total)}),s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]})]},e.id))})]})]})]}):s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-gray-500",children:"No analytics data available"})})}},Symbol.toStringTag,{value:"Module"})),L=Object.freeze(Object.defineProperty({__proto__:null,DedicatedAnalyticsDashboard:()=>{const[t,a]=e.useState(null),[d,o]=e.useState(!0),[m,x]=e.useState(null),[g,v]=e.useState("30d"),[f,N]=e.useState(!1);e.useEffect(()=>{b()},[g]);const b=async()=>{try{if(o(!0),x(null),!O)throw new Error("Supabase client is not initialized");const e=new Date,s=new Date;switch(g){case"7d":s.setDate(e.getDate()-7);break;case"30d":s.setDate(e.getDate()-30);break;case"90d":s.setDate(e.getDate()-90);break;case"1y":s.setFullYear(e.getFullYear()-1)}const[t,r,l]=await Promise.all([O.from("orders").select("id, total, status, created_at, profiles(id, email, full_name)").gte("created_at",s.toISOString()).lte("created_at",e.toISOString()),O.from("products").select("id, name, price"),O.from("profiles").select("id, created_at")]);if(t.error)throw new Error(`Failed to fetch orders: ${t.error.message}`);if(r.error)throw new Error(`Failed to fetch products: ${r.error.message}`);if(l.error)throw new Error(`Failed to fetch users: ${l.error.message}`);const n=t.data||[],i=r.data||[],d=l.data||[],c=n.reduce((e,s)=>e+(parseFloat(s.total_amount)||0),0),m=n.length,h=d.length,u=i.length,p=m>0?c/m:0,j=20*Math.random()-10,y=15*Math.random()-5,v=25*Math.random(),f=10*Math.random(),N=n.sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,5).map(e=>{var s,t;return{id:e.id,total:e.total,status:e.status,created_at:e.created_at,customer_name:(null==(s=e.profiles)?void 0:s.full_name)||(null==(t=e.profiles)?void 0:t.email)||"Unknown"}}),b=i.slice(0,5).map(e=>({id:e.id,name:e.name,sales:Math.floor(100*Math.random())+10,revenue:Math.floor(5e3*Math.random())+500})),w=Array.from({length:6},(e,s)=>{const t=new Date;return t.setMonth(t.getMonth()-s),{month:t.toLocaleDateString("en-US",{month:"short"}),sales:Math.floor(1e4*Math.random())+5e3,orders:Math.floor(100*Math.random())+50}}).reverse();a({totalRevenue:c,revenueGrowth:j,totalOrders:m,ordersGrowth:y,totalCustomers:h,customersGrowth:v,totalProducts:u,productsGrowth:f,averageOrderValue:p,conversionRate:5*Math.random()+2,topProducts:b,recentOrders:N,salesByMonth:w})}catch(e){let s="Failed to fetch analytics data";e instanceof Error&&(s=e.message.includes("apikey")||e.message.includes("API key")?"Authentication error: Please check your Supabase configuration and ensure the API key is properly set.":e.message.includes("network")||e.message.includes("fetch")?"Network error: Please check your internet connection and try again.":e.message.includes("timeout")?"Request timeout: The server is taking too long to respond. Please try again.":e.message),x(s),e instanceof Error&&(e.message.includes("apikey")||e.message.includes("network"))&&a({totalRevenue:125e3,revenueGrowth:12.5,totalOrders:450,ordersGrowth:8.2,totalCustomers:1250,customersGrowth:15.3,totalProducts:89,productsGrowth:5.1,averageOrderValue:277.78,conversionRate:3.2,topProducts:[],recentOrders:[],salesByMonth:[]})}finally{o(!1),N(!1)}},w=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),S=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return d?s.jsx("div",{className:"p-8",children:s.jsx(M,{size:"large",text:"Loading analytics data..."})}):m?s.jsx("div",{className:"p-8",children:s.jsx(k,{error:m,onRetry:b,type:"analytics",size:"large"})}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track your business performance and insights"})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[s.jsxs("select",{value:g,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"7d",children:"Last 7 days"}),s.jsx("option",{value:"30d",children:"Last 30 days"}),s.jsx("option",{value:"90d",children:"Last 90 days"}),s.jsx("option",{value:"1y",children:"Last year"})]}),s.jsxs("button",{onClick:async()=>{N(!0),await b()},disabled:f,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center space-x-2",children:[s.jsx(h,{className:"h-4 w-4 "+(f?"animate-spin":"")}),s.jsx("span",{children:"Refresh"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w(t.totalRevenue)}),s.jsxs("div",{className:"flex items-center mt-2",children:[t.revenueGrowth>=0?s.jsx(p,{className:"h-4 w-4 text-green-500"}):s.jsx(j,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"text-sm font-medium "+(t.revenueGrowth>=0?"text-green-600":"text-red-600"),children:S(t.revenueGrowth)}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(c,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalOrders.toLocaleString()}),s.jsxs("div",{className:"flex items-center mt-2",children:[t.ordersGrowth>=0?s.jsx(p,{className:"h-4 w-4 text-green-500"}):s.jsx(j,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"text-sm font-medium "+(t.ordersGrowth>=0?"text-green-600":"text-red-600"),children:S(t.ordersGrowth)}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(n,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalCustomers.toLocaleString()}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(p,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"text-sm font-medium text-green-600",children:S(t.customersGrowth)}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(r,{className:"h-6 w-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w(t.averageOrderValue)}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(p,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"text-sm font-medium text-green-600",children:"+5.2%"}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:s.jsx(l,{className:"h-6 w-6 text-orange-600"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),s.jsx(y,{className:"h-5 w-5 text-gray-400"})]}),s.jsx("div",{className:"space-y-3",children:t.recentOrders.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:e.customer_name}),s.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:w(e.total)}),s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]})]},e.id))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products"}),s.jsx(i,{className:"h-5 w-5 text-gray-400"})]}),s.jsx("div",{className:"space-y-3",children:t.topProducts.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium text-indigo-600",children:["#",t+1]})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[e.sales," sales"]})]})]}),s.jsx("p",{className:"font-semibold text-gray-900",children:w(e.revenue)})]},e.id))})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Data"}),s.jsx("p",{className:"text-gray-600",children:"Download your analytics data for further analysis"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center space-x-2",children:[s.jsx(u,{className:"h-4 w-4"}),s.jsx("span",{children:"CSV"})]}),s.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[s.jsx(u,{className:"h-4 w-4"}),s.jsx("span",{children:"PDF Report"})]})]})]})})]}):s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-gray-500",children:"No analytics data available"})})}},Symbol.toStringTag,{value:"Module"})),U=Object.freeze(Object.defineProperty({__proto__:null,AdvancedReports:()=>{const[t,r]=e.useState([]),[l,n]=e.useState([]),[i,d]=e.useState([]),[c,o]=e.useState(!0),[m,x]=e.useState("reports"),[g,p]=e.useState(!1),[j,O]=e.useState(!1),[k,A]=e.useState(null),[F,I]=e.useState(""),[L,U]=e.useState(""),[E,B]=e.useState(""),{showNotification:z}=G(),$=[{id:"reports",name:"Reports",icon:N},{id:"templates",name:"Templates",icon:f},{id:"exports",name:"Export Jobs",icon:u},{id:"builder",name:"Report Builder",icon:v}];e.useEffect(()=>{Z()},[]);const Z=async()=>{o(!0);try{await Promise.all([V(),q(),Y()])}catch(e){z({type:"error",title:"Error",message:"Failed to load reports data"})}finally{o(!1)}},V=async()=>{r([{id:"1",name:"Monthly Sales Report",description:"Comprehensive monthly sales analysis with trends and comparisons",type:"sales",format:"pdf",schedule:"monthly",status:"active",lastRun:"2024-06-01T09:00:00Z",nextRun:"2024-07-01T09:00:00Z",createdBy:"John Admin",createdAt:"2024-01-15T10:00:00Z",parameters:{dateRange:"30days",includeComparisons:!0},recipients:["admin@example.com","sales@example.com"]},{id:"2",name:"User Activity Report",description:"Weekly user engagement and activity metrics",type:"users",format:"csv",schedule:"weekly",status:"active",lastRun:"2024-06-15T08:00:00Z",nextRun:"2024-06-22T08:00:00Z",createdBy:"Jane Manager",createdAt:"2024-02-01T14:00:00Z",parameters:{includeInactive:!1,groupBy:"week"},recipients:["hr@example.com"]},{id:"3",name:"Inventory Status Report",description:"Daily inventory levels and low stock alerts",type:"inventory",format:"excel",schedule:"daily",status:"running",lastRun:"2024-06-16T06:00:00Z",nextRun:"2024-06-17T06:00:00Z",createdBy:"Bob Warehouse",createdAt:"2024-03-10T11:00:00Z",parameters:{lowStockThreshold:10,includeOutOfStock:!0},recipients:["warehouse@example.com","purchasing@example.com"]}])},q=async()=>{n([{id:"1",name:"Sales Performance Template",description:"Standard template for sales performance analysis",type:"sales",fields:["date","revenue","orders","customers","avg_order_value"],filters:["date_range","product_category","customer_segment"],groupBy:["date","category","region"],sortBy:["date_desc","revenue_desc"]},{id:"2",name:"User Engagement Template",description:"Template for analyzing user engagement metrics",type:"users",fields:["user_id","login_count","session_duration","page_views","last_activity"],filters:["date_range","user_type","activity_level"],groupBy:["date","user_type","region"],sortBy:["activity_desc","date_desc"]}])},Y=async()=>{d([{id:"1",reportId:"1",reportName:"Monthly Sales Report",status:"completed",progress:100,startTime:"2024-06-16T09:00:00Z",endTime:"2024-06-16T09:05:00Z",fileUrl:"/downloads/monthly-sales-2024-06.pdf",fileSize:2048576},{id:"2",reportId:"3",reportName:"Inventory Status Report",status:"processing",progress:65,startTime:"2024-06-16T10:00:00Z"},{id:"3",reportId:"2",reportName:"User Activity Report",status:"failed",progress:0,startTime:"2024-06-16T08:00:00Z",endTime:"2024-06-16T08:02:00Z",error:"Database connection timeout"}])},J=e=>{switch(e){case"active":case"completed":return"bg-green-100 text-green-800";case"running":case"processing":return"bg-blue-100 text-blue-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"failed":return"bg-red-100 text-red-800"}},W=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return c?s.jsx("div",{className:"p-8",children:s.jsx(M,{size:"large",text:"Loading reports..."})}):s.jsx(C,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(a,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Advanced Reports & Export"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Create, schedule, and manage comprehensive business reports"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T,{onClick:()=>p(!0),icon:v,children:"Create Report"}),s.jsx(T,{onClick:()=>O(!0),icon:f,variant:"outline",children:"Create Template"}),s.jsx(T,{onClick:Z,icon:h,variant:"outline",children:"Refresh"})]})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:$.map(e=>s.jsxs("button",{onClick:()=>x(e.id),className:(m===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[s.jsx(e.icon,{className:"h-5 w-5"}),s.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["reports"===m&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search reports...",value:F,onChange:e=>I(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsx("select",{value:L,onChange:e=>U(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[{value:"",label:"All Types"},{value:"sales",label:"Sales Reports"},{value:"users",label:"User Reports"},{value:"products",label:"Product Reports"},{value:"orders",label:"Order Reports"},{value:"inventory",label:"Inventory Reports"},{value:"custom",label:"Custom Reports"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))}),s.jsx("select",{value:E,onChange:e=>B(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"running",label:"Running"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J(e.status)}`,children:e.status})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Type:"}),s.jsx("span",{className:"text-gray-900 capitalize",children:e.type})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Format:"}),s.jsx("span",{className:"text-gray-900 uppercase",children:e.format})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Schedule:"}),s.jsx("span",{className:"text-gray-900 capitalize",children:e.schedule})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Last Run:"}),s.jsx("span",{className:"text-gray-900",children:new Date(e.lastRun).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx("button",{onClick:()=>(async e=>{try{const s=t.find(s=>s.id===e);if(!s)return;r(s=>s.map(s=>s.id===e?{...s,status:"running"}:s));const a={id:Date.now().toString(),reportId:e,reportName:s.name,status:"processing",progress:0,startTime:(new Date).toISOString()};d(e=>[a,...e]),z({type:"success",title:"Report Started",message:`${s.name} is now being generated`});let l=0;const n=setInterval(()=>{l+=20*Math.random(),l>=100?(l=100,clearInterval(n),d(e=>e.map(e=>e.id===a.id?{...e,status:"completed",progress:100,endTime:(new Date).toISOString(),fileUrl:`/downloads/${s.name.toLowerCase().replace(/\s+/g,"-")}.${s.format}`,fileSize:Math.floor(5e6*Math.random())+1e6}:e)),r(s=>s.map(s=>s.id===e?{...s,status:"completed",lastRun:(new Date).toISOString()}:s)),z({type:"success",title:"Report Completed",message:`${s.name} has been generated successfully`})):d(e=>e.map(e=>e.id===a.id?{...e,progress:l}:e))},1e3)}catch(s){z({type:"error",title:"Report Failed",message:"Failed to generate report"})}})(e.id),className:"text-indigo-600 hover:text-indigo-900",disabled:"running"===e.status,children:s.jsx(w,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(y,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(S,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(R,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(_,{className:"h-4 w-4"})})]})]},e.id))})]}),"exports"===m&&s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Size"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.reportName})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J(e.status)}`,children:e.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),s.jsxs("span",{className:"text-sm text-gray-900",children:[e.progress,"%"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.startTime).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.fileSize?W(e.fileSize):"-"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:["completed"===e.status&&e.fileUrl&&s.jsx("button",{onClick:()=>(e=>{e.fileUrl&&z({type:"success",title:"Download Started",message:`Downloading ${e.reportName}`})})(e),className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(u,{className:"h-4 w-4"})}),"failed"===e.status&&s.jsx("span",{className:"text-red-600 text-xs",children:e.error})]})]},e.id))})]})})}),"templates"===m&&s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(e=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Type: "}),s.jsx("span",{className:"text-gray-900 capitalize",children:e.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Fields: "}),s.jsxs("span",{className:"text-gray-900",children:[e.fields.length," fields"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Filters: "}),s.jsxs("span",{className:"text-gray-900",children:[e.filters.length," filters"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(y,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(S,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(R,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(_,{className:"h-4 w-4"})})]})]},e.id))})}),"builder"===m&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Report Builder"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Create custom reports with our drag-and-drop report builder"}),s.jsx(T,{onClick:()=>{z({type:"info",title:"Coming Soon",message:"Advanced report builder will be available in the next update"})},icon:v,children:"Launch Report Builder"})]})})]}),s.jsx(P,{isOpen:g,onClose:()=>p(!1),title:"Create New Report",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Name"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter report name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter report description"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"sales",children:"Sales Report"}),s.jsx("option",{value:"users",children:"User Report"}),s.jsx("option",{value:"products",children:"Product Report"}),s.jsx("option",{value:"orders",children:"Order Report"}),s.jsx("option",{value:"inventory",children:"Inventory Report"}),s.jsx("option",{value:"custom",children:"Custom Report"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"pdf",children:"PDF"}),s.jsx("option",{value:"csv",children:"CSV"}),s.jsx("option",{value:"excel",children:"Excel"}),s.jsx("option",{value:"json",children:"JSON"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"manual",children:"Manual"}),s.jsx("option",{value:"daily",children:"Daily"}),s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(T,{onClick:()=>p(!1),variant:"outline",children:"Cancel"}),s.jsx(T,{onClick:()=>{p(!1),z({type:"success",title:"Report Created",message:"New report has been created successfully"})},icon:D,children:"Create Report"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{F as A,L as D,I as E,U as a};
//# sourceMappingURL=admin-analytics-BjhDWLJ4.js.map
