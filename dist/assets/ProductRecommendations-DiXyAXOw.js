import{c as V,u as L,q as P,r as B,v as E,a as H,j as s,m as z,H as F,x as I,b as J,P as v,E as W,T as _}from"./index-CZfeFpFF.js";import{r as g,L as A}from"./router-ji7Lkway.js";import{a as U}from"./MobileProductCarousel-C3pRfQE8.js";import{A as Y}from"./arrow-right-DTC_1ZP5.js";import{U as G}from"./users-DYlva5Sj.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],te=V("shield-check",K),ae=({currentProduct:d,type:l,title:x,subtitle:S,maxItems:n=4,className:u="",showAddToCart:k=!0,layout:f="horizontal"})=>{const{products:o}=L(),{addItem:C}=P(),{addItem:R,isInWishlist:y}=B(),{showNotification:M}=E(),{isMobile:$}=H(),[c,b]=g.useState([]),[D,h]=g.useState(!0),m={related:{calculateSimilarity:(e,t)=>{let r=0;if(e.category===t.category&&(r+=40),Math.abs(e.price-t.price)/Math.max(e.price,t.price)<=.3&&(r+=25),e.sellerName&&t.sellerName&&e.sellerName===t.sellerName&&(r+=20),e.tags&&t.tags){const i=e.tags.filter(N=>t.tags.includes(N));r+=i.length/Math.max(e.tags.length,t.tags.length)*15}return r},getRecommendations:(e,t,r)=>t.filter(a=>a.id!==e.id).map(a=>({product:a,score:m.related.calculateSimilarity(e,a)})).sort((a,i)=>i.score-a.score).slice(0,r).map(a=>a.product)},"frequently-bought":{calculateSimilarity:(e,t)=>{var w;let r=0;const a={"Oudh Attars":["Amber Attars","Sandalwood Attars"],"Floral Attars":["Jasmine Attars","Attar Blends"],"Musk Attars":["Oudh Attars","Amber Attars"],"Amber Attars":["Oudh Attars","Saffron Attars"],"Saffron Attars":["Amber Attars","Heritage Attars"],"Sandalwood Attars":["Oudh Attars","Musk Attars"],"Jasmine Attars":["Floral Attars","Attar Blends"],"Attar Blends":["Heritage Attars","Seasonal Attars"],"Seasonal Attars":["Attar Blends","Floral Attars"],"Heritage Attars":["Oudh Attars","Saffron Attars"]};e.category&&t.category&&((w=a[e.category])!=null&&w.includes(t.category))?r+=50:e.category===t.category&&(r+=30);const i=t.price/e.price;return i>=.1&&i<=.5&&(r+=30),Math.abs(e.rating-t.rating)<=.5&&(r+=20),r},getRecommendations:(e,t,r)=>t.filter(a=>a.id!==e.id).map(a=>({product:a,score:m["frequently-bought"].calculateSimilarity(e,a)})).sort((a,i)=>i.score-a.score).slice(0,r).map(a=>a.product)},"you-may-like":{calculateSimilarity:(e,t)=>{let r=0;r+=t.rating*15,t.featured&&(r+=25),e.category!==t.category&&(r+=20);const a=t.price/e.price;return a>=.8&&a<=1.5&&(r+=20),r+=Math.random()*20,r},getRecommendations:(e,t,r)=>t.filter(a=>a.id!==e.id).map(a=>({product:a,score:m["you-may-like"].calculateSimilarity(e,a)})).sort((a,i)=>i.score-a.score).slice(0,r).map(a=>a.product)},"recently-viewed":{calculateSimilarity:()=>0,getRecommendations:(e,t,r)=>{const a=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");return t.filter(i=>a.includes(i.id)&&i.id!==(e==null?void 0:e.id)).slice(0,r)}}};g.useEffect(()=>{if(l==="recently-viewed"){const e=JSON.parse(localStorage.getItem("recentlyViewed")||"[]"),t=o.filter(r=>e.includes(r.id)).slice(0,n);b(t),h(!1)}else d&&o.length>0&&(h(!0),setTimeout(()=>{const e=m[l].getRecommendations(d,o,n);b(e),h(!1)},300))},[d,o,l,n]);const T=(e,t)=>{t.preventDefault(),t.stopPropagation(),C(e),M({type:"success",title:"Added to Cart",message:`${e.name} has been added to your cart.`})},q=(e,t)=>{t.preventDefault(),t.stopPropagation(),R(e)},p=()=>{switch(l){case"related":return s.jsx(v,{className:"h-4 w-4"});case"frequently-bought":return s.jsx(G,{className:"h-4 w-4"});case"you-may-like":return s.jsx(_,{className:"h-4 w-4"});case"recently-viewed":return s.jsx(W,{className:"h-4 w-4"});default:return s.jsx(v,{className:"h-4 w-4"})}},j=()=>{switch(l){case"related":return"Related Products";case"frequently-bought":return"Frequently Bought Together";case"you-may-like":return"You May Also Like";case"recently-viewed":return"Recently Viewed";default:return"Recommended Products"}},O=()=>{switch(l){case"related":return"Similar products you might be interested in";case"frequently-bought":return"Customers who bought this item also bought";case"you-may-like":return"Personalized recommendations just for you";case"recently-viewed":return"Continue where you left off";default:return"Discover more great products"}};return D?s.jsxs("div",{className:`${u}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[s.jsx("div",{className:"text-neutral-600",children:p()}),s.jsxs("div",{children:[s.jsx("div",{className:"h-4 sm:h-5 bg-neutral-200 rounded w-32 sm:w-40 animate-pulse"}),s.jsx("div",{className:"h-2.5 sm:h-3 bg-neutral-100 rounded w-36 sm:w-48 mt-1 animate-pulse"})]})]}),s.jsx("div",{className:`grid gap-3 sm:gap-4 ${f==="grid"?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"}`,children:Array.from({length:n}).map((e,t)=>s.jsxs("div",{className:"bg-white rounded-lg border border-neutral-200 p-2.5 sm:p-3 animate-pulse",children:[s.jsx("div",{className:"aspect-square bg-neutral-200 rounded-md mb-2.5 sm:mb-3"}),s.jsx("div",{className:"h-2.5 sm:h-3 bg-neutral-200 rounded mb-1.5"}),s.jsx("div",{className:"h-2.5 sm:h-3 bg-neutral-100 rounded w-3/4"})]},t))})]}):c.length===0?null:s.jsxs("section",{className:`${u}`,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 mb-3 sm:mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"text-neutral-600",children:p()}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-neutral-900",children:x||j()}),s.jsx("p",{className:"text-[10px] sm:text-xs text-neutral-600 mt-0.5",children:S||O()})]})]}),c.length>n&&s.jsxs(A,{to:"/products",className:"flex items-center space-x-1.5 text-primary-600 hover:text-primary-700 transition-colors text-xs sm:text-sm touch-manipulation",children:[s.jsx("span",{className:"font-medium",children:"View All"}),s.jsx(Y,{className:"h-3 w-3"})]})]}),$?s.jsx(U,{products:c,title:x||j()}):s.jsx("div",{className:`grid gap-3 sm:gap-4 ${f==="grid"?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"}`,children:c.map((e,t)=>s.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"touch-manipulation",children:s.jsx(A,{to:`/products/${e.id}`,className:"group block",children:s.jsxs("div",{className:"bg-white rounded-lg border border-neutral-200 hover:border-neutral-300 transition-all duration-200 hover:shadow-md overflow-hidden",children:[s.jsxs("div",{className:"aspect-square relative overflow-hidden",children:[s.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx("button",{onClick:r=>q(e,r),className:`absolute top-1.5 sm:top-2 right-1.5 sm:right-2 p-1 rounded-full transition-all ${y(e.id)?"bg-red-100 text-red-600":"bg-white/80 text-neutral-600 hover:bg-white"} touch-manipulation`,children:s.jsx(F,{className:`h-3 w-3 sm:h-3.5 sm:w-3.5 ${y(e.id)?"fill-current":""}`})}),k&&e.stock>0&&s.jsxs("button",{onClick:r=>T(e,r),className:"absolute bottom-1.5 sm:bottom-2 left-1.5 sm:left-2 right-1.5 sm:right-2 bg-neutral-900 text-white py-1 px-2 sm:py-1.5 sm:px-3 rounded-md opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center justify-center space-x-1 hover:bg-neutral-800 active:bg-neutral-700 touch-manipulation",children:[s.jsx(I,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"}),s.jsx("span",{className:"text-[10px] sm:text-xs font-medium",children:"Add to Cart"})]})]}),s.jsxs("div",{className:"p-2.5 sm:p-3",children:[s.jsx("h4",{className:"font-medium text-neutral-900 mb-1 line-clamp-2 group-hover:text-primary-600 transition-colors text-xs sm:text-sm",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[s.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((r,a)=>s.jsx(J,{className:`h-2.5 w-2.5 sm:h-3 sm:w-3 ${a<Math.floor(e.rating)?"text-yellow-400 fill-current":"text-neutral-300"}`},a))}),s.jsxs("span",{className:"text-[10px] text-neutral-500",children:["(",e.rating,")"]})]}),s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsxs("span",{className:"text-sm sm:text-base font-semibold text-neutral-900",children:["$",e.price]}),e.originalPrice&&s.jsxs("span",{className:"text-[10px] sm:text-xs text-neutral-500 line-through",children:["$",e.originalPrice]})]}),e.stock<=5&&e.stock>0&&s.jsxs("p",{className:"text-[10px] text-orange-600 mt-1",children:["Only ",e.stock," left in stock"]}),e.stock===0&&s.jsx("p",{className:"text-[10px] text-red-600 mt-1",children:"Out of stock"})]})]})})},e.id))})]})};export{ae as P,te as S};
