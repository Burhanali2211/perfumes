{"version":3,"file":"product-C38Xnw-V.js","sources":["../../src/components/Product/ProductCard.tsx","../../src/components/Product/ProductDetails.tsx","../../src/components/Product/ProductRecommendations.tsx","../../src/components/Product/ProductListCard.tsx","../../src/components/Product/AttrFilters.tsx","../../src/components/Product/ProductReview.tsx","../../src/components/Product/ReviewForm.tsx","../../src/components/Product/EnhancedProductForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Star, Heart, ShoppingCart, GitCompare } from 'lucide-react';\r\nimport { Product } from '../../types';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { useWishlist } from '../../contexts/WishlistContext';\r\nimport { useCompare } from '../../contexts/CompareContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport { Link } from 'react-router-dom';\r\nimport { dataPreloader } from '../../utils/preloader';\r\nimport { MiniTrustIndicators, TrendingIndicator } from '../Trust';\r\nimport { useAddToCartWithAuth } from '../../hooks/useAddToCartWithAuth';\r\nimport { useAddToWishlistWithAuth } from '../../hooks/useAddToWishlistWithAuth';\r\nimport { useAddToCompareWithAuth } from '../../hooks/useAddToCompareWithAuth';\r\n\r\ninterface ProductCardProps {\r\n  product: Product;\r\n}\r\n\r\nexport const ProductCard: React.FC<ProductCardProps> = ({ product }) => {\r\n  const { isInWishlist } = useWishlist();\r\n  const { isInCompare } = useCompare();\r\n  const { showSuccess } = useNotification();\r\n  const { handleAddToCart } = useAddToCartWithAuth();\r\n  const { handleAddToWishlist } = useAddToWishlistWithAuth();\r\n  const { handleAddToCompare } = useAddToCompareWithAuth();\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n  const handleWishlistToggle = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    handleAddToWishlist(product);\r\n  };\r\n  \r\n  const handleCompareToggle = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    handleAddToCompare(product);\r\n  };\r\n\r\n  const discount = product.originalPrice\r\n    ? Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)\r\n    : 0;\r\n\r\n  const getStockStatus = () => {\r\n    if (product.stock === 0) return { text: 'Out of Stock', color: 'bg-red-500', textColor: 'text-red-600' };\r\n    if (product.stock <= 5) return { text: 'Low Stock', color: 'bg-orange-500', textColor: 'text-orange-600' };\r\n    return { text: 'In Stock', color: 'bg-green-500', textColor: 'text-green-600' };\r\n  };\r\n\r\n  const stockStatus = getStockStatus();\r\n\r\n  return (\r\n    <div\r\n      className=\"product-card group flex flex-col h-full bg-white rounded-lg sm:rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200 border border-gray-100 touch-manipulation\"\r\n      onMouseEnter={() => {\r\n        // Preload product details on hover\r\n        dataPreloader.preloadProduct(product.id, { priority: 'high' });\r\n      }}\r\n    >\r\n      <div className=\"relative overflow-hidden group/image bg-gray-50\">\r\n        <Link to={`/products/${product.id}`} className=\"block\">\r\n          {/* Amazon-style 4:3 aspect ratio for better grid display */}\r\n          <div className=\"aspect-[4/3] relative overflow-hidden\">\r\n            <img\r\n              key={currentImageIndex}\r\n              src={(product.images && product.images.length > 0 ? product.images[currentImageIndex] || product.images[0] : '') || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4='}\r\n              alt={product.name}\r\n              className=\"w-full h-full object-cover\"\r\n              loading=\"lazy\"\r\n              crossOrigin=\"anonymous\"\r\n              onError={(e) => {\r\n                const target = e.target as HTMLImageElement;\r\n                target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4=';\r\n              }}\r\n            />\r\n\r\n            {/* Image Navigation - Amazon Style with mobile optimization */}\r\n            {product.images && product.images.length > 1 && (\r\n              <div className=\"absolute bottom-1.5 sm:bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 sm:space-x-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\r\n                {product.images.map((_, index) => (\r\n                  <button\r\n                    key={`${product.id}-image-${index}`}\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      e.stopPropagation();\r\n                      setCurrentImageIndex(index);\r\n                    }}\r\n                    className={`w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full transition-all duration-150 ${\r\n                      index === currentImageIndex\r\n                        ? 'bg-white shadow-md'\r\n                        : 'bg-white/70 hover:bg-white/90'\r\n                    }`}\r\n                    aria-label={`View image ${index + 1}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* Subtle Overlay */}\r\n            <div className=\"absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200\" />\r\n          </div>\r\n        </Link>\r\n\r\n        {/* Amazon-Style Status Badges */}\r\n        <div className=\"absolute top-2 left-2 flex flex-col space-y-1 z-10\">\r\n          {discount > 0 && (\r\n            <span className=\"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded font-medium shadow-sm\">\r\n              -{discount}% OFF\r\n            </span>\r\n          )}\r\n\r\n          {product.featured && (\r\n            <TrendingIndicator isHot={true} className=\"shadow-sm\" />\r\n          )}\r\n\r\n          {product.stock <= 0 && (\r\n            <span className=\"bg-gray-500 text-white text-[10px] px-1.5 py-0.5 rounded font-medium shadow-sm\">\r\n              Out of Stock\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Amazon-Style Action Buttons with mobile touch optimization */}\r\n        <div className=\"absolute top-1.5 sm:top-2 right-1.5 sm:right-2 flex flex-col space-y-1 sm:space-y-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\r\n          <button\r\n            onClick={handleWishlistToggle}\r\n            className={`p-1 sm:p-1.5 rounded-full shadow-sm border transition-colors duration-200 ${\r\n              isInWishlist(product.id)\r\n                ? 'bg-red-50 text-red-600 border-red-200'\r\n                : 'bg-white text-gray-600 hover:text-red-500 border-gray-200 hover:border-red-200'\r\n            } touch-manipulation`}\r\n          >\r\n            <Heart className={`h-3 w-3 sm:h-3.5 sm:w-3.5 ${isInWishlist(product.id) ? 'fill-current' : ''}`} />\r\n          </button>\r\n          <button\r\n            onClick={handleCompareToggle}\r\n            className={`p-1 sm:p-1.5 rounded-full shadow-sm border transition-colors duration-200 ${\r\n              isInCompare(product.id)\r\n                ? 'bg-blue-50 text-blue-600 border-blue-200'\r\n                : 'bg-white text-gray-600 hover:text-blue-500 border-gray-200 hover:border-blue-200'\r\n            } touch-manipulation`}\r\n          >\r\n            <GitCompare className=\"h-3 w-3 sm:h-3.5 sm:w-3.5\" />\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Amazon-Style Add to Cart Button with mobile touch optimization */}\r\n        <div className=\"absolute bottom-0 left-0 right-0 p-1.5 sm:p-2 transform translate-y-full group-hover:translate-y-0 transition-transform duration-200 bg-gradient-to-t from-white via-white/95 to-transparent\">\r\n          <button\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              e.preventDefault();\r\n              if (product.stock > 0) {\r\n                handleAddToCart(product);\r\n              }\r\n            }}\r\n            disabled={product.stock === 0}\r\n            className={`w-full flex items-center justify-center space-x-1 px-2 py-1.5 sm:px-3 sm:py-2 rounded-md sm:rounded-lg font-medium transition-colors duration-200 ${\r\n              product.stock === 0\r\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                : 'bg-orange-500 text-white hover:bg-orange-600 shadow-sm active:bg-orange-700'\r\n            } touch-manipulation`}\r\n          >\r\n            <ShoppingCart className=\"h-3 w-3 sm:h-3.5 sm:w-3.5\" />\r\n            <span className=\"text-[10px] sm:text-xs font-medium\">\r\n              {product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}\r\n            </span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Amazon-Style Product Information with mobile optimization */}\r\n      <div className=\"p-2.5 sm:p-3 flex flex-col flex-grow space-y-1.5 sm:space-y-2\">\r\n        <div className=\"space-y-1\">\r\n          <span className=\"text-[10px] sm:text-xs text-gray-600 uppercase tracking-wide font-medium\">\r\n            {product.category}\r\n          </span>\r\n          <Link to={`/products/${product.id}`}>\r\n            <h3 className=\"text-xs sm:text-sm font-medium text-gray-900 line-clamp-2 leading-4 group-hover:text-blue-600 transition-colors duration-200\">\r\n              {product.name}\r\n            </h3>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"flex-grow\"></div>\r\n\r\n        <div className=\"space-y-1.5 sm:space-y-2\">\r\n          {/* Rating */}\r\n          <div className=\"flex items-center space-x-0.5 sm:space-x-1\">\r\n            {[...Array(5)].map((_, i) => (\r\n              <Star\r\n                key={`${product.id}-star-${i}`}\r\n                className={`h-2.5 w-2.5 sm:h-3 sm:w-3 ${\r\n                  i < Math.floor(product.rating)\r\n                    ? 'text-yellow-400 fill-current'\r\n                    : 'text-gray-300'\r\n                }`}\r\n              />\r\n            ))}\r\n            <span className=\"text-[10px] text-gray-600 ml-0.5\">({product.rating})</span>\r\n          </div>\r\n\r\n          {/* Price */}\r\n          <div className=\"flex items-center space-x-1.5\">\r\n            <span className=\"text-sm sm:text-base font-bold text-gray-900\">\r\n              ₹{product.price.toLocaleString('en-IN')}\r\n            </span>\r\n            {product.originalPrice && (\r\n              <span className=\"text-[10px] sm:text-xs text-gray-500 line-through\">\r\n                ₹{product.originalPrice.toLocaleString('en-IN')}\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {/* Stock Status */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className={`text-[10px] font-medium ${\r\n              product.stock > 0 ? 'text-green-600' : 'text-red-500'\r\n            }`}>\r\n              {product.stock > 0 ? (product.stock > 10 ? 'In Stock' : `Only ${product.stock} left`) : 'Out of stock'}\r\n            </span>\r\n            {discount > 0 && (\r\n              <span className=\"bg-red-100 text-red-700 text-[10px] font-semibold px-1 py-0.5 rounded\">\r\n                {discount}% OFF\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {/* Trust Indicators */}\r\n          <div className=\"pt-1.5 border-t border-gray-100\">\r\n            <MiniTrustIndicators\r\n              freeShipping={product.price >= 2000}\r\n              warranty={true}\r\n              returns={true}\r\n              className=\"justify-center scale-75\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { X, Star, Heart, ShoppingCart, Minus, Plus, Share2, Shield, Truck, RotateCcw } from 'lucide-react';\r\nimport { Product } from '../../types';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { useAddToCartWithAuth } from '../../hooks/useAddToCartWithAuth';\r\nimport { useAddToWishlistWithAuth } from '../../hooks/useAddToWishlistWithAuth';\r\n\r\ninterface ProductDetailsProps {\r\n  product: Product;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const ProductDetails: React.FC<ProductDetailsProps> = ({ product, isOpen, onClose }) => {\r\n  const { handleAddToCart } = useAddToCartWithAuth();\r\n  const { handleAddToWishlist } = useAddToWishlistWithAuth();\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [selectedImage, setSelectedImage] = useState(0);\r\n\r\n  const handleAddToCartClick = () => {\r\n    handleAddToCart(product, quantity);\r\n    onClose();\r\n  };\r\n\r\n  const handleAddToWishlistClick = () => {\r\n    handleAddToWishlist(product);\r\n  };\r\n\r\n  const features = [\r\n    { icon: Truck, text: 'Free shipping on orders over $50' },\r\n    { icon: RotateCcw, text: '30-day return policy' },\r\n    { icon: Shield, text: '2-year warranty included' },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      {isOpen && (\r\n        <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n          <div className=\"flex min-h-screen items-center justify-center p-4\">\r\n            <div\r\n              className=\"fixed inset-0 bg-black bg-opacity-50\"\r\n              onClick={onClose}\r\n            />\r\n\r\n            <div className=\"relative bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4\">\r\n              <button\r\n                onClick={onClose}\r\n                className=\"absolute top-4 right-4 z-10 p-2 bg-white rounded-full shadow-md hover:bg-gray-50\"\r\n              >\r\n                <X className=\"h-5 w-5\" />\r\n              </button>\r\n\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 p-6\">\r\n                {/* Images Section */}\r\n                <div>\r\n                  <div className=\"aspect-square mb-4\">\r\n                    <img\r\n                      src={product.images[selectedImage]}\r\n                      alt={product.name}\r\n                      className=\"w-full h-full object-cover rounded-lg\"\r\n                    />\r\n                  </div>\r\n                  {product.images.length > 1 && (\r\n                    <div className=\"flex space-x-2\">\r\n                      {product.images.map((image, index) => (\r\n                        <button\r\n                          key={index}\r\n                          onClick={() => setSelectedImage(index)}\r\n                          className={`w-16 h-16 rounded border-2 overflow-hidden ${selectedImage === index ? 'border-indigo-500' : 'border-gray-200'\r\n                            }`}\r\n                        >\r\n                          <img src={image} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Product Info Section */}\r\n                <div className=\"flex flex-col\">\r\n                  <div className=\"mb-4\">\r\n                    <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{product.name}</h1>\r\n                    <p className=\"text-gray-600 mb-4\">{product.description}</p>\r\n\r\n                    {/* Rating */}\r\n                    <div className=\"flex items-center mb-4\">\r\n                      <div className=\"flex items-center\">\r\n                        {[...Array(5)].map((_, i) => (\r\n                          <Star\r\n                            key={i}\r\n                            className={`h-5 w-5 ${i < Math.floor(product.rating)\r\n                                ? 'text-yellow-400 fill-current'\r\n                                : 'text-gray-300'\r\n                              }`}\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                      <span className=\"text-gray-600 ml-2\">({product.rating}) • {product.reviews?.length || 0} reviews</span>\r\n                    </div>\r\n\r\n                    {/* Price */}\r\n                    <div className=\"flex items-center space-x-3 mb-6\">\r\n                      <span className=\"text-3xl font-bold text-gray-900\">${product.price}</span>\r\n                      {product.originalPrice && (\r\n                        <>\r\n                          <span className=\"text-xl text-gray-500 line-through\">${product.originalPrice}</span>\r\n                          <span className=\"bg-red-100 text-red-600 px-2 py-1 rounded-lg text-sm font-semibold\">\r\n                            Save ${(product.originalPrice - product.price).toFixed(2)}\r\n                          </span>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Quantity Selector */}\r\n                  <div className=\"mb-6\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Quantity</label>\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <button\r\n                        onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                        className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n                      >\r\n                        <Minus className=\"h-4 w-4\" />\r\n                      </button>\r\n                      <span className=\"px-4 py-2 border border-gray-300 rounded-lg min-w-[60px] text-center\">\r\n                        {quantity}\r\n                      </span>\r\n                      <button\r\n                        onClick={() => setQuantity(Math.min(product.stock, quantity + 1))}\r\n                        className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n                        disabled={quantity >= product.stock}\r\n                      >\r\n                        <Plus className=\"h-4 w-4\" />\r\n                      </button>\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {product.stock} available\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Action Buttons */}\r\n                  <div className=\"flex space-x-4 mb-8\">\r\n                    <motion.button\r\n                      onClick={handleAddToCartClick}\r\n                      disabled={product.stock === 0}\r\n                      className={`flex-1 btn-primary btn-lg flex items-center justify-center space-x-2 ${product.stock === 0 ? 'opacity-50 cursor-not-allowed' : ''\r\n                        }`}\r\n                      whileHover={product.stock > 0 ? { scale: 1.02 } : {}}\r\n                      whileTap={product.stock > 0 ? { scale: 0.98 } : {}}\r\n                    >\r\n                      <ShoppingCart className=\"h-5 w-5\" />\r\n                      <span>{product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}</span>\r\n                    </motion.button>\r\n\r\n                    <motion.button\r\n                      onClick={handleAddToWishlistClick}\r\n                      className=\"btn-secondary p-4 hover:text-red-500\"\r\n                      whileHover={{ scale: 1.05 }}\r\n                      whileTap={{ scale: 0.95 }}\r\n                    >\r\n                      <Heart className=\"h-5 w-5\" />\r\n                    </motion.button>\r\n\r\n                    <motion.button\r\n                      className=\"btn-secondary p-4\"\r\n                      whileHover={{ scale: 1.05 }}\r\n                      whileTap={{ scale: 0.95 }}\r\n                    >\r\n                      <Share2 className=\"h-5 w-5\" />\r\n                    </motion.button>\r\n                  </div>\r\n\r\n                  {/* Features */}\r\n                  <div className=\"bg-neutral-50 rounded-xl p-6 space-y-4\">\r\n                    <h3 className=\"font-semibold text-neutral-900 mb-4\">Product Features</h3>\r\n                    {features.map((feature, index) => (\r\n                      <div key={index} className=\"flex items-center space-x-3 text-sm text-neutral-700\">\r\n                        <div className=\"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center\">\r\n                          <feature.icon className=\"h-4 w-4 text-emerald-600\" />\r\n                        </div>\r\n                        <span className=\"font-medium\">{feature.text}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Seller Info */}\r\n                  <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600\">Sold by</p>\r\n                        <p className=\"font-semibold text-gray-900\">{product.sellerName}</p>\r\n                      </div>\r\n                      <button className=\"text-indigo-600 text-sm hover:text-indigo-700\">\r\n                        View Store\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n  ArrowRight,\r\n  ShoppingCart,\r\n  Heart,\r\n  Star,\r\n  TrendingUp,\r\n  Users,\r\n  Package,\r\n  Eye\r\n} from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Product } from '../../types';\r\nimport { useProducts } from '../../contexts/ProductContext';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { useWishlist } from '../../contexts/WishlistContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport { MobileCompactCarousel } from '../Mobile/MobileProductCarousel';\r\nimport { useMobileDetection } from '../../hooks/useMobileGestures';\r\n\r\ninterface ProductRecommendationsProps {\r\n  currentProduct?: Product;\r\n  type: 'related' | 'frequently-bought' | 'you-may-like' | 'recently-viewed';\r\n  title?: string;\r\n  subtitle?: string;\r\n  maxItems?: number;\r\n  className?: string;\r\n  showAddToCart?: boolean;\r\n  layout?: 'horizontal' | 'grid';\r\n}\r\n\r\ninterface RecommendationAlgorithm {\r\n  calculateSimilarity: (product1: Product, product2: Product) => number;\r\n  getRecommendations: (currentProduct: Product, allProducts: Product[], maxItems: number) => Product[];\r\n}\r\n\r\nexport const ProductRecommendations: React.FC<ProductRecommendationsProps> = ({\r\n  currentProduct,\r\n  type,\r\n  title,\r\n  subtitle,\r\n  maxItems = 4,\r\n  className = '',\r\n  showAddToCart = true,\r\n  layout = 'horizontal'\r\n}) => {\r\n  const { products } = useProducts();\r\n  const { addItem: addToCart } = useCart();\r\n  const { addItem: addToWishlist, isInWishlist } = useWishlist();\r\n  const { showNotification } = useNotification();\r\n  const { isMobile } = useMobileDetection();\r\n  const [recommendedProducts, setRecommendedProducts] = useState<Product[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Recommendation algorithms\r\n  const algorithms: Record<string, RecommendationAlgorithm> = {\r\n    related: {\r\n      calculateSimilarity: (product1: Product, product2: Product) => {\r\n        let score = 0;\r\n\r\n        // Category similarity (highest weight)\r\n        if (product1.category === product2.category) score += 40;\r\n\r\n        // Price similarity (within 30% range)\r\n        const priceDiff = Math.abs(product1.price - product2.price) / Math.max(product1.price, product2.price);\r\n        if (priceDiff <= 0.3) score += 25;\r\n\r\n        // Brand similarity - using seller name\r\n        if (product1.sellerName && product2.sellerName && product1.sellerName === product2.sellerName) score += 20;\r\n\r\n        // Tag similarity\r\n        if (product1.tags && product2.tags) {\r\n          const commonTags = product1.tags.filter(tag => product2.tags!.includes(tag));\r\n          score += (commonTags.length / Math.max(product1.tags.length, product2.tags.length)) * 15;\r\n        }\r\n\r\n        return score;\r\n      },\r\n      getRecommendations: (currentProduct: Product, allProducts: Product[], maxItems: number) => {\r\n        return allProducts\r\n          .filter(p => p.id !== currentProduct.id)\r\n          .map(product => ({\r\n            product,\r\n            score: algorithms.related.calculateSimilarity(currentProduct, product)\r\n          }))\r\n          .sort((a, b) => b.score - a.score)\r\n          .slice(0, maxItems)\r\n          .map(item => item.product);\r\n      }\r\n    },\r\n\r\n    'frequently-bought': {\r\n      calculateSimilarity: (product1: Product, product2: Product) => {\r\n        // Simulate frequently bought together based on category and price complementarity\r\n        let score = 0;\r\n\r\n        // Complementary categories get higher scores\r\n        const complementaryCategories: Record<string, string[]> = {\r\n          'Oudh Attars': ['Amber Attars', 'Sandalwood Attars'],\r\n          'Floral Attars': ['Jasmine Attars', 'Attar Blends'],\r\n          'Musk Attars': ['Oudh Attars', 'Amber Attars'],\r\n          'Amber Attars': ['Oudh Attars', 'Saffron Attars'],\r\n          'Saffron Attars': ['Amber Attars', 'Heritage Attars'],\r\n          'Sandalwood Attars': ['Oudh Attars', 'Musk Attars'],\r\n          'Jasmine Attars': ['Floral Attars', 'Attar Blends'],\r\n          'Attar Blends': ['Heritage Attars', 'Seasonal Attars'],\r\n          'Seasonal Attars': ['Attar Blends', 'Floral Attars'],\r\n          'Heritage Attars': ['Oudh Attars', 'Saffron Attars']\r\n        };\r\n\r\n        if (product1.category && product2.category && complementaryCategories[product1.category]?.includes(product2.category)) {\r\n          score += 50;\r\n        } else if (product1.category === product2.category) {\r\n          score += 30;\r\n        }\r\n\r\n        // Price complementarity (accessories should be cheaper than main items)\r\n        const priceRatio = product2.price / product1.price;\r\n        if (priceRatio >= 0.1 && priceRatio <= 0.5) score += 30; // Good accessory price range\r\n\r\n        // Rating similarity\r\n        const ratingDiff = Math.abs(product1.rating - product2.rating);\r\n        if (ratingDiff <= 0.5) score += 20;\r\n\r\n        return score;\r\n      },\r\n      getRecommendations: (currentProduct: Product, allProducts: Product[], maxItems: number) => {\r\n        return allProducts\r\n          .filter(p => p.id !== currentProduct.id)\r\n          .map(product => ({\r\n            product,\r\n            score: algorithms['frequently-bought'].calculateSimilarity(currentProduct, product)\r\n          }))\r\n          .sort((a, b) => b.score - a.score)\r\n          .slice(0, maxItems)\r\n          .map(item => item.product);\r\n      }\r\n    },\r\n\r\n    'you-may-like': {\r\n      calculateSimilarity: (product1: Product, product2: Product) => {\r\n        // Personalized recommendations based on user behavior patterns\r\n        let score = 0;\r\n\r\n        // High-rated products get priority\r\n        score += product2.rating * 15;\r\n\r\n        // Featured products get boost\r\n        if (product2.featured) score += 25;\r\n\r\n        // Category diversity (explore new categories)\r\n        if (product1.category !== product2.category) score += 20;\r\n\r\n        // Price exploration (similar or slightly higher price points)\r\n        const priceRatio = product2.price / product1.price;\r\n        if (priceRatio >= 0.8 && priceRatio <= 1.5) score += 20;\r\n\r\n        // Trending products (simulate with random factor)\r\n        score += Math.random() * 20;\r\n\r\n        return score;\r\n      },\r\n      getRecommendations: (currentProduct: Product, allProducts: Product[], maxItems: number) => {\r\n        return allProducts\r\n          .filter(p => p.id !== currentProduct.id)\r\n          .map(product => ({\r\n            product,\r\n            score: algorithms['you-may-like'].calculateSimilarity(currentProduct, product)\r\n          }))\r\n          .sort((a, b) => b.score - a.score)\r\n          .slice(0, maxItems)\r\n          .map(item => item.product);\r\n      }\r\n    },\r\n\r\n    'recently-viewed': {\r\n      calculateSimilarity: () => 0, // Not used for recently viewed\r\n      getRecommendations: (currentProduct: Product, allProducts: Product[], maxItems: number) => {\r\n        // Get recently viewed products from localStorage\r\n        const recentlyViewed = JSON.parse(localStorage.getItem('recentlyViewed') || '[]') as string[];\r\n        return allProducts\r\n          .filter(p => recentlyViewed.includes(p.id) && p.id !== currentProduct?.id)\r\n          .slice(0, maxItems);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Generate recommendations\r\n  useEffect(() => {\r\n    if (type === 'recently-viewed') {\r\n      // For recently viewed, we don't need a current product\r\n      const recentlyViewed = JSON.parse(localStorage.getItem('recentlyViewed') || '[]') as string[];\r\n      const recentProducts = products.filter(p => recentlyViewed.includes(p.id)).slice(0, maxItems);\r\n      setRecommendedProducts(recentProducts);\r\n      setIsLoading(false);\r\n    } else if (currentProduct && products.length > 0) {\r\n      setIsLoading(true);\r\n      // Simulate API delay for realistic UX\r\n      setTimeout(() => {\r\n        const recommendations = algorithms[type].getRecommendations(currentProduct, products, maxItems);\r\n        setRecommendedProducts(recommendations);\r\n        setIsLoading(false);\r\n      }, 300);\r\n    }\r\n  }, [currentProduct, products, type, maxItems]);\r\n\r\n  const handleAddToCart = (product: Product, e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    addToCart(product);\r\n    showNotification({\r\n      type: 'success',\r\n      title: 'Added to Cart',\r\n      message: `${product.name} has been added to your cart.`\r\n    });\r\n  };\r\n\r\n  const handleWishlistToggle = (product: Product, e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    addToWishlist(product);\r\n  };\r\n\r\n  const getRecommendationIcon = () => {\r\n    switch (type) {\r\n      case 'related': return <Package className=\"h-4 w-4\" />;\r\n      case 'frequently-bought': return <Users className=\"h-4 w-4\" />;\r\n      case 'you-may-like': return <TrendingUp className=\"h-4 w-4\" />;\r\n      case 'recently-viewed': return <Eye className=\"h-4 w-4\" />;\r\n      default: return <Package className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  const getDefaultTitle = () => {\r\n    switch (type) {\r\n      case 'related': return 'Related Products';\r\n      case 'frequently-bought': return 'Frequently Bought Together';\r\n      case 'you-may-like': return 'You May Also Like';\r\n      case 'recently-viewed': return 'Recently Viewed';\r\n      default: return 'Recommended Products';\r\n    }\r\n  };\r\n\r\n  const getDefaultSubtitle = () => {\r\n    switch (type) {\r\n      case 'related': return 'Similar products you might be interested in';\r\n      case 'frequently-bought': return 'Customers who bought this item also bought';\r\n      case 'you-may-like': return 'Personalized recommendations just for you';\r\n      case 'recently-viewed': return 'Continue where you left off';\r\n      default: return 'Discover more great products';\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className={`${className}`}>\r\n        <div className=\"flex items-center space-x-2 mb-3 sm:mb-4\">\r\n          <div className=\"text-neutral-600\">{getRecommendationIcon()}</div>\r\n          <div>\r\n            <div className=\"h-4 sm:h-5 bg-neutral-200 rounded w-32 sm:w-40 animate-pulse\"></div>\r\n            <div className=\"h-2.5 sm:h-3 bg-neutral-100 rounded w-36 sm:w-48 mt-1 animate-pulse\"></div>\r\n          </div>\r\n        </div>\r\n        <div className={`grid gap-3 sm:gap-4 ${layout === 'grid' ? 'grid-cols-2' : 'grid-cols-1 sm:grid-cols-2'}`}>\r\n          {Array.from({ length: maxItems }).map((_, index) => (\r\n            <div key={index} className=\"bg-white rounded-lg border border-neutral-200 p-2.5 sm:p-3 animate-pulse\">\r\n              <div className=\"aspect-square bg-neutral-200 rounded-md mb-2.5 sm:mb-3\"></div>\r\n              <div className=\"h-2.5 sm:h-3 bg-neutral-200 rounded mb-1.5\"></div>\r\n              <div className=\"h-2.5 sm:h-3 bg-neutral-100 rounded w-3/4\"></div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (recommendedProducts.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <section className={`${className}`}>\r\n      {/* Section Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 mb-3 sm:mb-4\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"text-neutral-600\">{getRecommendationIcon()}</div>\r\n          <div>\r\n            <h3 className=\"text-base sm:text-lg font-semibold text-neutral-900\">\r\n              {title || getDefaultTitle()}\r\n            </h3>\r\n            <p className=\"text-[10px] sm:text-xs text-neutral-600 mt-0.5\">\r\n              {subtitle || getDefaultSubtitle()}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {recommendedProducts.length > maxItems && (\r\n          <Link\r\n            to=\"/products\"\r\n            className=\"flex items-center space-x-1.5 text-primary-600 hover:text-primary-700 transition-colors text-xs sm:text-sm touch-manipulation\"\r\n          >\r\n            <span className=\"font-medium\">View All</span>\r\n            <ArrowRight className=\"h-3 w-3\" />\r\n          </Link>\r\n        )}\r\n      </div>\r\n\r\n      {/* Products Display */}\r\n      {isMobile ? (\r\n        <MobileCompactCarousel\r\n          products={recommendedProducts}\r\n          title={title || getDefaultTitle()}\r\n        />\r\n      ) : (\r\n        <div className={`grid gap-3 sm:gap-4 ${layout === 'grid' ? 'grid-cols-2' : 'grid-cols-1 sm:grid-cols-2'}`}>\r\n          {recommendedProducts.map((product, index) => (\r\n            <motion.div\r\n              key={product.id}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: index * 0.1 }}\r\n              className=\"touch-manipulation\"\r\n            >\r\n              <Link to={`/products/${product.id}`} className=\"group block\">\r\n                <div className=\"bg-white rounded-lg border border-neutral-200 hover:border-neutral-300 transition-all duration-200 hover:shadow-md overflow-hidden\">\r\n                  {/* Product Image */}\r\n                  <div className=\"aspect-square relative overflow-hidden\">\r\n                    <img\r\n                      src={\r\n                        (product.images && product.images.length > 0 && product.images[0]) ||\r\n                        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4='\r\n                      }\r\n                      alt={product.name}\r\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                    />\r\n\r\n                    {/* Wishlist Button */}\r\n                    <button\r\n                      onClick={(e) => handleWishlistToggle(product, e)}\r\n                      className={`absolute top-1.5 sm:top-2 right-1.5 sm:right-2 p-1 rounded-full transition-all ${isInWishlist(product.id)\r\n                          ? 'bg-red-100 text-red-600'\r\n                          : 'bg-white/80 text-neutral-600 hover:bg-white'\r\n                        } touch-manipulation`}\r\n                    >\r\n                      <Heart className={`h-3 w-3 sm:h-3.5 sm:w-3.5 ${isInWishlist(product.id) ? 'fill-current' : ''}`} />\r\n                    </button>\r\n\r\n                    {/* Quick Add to Cart */}\r\n                    {showAddToCart && product.stock > 0 && (\r\n                      <button\r\n                        onClick={(e) => handleAddToCart(product, e)}\r\n                        className=\"absolute bottom-1.5 sm:bottom-2 left-1.5 sm:left-2 right-1.5 sm:right-2 bg-neutral-900 text-white py-1 px-2 sm:py-1.5 sm:px-3 rounded-md opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center justify-center space-x-1 hover:bg-neutral-800 active:bg-neutral-700 touch-manipulation\"\r\n                      >\r\n                        <ShoppingCart className=\"h-3 w-3 sm:h-3.5 sm:w-3.5\" />\r\n                        <span className=\"text-[10px] sm:text-xs font-medium\">Add to Cart</span>\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Product Info */}\r\n                  <div className=\"p-2.5 sm:p-3\">\r\n                    <h4 className=\"font-medium text-neutral-900 mb-1 line-clamp-2 group-hover:text-primary-600 transition-colors text-xs sm:text-sm\">\r\n                      {product.name}\r\n                    </h4>\r\n\r\n                    {/* Rating */}\r\n                    <div className=\"flex items-center space-x-1 mb-1\">\r\n                      <div className=\"flex items-center\">\r\n                        {Array.from({ length: 5 }).map((_, i) => (\r\n                          <Star\r\n                            key={i}\r\n                            className={`h-2.5 w-2.5 sm:h-3 sm:w-3 ${i < Math.floor(product.rating)\r\n                                ? 'text-yellow-400 fill-current'\r\n                                : 'text-neutral-300'\r\n                              }`}\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                      <span className=\"text-[10px] text-neutral-500\">({product.rating})</span>\r\n                    </div>\r\n\r\n                    {/* Price */}\r\n                    <div className=\"flex items-center space-x-1.5\">\r\n                      <span className=\"text-sm sm:text-base font-semibold text-neutral-900\">\r\n                        ${product.price}\r\n                      </span>\r\n                      {product.originalPrice && (\r\n                        <span className=\"text-[10px] sm:text-xs text-neutral-500 line-through\">\r\n                          ${product.originalPrice}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Stock Status */}\r\n                    {product.stock <= 5 && product.stock > 0 && (\r\n                      <p className=\"text-[10px] text-orange-600 mt-1\">\r\n                        Only {product.stock} left in stock\r\n                      </p>\r\n                    )}\r\n                    {product.stock === 0 && (\r\n                      <p className=\"text-[10px] text-red-600 mt-1\">Out of stock</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { Star, Heart, ShoppingCart, GitCompare } from 'lucide-react';\r\nimport { Product } from '../../types';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { useWishlist } from '../../contexts/WishlistContext';\r\nimport { useCompare } from '../../contexts/CompareContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport { Link } from 'react-router-dom';\r\nimport { dataPreloader } from '../../utils/preloader';\r\nimport { MiniTrustIndicators } from '../Trust';\r\n\r\ninterface ProductListCardProps {\r\n  product: Product;\r\n}\r\n\r\nexport const ProductListCard: React.FC<ProductListCardProps> = ({ product }) => {\r\n  const { addItem: addToCart } = useCart();\r\n  const { addItem: addToWishlist, isInWishlist } = useWishlist();\r\n  const { addItem: addToCompare, isInCompare } = useCompare();\r\n  const { showSuccess } = useNotification();\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n  const handleAddToCart = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (product.stock > 0) {\r\n      addToCart(product);\r\n      showSuccess(`${product.name} has been added to your cart.`, 'Added to Cart');\r\n    }\r\n  };\r\n\r\n  const handleWishlistToggle = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    addToWishlist(product);\r\n  };\r\n  \r\n  const handleCompareToggle = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    addToCompare(product);\r\n  };\r\n\r\n  const discount = product.originalPrice\r\n    ? Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)\r\n    : 0;\r\n\r\n  const getStockStatus = () => {\r\n    if (product.stock === 0) return { text: 'Out of Stock', color: 'bg-red-500', textColor: 'text-red-600' };\r\n    if (product.stock <= 5) return { text: 'Low Stock', color: 'bg-orange-500', textColor: 'text-orange-600' };\r\n    return { text: 'In Stock', color: 'bg-green-500', textColor: 'text-green-600' };\r\n  };\r\n\r\n  const stockStatus = getStockStatus();\r\n\r\n  return (\r\n    <div\r\n      className=\"product-list-card group flex flex-col sm:flex-row bg-white rounded-lg sm:rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200 border border-gray-100 touch-manipulation\"\r\n      onMouseEnter={() => {\r\n        // Preload product details on hover\r\n        dataPreloader.preloadProduct(product.id, { priority: 'high' });\r\n      }}\r\n    >\r\n      {/* Product Image Section */}\r\n      <div className=\"relative overflow-hidden group/image bg-gray-50 sm:w-48 flex-shrink-0\">\r\n        <Link to={`/products/${product.id}`} className=\"block h-full\">\r\n          <div className=\"aspect-[4/3] sm:aspect-square h-full relative overflow-hidden\">\r\n            <img\r\n              key={currentImageIndex}\r\n              src={(product.images && product.images.length > 0 ? product.images[currentImageIndex] || product.images[0] : '') || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4='}\r\n              alt={product.name}\r\n              className=\"w-full h-full object-cover\"\r\n              loading=\"lazy\"\r\n              crossOrigin=\"anonymous\"\r\n              onError={(e) => {\r\n                const target = e.target as HTMLImageElement;\r\n                target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4=';\r\n              }}\r\n            />\r\n\r\n            {/* Image Navigation - Amazon Style */}\r\n            {product.images && product.images.length > 1 && (\r\n              <div className=\"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\r\n                {product.images.map((_, index) => (\r\n                  <button\r\n                    key={index}\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      e.stopPropagation();\r\n                      setCurrentImageIndex(index);\r\n                    }}\r\n                    className={`w-1.5 h-1.5 rounded-full transition-colors duration-150 ${\r\n                      index === currentImageIndex\r\n                        ? 'bg-white shadow-md'\r\n                        : 'bg-white/70 hover:bg-white/90'\r\n                    }`}\r\n                    aria-label={`View image ${index + 1}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* Subtle Overlay */}\r\n            <div className=\"absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200\" />\r\n          </div>\r\n        </Link>\r\n\r\n        {/* Amazon-Style Status Badges */}\r\n        <div className=\"absolute top-2 left-2 flex flex-col space-y-1 z-10\">\r\n          {discount > 0 && (\r\n            <span className=\"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded font-medium shadow-sm\">\r\n              -{discount}% OFF\r\n            </span>\r\n          )}\r\n\r\n          {product.stock <= 0 && (\r\n            <span className=\"bg-gray-500 text-white text-[10px] px-1.5 py-0.5 rounded font-medium shadow-sm\">\r\n              Out of Stock\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Product Information Section */}\r\n      <div className=\"flex-1 p-4 sm:p-5 flex flex-col\">\r\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3\">\r\n          <div className=\"space-y-2 flex-1\">\r\n            <span className=\"text-xs text-gray-600 uppercase tracking-wide font-medium\">\r\n              {product.category}\r\n            </span>\r\n            <Link to={`/products/${product.id}`}>\r\n              <h3 className=\"text-lg font-medium text-gray-900 group-hover:text-blue-600 transition-colors duration-200\">\r\n                {product.name}\r\n              </h3>\r\n            </Link>\r\n            \r\n            {/* Rating */}\r\n            <div className=\"flex items-center space-x-1\">\r\n              <div className=\"flex items-center space-x-0.5\">\r\n                {[...Array(5)].map((_, i) => (\r\n                  <Star\r\n                    key={i}\r\n                    className={`h-4 w-4 ${\r\n                      i < Math.floor(product.rating)\r\n                        ? 'text-yellow-400 fill-current'\r\n                        : 'text-gray-300'\r\n                    }`}\r\n                  />\r\n                ))}\r\n              </div>\r\n              <span className=\"text-sm text-gray-600\">({product.rating})</span>\r\n            </div>\r\n\r\n            {/* Price */}\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-xl font-bold text-gray-900\">\r\n                ₹{product.price.toLocaleString('en-IN')}\r\n              </span>\r\n              {product.originalPrice && (\r\n                <span className=\"text-sm text-gray-500 line-through\">\r\n                  ₹{product.originalPrice.toLocaleString('en-IN')}\r\n                </span>\r\n              )}\r\n              {discount > 0 && (\r\n                <span className=\"bg-red-100 text-red-700 text-xs font-semibold px-1.5 py-0.5 rounded\">\r\n                  {discount}% OFF\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Stock Status */}\r\n            <div className=\"flex items-center\">\r\n              <span className={`text-sm font-medium ${\r\n                product.stock > 0 ? 'text-green-600' : 'text-red-500'\r\n              }`}>\r\n                {product.stock > 0 ? (product.stock > 10 ? 'In Stock' : `Only ${product.stock} left`) : 'Out of stock'}\r\n              </span>\r\n            </div>\r\n\r\n            {/* Trust Indicators */}\r\n            <div className=\"pt-2 border-t border-gray-100\">\r\n              <MiniTrustIndicators\r\n                freeShipping={product.price >= 2000}\r\n                warranty={true}\r\n                returns={true}\r\n                className=\"justify-start\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col space-y-3 sm:space-y-4 sm:items-end\">\r\n            <div className=\"flex space-x-2\">\r\n              <button\r\n                onClick={handleWishlistToggle}\r\n                className={`p-2 rounded-full shadow-sm border transition-colors duration-200 ${\r\n                  isInWishlist(product.id)\r\n                    ? 'bg-red-50 text-red-600 border-red-200'\r\n                    : 'bg-white text-gray-600 hover:text-red-500 border-gray-200 hover:border-red-200'\r\n                } touch-manipulation`}\r\n              >\r\n                <Heart className={`h-4 w-4 ${isInWishlist(product.id) ? 'fill-current' : ''}`} />\r\n              </button>\r\n              <button\r\n                onClick={handleCompareToggle}\r\n                className={`p-2 rounded-full shadow-sm border transition-colors duration-200 ${\r\n                  isInCompare(product.id)\r\n                    ? 'bg-blue-50 text-blue-600 border-blue-200'\r\n                    : 'bg-white text-gray-600 hover:text-blue-500 border-gray-200 hover:border-blue-200'\r\n                } touch-manipulation`}\r\n              >\r\n                <GitCompare className=\"h-4 w-4\" />\r\n              </button>\r\n            </div>\r\n            \r\n            <button\r\n              onClick={handleAddToCart}\r\n              disabled={product.stock === 0}\r\n              className={`flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${\r\n                product.stock === 0\r\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                  : 'bg-orange-500 text-white hover:bg-orange-600 shadow-sm active:bg-orange-700'\r\n              } touch-manipulation min-w-[140px]`}\r\n            >\r\n              <ShoppingCart className=\"h-4 w-4\" />\r\n              <span className=\"text-sm font-medium\">\r\n                {product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { \r\n  Filter, \r\n  X, \r\n  ChevronDown, \r\n  ChevronUp, \r\n  DollarSign,\r\n  Package,\r\n  MapPin,\r\n  Clock,\r\n  Sparkles,\r\n  Flower2,\r\n  Crown,\r\n  Droplets\r\n} from 'lucide-react';\r\nimport { Category } from '../../types';\r\n\r\nexport interface AttrFilterState {\r\n  category: string;\r\n  priceRange: [number, number];\r\n  brands: string[];\r\n  longevity: string[];\r\n  sillage: string[];\r\n  concentration: string[];\r\n  origins: string[];\r\n  fragranceFamily: string[];\r\n  sortBy: string;\r\n  search: string;\r\n  // Keep for compatibility but not used in UI\r\n  rating: number;\r\n  inStock: boolean;\r\n}\r\n\r\ninterface AttrFiltersProps {\r\n  filters: AttrFilterState;\r\n  onFiltersChange: (filters: AttrFilterState) => void;\r\n  categories: Category[];\r\n  availableBrands: string[]; // Keep for compatibility but not used\r\n  isOpen: boolean;\r\n  onToggle: () => void;\r\n  productCount: number;\r\n  className?: string;\r\n}\r\n\r\n// Attar-specific filter options\r\nconst longevityOptions = [\r\n  { value: 'light', label: 'Light (2-4 hours)', icon: '🌸' },\r\n  { value: 'moderate', label: 'Moderate (4-8 hours)', icon: '🌺' },\r\n  { value: 'long', label: 'Long-lasting (8-12 hours)', icon: '🌹' },\r\n  { value: 'very-long', label: 'Very Long (12+ hours)', icon: '👑' }\r\n];\r\n\r\nconst sillageOptions = [\r\n  { value: 'intimate', label: 'Intimate (Close to skin)', icon: '🤏' },\r\n  { value: 'moderate', label: 'Moderate (Arm\\'s length)', icon: '🫴' },\r\n  { value: 'strong', label: 'Strong (Room filling)', icon: '💨' },\r\n  { value: 'very-strong', label: 'Very Strong (Projection)', icon: '✨' }\r\n];\r\n\r\nconst concentrationOptions = [\r\n  { value: 'pure-oil', label: 'Pure Oil', premium: true },\r\n  { value: 'concentrated', label: 'Concentrated', premium: true },\r\n  { value: 'diluted', label: 'Diluted' },\r\n  { value: 'blend', label: 'Blend' }\r\n];\r\n\r\nconst originOptions = [\r\n  { value: 'kannauj', label: 'Kannauj, India', flag: '🇮🇳' },\r\n  { value: 'mysore', label: 'Mysore, Karnataka', flag: '🇮🇳' },\r\n  { value: 'kashmir', label: 'Kashmir, India', flag: '🇮🇳' },\r\n  { value: 'assam', label: 'Assam, India', flag: '🇮🇳' },\r\n  { value: 'bulgarian', label: 'Bulgaria (Rose Oil)', flag: '🇧🇬' },\r\n  { value: 'cambodian', label: 'Cambodia (Oudh)', flag: '🇰🇭' },\r\n  { value: 'arabian', label: 'Arabian Peninsula', flag: '🇸🇦' }\r\n];\r\n\r\nconst fragranceFamilyOptions = [\r\n  { value: 'floral', label: 'Floral', icon: '🌸' },\r\n  { value: 'woody', label: 'Woody', icon: '🌳' },\r\n  { value: 'oriental', label: 'Oriental', icon: '🏺' },\r\n  { value: 'spicy', label: 'Spicy', icon: '🌶️' },\r\n  { value: 'fresh', label: 'Fresh', icon: '💧' },\r\n  { value: 'musky', label: 'Musky', icon: '🦌' },\r\n  { value: 'citrus', label: 'Citrus', icon: '🍊' },\r\n  { value: 'herbal', label: 'Herbal', icon: '🌿' }\r\n];\r\n\r\nexport const AttrFilters: React.FC<AttrFiltersProps> = ({\r\n  filters,\r\n  onFiltersChange,\r\n  categories,\r\n  isOpen,\r\n  onToggle,\r\n  productCount,\r\n  className = ''\r\n}) => {\r\n  const [expandedSections, setExpandedSections] = useState({\r\n    category: true,\r\n    price: true,\r\n    longevity: true,\r\n    sillage: true,\r\n    concentration: true,\r\n    origins: false,\r\n    fragranceFamily: false\r\n  });\r\n\r\n  const updateFilter = (key: keyof AttrFilterState, value: any) => {\r\n    onFiltersChange({ ...filters, [key]: value });\r\n  };\r\n\r\n  const toggleSection = (section: keyof typeof expandedSections) => {\r\n    setExpandedSections(prev => ({\r\n      ...prev,\r\n      [section]: !prev[section]\r\n    }));\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    onFiltersChange({\r\n      category: '',\r\n      priceRange: [0, 25000],\r\n      rating: 0,\r\n      inStock: false,\r\n      brands: [],\r\n      longevity: [],\r\n      sillage: [],\r\n      concentration: [],\r\n      origins: [],\r\n      fragranceFamily: [],\r\n      sortBy: 'featured',\r\n      search: ''\r\n    });\r\n  };\r\n\r\n  const activeFilterCount = [\r\n    filters.category && filters.category !== '' ? 1 : 0,\r\n    filters.priceRange[0] > 0 || filters.priceRange[1] < 25000 ? 1 : 0,\r\n    filters.longevity.length,\r\n    filters.sillage.length,\r\n    filters.concentration.length,\r\n    filters.origins.length,\r\n    filters.fragranceFamily.length\r\n  ].reduce((sum, count) => sum + count, 0);\r\n\r\n  const FilterSection: React.FC<{\r\n    title: string;\r\n    icon: React.ReactNode;\r\n    sectionKey: keyof typeof expandedSections;\r\n    children: React.ReactNode;\r\n    premium?: boolean;\r\n  }> = ({ title, icon, sectionKey, children, premium = false }) => (\r\n    <div className=\"border-b border-neutral-100 last:border-b-0\">\r\n      <button\r\n        onClick={() => toggleSection(sectionKey)}\r\n        className=\"w-full flex items-center justify-between py-4 text-left hover:bg-neutral-25 rounded-lg transition-colors px-2\"\r\n      >\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className={`${premium ? 'text-amber-500' : 'text-neutral-600'}`}>{icon}</div>\r\n          <span className={`font-medium text-sm ${premium ? 'text-amber-900' : 'text-neutral-900'}`}>\r\n            {title}\r\n            {premium && <Crown className=\"inline h-3 w-3 ml-1 text-amber-500\" />}\r\n          </span>\r\n        </div>\r\n        {expandedSections[sectionKey] ? (\r\n          <ChevronUp className=\"h-4 w-4 text-neutral-500\" />\r\n        ) : (\r\n          <ChevronDown className=\"h-4 w-4 text-neutral-500\" />\r\n        )}\r\n      </button>\r\n      \r\n      <AnimatePresence>\r\n        {expandedSections[sectionKey] && (\r\n          <motion.div\r\n            initial={{ height: 0, opacity: 0 }}\r\n            animate={{ height: 'auto', opacity: 1 }}\r\n            exit={{ height: 0, opacity: 0 }}\r\n            transition={{ duration: 0.2, ease: \"easeOut\" }}\r\n            className=\"overflow-hidden\"\r\n          >\r\n            <div className=\"pb-4 px-2\">\r\n              {children}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n\r\n  const QuickFilterButton: React.FC<{\r\n    label: string;\r\n    isActive: boolean;\r\n    onClick: () => void;\r\n    icon?: React.ReactNode;\r\n    premium?: boolean;\r\n  }> = ({ label, isActive, onClick, icon, premium = false }) => (\r\n    <button\r\n      onClick={onClick}\r\n      className={`flex items-center space-x-2 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 ${\r\n        isActive\r\n          ? premium\r\n            ? 'bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 border border-amber-300 shadow-sm'\r\n            : 'bg-gradient-to-r from-neutral-100 to-neutral-200 text-neutral-700 border border-neutral-300 shadow-sm'\r\n          : 'bg-white text-neutral-600 border border-neutral-200 hover:bg-neutral-50 hover:border-neutral-300'\r\n      }`}\r\n    >\r\n      {icon && <span className=\"text-xs\">{icon}</span>}\r\n      <span>{label}</span>\r\n    </button>\r\n  );\r\n\r\n  return (\r\n    <div className={`bg-white rounded-xl shadow-luxury border border-neutral-200 flex flex-col h-full ${className}`}>\r\n      {/* Luxury Filter Header */}\r\n      <div className=\"flex items-center justify-between p-6 border-b border-neutral-100 flex-shrink-0\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"flex items-center justify-center w-8 h-8 bg-gradient-to-br from-neutral-100 to-neutral-200 rounded-lg\">\r\n            <Filter className=\"h-4 w-4 text-neutral-700\" />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-semibold text-neutral-900 text-base\">Attar Filters</h3>\r\n            <p className=\"text-xs text-neutral-500\">Discover your perfect fragrance</p>\r\n          </div>\r\n          {activeFilterCount > 0 && (\r\n            <span className=\"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 px-3 py-1 rounded-full text-xs font-medium border border-amber-200\">\r\n              {activeFilterCount} active\r\n            </span>\r\n          )}\r\n        </div>\r\n        <div className=\"flex items-center space-x-3\">\r\n          {activeFilterCount > 0 && (\r\n            <button\r\n              onClick={clearAllFilters}\r\n              className=\"text-xs text-neutral-600 hover:text-neutral-900 transition-colors font-medium\"\r\n            >\r\n              Clear all\r\n            </button>\r\n          )}\r\n          <button\r\n            onClick={onToggle}\r\n            className=\"lg:hidden p-2 hover:bg-neutral-100 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Elegant Results Count */}\r\n      <div className=\"px-6 py-4 bg-gradient-to-r from-neutral-25 to-white border-b border-neutral-100 flex-shrink-0\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <p className=\"text-sm text-neutral-600\">\r\n            <span className=\"font-semibold text-neutral-900\">{productCount}</span> exquisite attars found\r\n          </p>\r\n          <Sparkles className=\"h-4 w-4 text-amber-500\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Filters Section */}\r\n      <div className=\"p-6 border-b border-neutral-100 flex-shrink-0\">\r\n        <h4 className=\"text-sm font-medium text-neutral-900 mb-3 flex items-center\">\r\n          <Droplets className=\"h-4 w-4 mr-2 text-neutral-600\" />\r\n          Quick Filters\r\n        </h4>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <QuickFilterButton\r\n            label=\"Pure Oil\"\r\n            isActive={filters.concentration.includes('pure-oil')}\r\n            onClick={() => {\r\n              const newConcentration = filters.concentration.includes('pure-oil')\r\n                ? filters.concentration.filter(c => c !== 'pure-oil')\r\n                : [...filters.concentration, 'pure-oil'];\r\n              updateFilter('concentration', newConcentration);\r\n            }}\r\n            icon=\"💎\"\r\n            premium\r\n          />\r\n          <QuickFilterButton\r\n            label=\"Long-lasting\"\r\n            isActive={filters.longevity.includes('very-long')}\r\n            onClick={() => {\r\n              const newLongevity = filters.longevity.includes('very-long')\r\n                ? filters.longevity.filter(l => l !== 'very-long')\r\n                : [...filters.longevity, 'very-long'];\r\n              updateFilter('longevity', newLongevity);\r\n            }}\r\n            icon=\"⏰\"\r\n          />\r\n          <QuickFilterButton\r\n            label=\"Strong Sillage\"\r\n            isActive={filters.sillage.includes('very-strong')}\r\n            onClick={() => {\r\n              const newSillage = filters.sillage.includes('very-strong')\r\n                ? filters.sillage.filter(s => s !== 'very-strong')\r\n                : [...filters.sillage, 'very-strong'];\r\n              updateFilter('sillage', newSillage);\r\n            }}\r\n            icon=\"💨\"\r\n          />\r\n          <QuickFilterButton\r\n            label=\"Premium\"\r\n            isActive={filters.priceRange[0] >= 10000}\r\n            onClick={() => {\r\n              updateFilter('priceRange', filters.priceRange[0] >= 10000 ? [0, 25000] : [10000, 25000]);\r\n            }}\r\n            icon=\"👑\"\r\n            premium\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter Sections - Improved Scroll Container */}\r\n      <div className=\"flex-1 overflow-y-auto px-6 py-4\">\r\n        <div className=\"space-y-0\">\r\n          {/* Category Filter */}\r\n          <FilterSection\r\n            title=\"Attar Categories\"\r\n            icon={<Package className=\"h-5 w-5\" />}\r\n            sectionKey=\"category\"\r\n          >\r\n            <div className=\"space-y-3 max-h-40 overflow-y-auto pr-2\">\r\n              <label className=\"flex items-center space-x-3 cursor-pointer group\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"category\"\r\n                  checked={!filters.category || filters.category === ''}\r\n                  onChange={() => updateFilter('category', '')}\r\n                  className=\"form-radio text-neutral-600 focus:ring-neutral-500 h-4 w-4\"\r\n                />\r\n                <span className=\"text-neutral-700 group-hover:text-neutral-900 transition-colors text-sm font-medium\">\r\n                  All Categories\r\n                </span>\r\n              </label>\r\n              {categories.map((category) => (\r\n                <label key={category.id} className=\"flex items-center space-x-3 cursor-pointer group\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"category\"\r\n                    checked={filters.category === category.name}\r\n                    onChange={() => updateFilter('category', category.name)}\r\n                    className=\"form-radio text-neutral-600 focus:ring-neutral-500 h-4 w-4\"\r\n                  />\r\n                  <span className=\"text-neutral-700 group-hover:text-neutral-900 transition-colors text-sm\">\r\n                    {category.name}\r\n                  </span>\r\n                  <span className=\"text-xs text-neutral-400 ml-auto bg-neutral-100 px-2 py-1 rounded-full\">\r\n                    {category.productCount}\r\n                  </span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </FilterSection>\r\n\r\n          {/* Price Range Filter */}\r\n          <FilterSection\r\n            title=\"Price Range (₹)\"\r\n            icon={<DollarSign className=\"h-5 w-5\" />}\r\n            sectionKey=\"price\"\r\n          >\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"flex-1\">\r\n                  <label className=\"block text-xs text-neutral-600 mb-2 font-medium\">Minimum</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={filters.priceRange[0]}\r\n                    onChange={(e) => updateFilter('priceRange', [parseInt(e.target.value) || 0, filters.priceRange[1]])}\r\n                    className=\"w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-neutral-200 focus:border-neutral-400 transition-all\"\r\n                    placeholder=\"1000\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <label className=\"block text-xs text-neutral-600 mb-2 font-medium\">Maximum</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={filters.priceRange[1]}\r\n                    onChange={(e) => updateFilter('priceRange', [filters.priceRange[0], parseInt(e.target.value) || 25000])}\r\n                    className=\"w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-neutral-200 focus:border-neutral-400 transition-all\"\r\n                    placeholder=\"25000\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center justify-between text-xs text-neutral-500\">\r\n                <span>₹{filters.priceRange[0].toLocaleString('en-IN')}</span>\r\n                <span>₹{filters.priceRange[1].toLocaleString('en-IN')}</span>\r\n              </div>\r\n              {/* Luxury Price Range Buttons */}\r\n              <div className=\"grid grid-cols-2 gap-3 mt-4\">\r\n                {[\r\n                  { range: [1000, 5000], label: '₹1K - ₹5K', desc: 'Premium' },\r\n                  { range: [5000, 10000], label: '₹5K - ₹10K', desc: 'Luxury' },\r\n                  { range: [10000, 15000], label: '₹10K - ₹15K', desc: 'Elite' },\r\n                  { range: [15000, 25000], label: '₹15K+', desc: 'Royal' }\r\n                ].map(({ range, label, desc }) => (\r\n                  <button\r\n                    key={label}\r\n                    onClick={() => updateFilter('priceRange', range)}\r\n                    className=\"px-3 py-3 text-xs border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-all text-left\"\r\n                  >\r\n                    <div className=\"font-medium text-neutral-700\">{label}</div>\r\n                    <div className=\"text-neutral-500 text-xs\">{desc}</div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </FilterSection>\r\n\r\n          {/* Longevity Filter */}\r\n          <FilterSection\r\n            title=\"Longevity\"\r\n            icon={<Clock className=\"h-5 w-5\" />}\r\n            sectionKey=\"longevity\"\r\n            premium\r\n          >\r\n            <div className=\"space-y-3 max-h-40 overflow-y-auto pr-2\">\r\n              {longevityOptions.map((option) => (\r\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer group\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={filters.longevity.includes(option.value)}\r\n                    onChange={(e) => {\r\n                      if (e.target.checked) {\r\n                        updateFilter('longevity', [...filters.longevity, option.value]);\r\n                      } else {\r\n                        updateFilter('longevity', filters.longevity.filter(l => l !== option.value));\r\n                      }\r\n                    }}\r\n                    className=\"form-checkbox h-4 w-4 text-amber-600 rounded focus:ring-amber-500\"\r\n                  />\r\n                  <span className=\"text-lg\">{option.icon}</span>\r\n                  <span className=\"text-neutral-700 group-hover:text-neutral-900 transition-colors text-sm\">\r\n                    {option.label}\r\n                  </span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </FilterSection>\r\n\r\n          {/* Sillage Filter */}\r\n          <FilterSection\r\n            title=\"Sillage (Projection)\"\r\n            icon={<Sparkles className=\"h-5 w-5\" />}\r\n            sectionKey=\"sillage\"\r\n            premium\r\n          >\r\n            <div className=\"space-y-3 max-h-40 overflow-y-auto pr-2\">\r\n              {sillageOptions.map((option) => (\r\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer group\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={filters.sillage.includes(option.value)}\r\n                    onChange={(e) => {\r\n                      if (e.target.checked) {\r\n                        updateFilter('sillage', [...filters.sillage, option.value]);\r\n                      } else {\r\n                        updateFilter('sillage', filters.sillage.filter(s => s !== option.value));\r\n                      }\r\n                    }}\r\n                    className=\"form-checkbox h-4 w-4 text-amber-600 rounded focus:ring-amber-500\"\r\n                  />\r\n                  <span className=\"text-lg\">{option.icon}</span>\r\n                  <span className=\"text-neutral-700 group-hover:text-neutral-900 transition-colors text-sm\">\r\n                    {option.label}\r\n                  </span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </FilterSection>\r\n\r\n          {/* Concentration Filter */}\r\n          <FilterSection\r\n            title=\"Concentration\"\r\n            icon={<Droplets className=\"h-5 w-5\" />}\r\n            sectionKey=\"concentration\"\r\n            premium\r\n          >\r\n            <div className=\"space-y-3 max-h-40 overflow-y-auto pr-2\">\r\n              {concentrationOptions.map((option) => (\r\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer group\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={filters.concentration.includes(option.value)}\r\n                    onChange={(e) => {\r\n                      if (e.target.checked) {\r\n                        updateFilter('concentration', [...filters.concentration, option.value]);\r\n                      } else {\r\n                        updateFilter('concentration', filters.concentration.filter(c => c !== option.value));\r\n                      }\r\n                    }}\r\n                    className={`form-checkbox h-4 w-4 rounded focus:ring-amber-500 ${\r\n                      option.premium ? 'text-amber-600' : 'text-neutral-600'\r\n                    }`}\r\n                  />\r\n                  <span className={`text-neutral-700 group-hover:text-neutral-900 transition-colors text-sm ${\r\n                    option.premium ? 'font-medium' : ''\r\n                  }`}>\r\n                    {option.label}\r\n                    {option.premium && <Crown className=\"inline h-3 w-3 ml-1 text-amber-500\" />}\r\n                  </span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </FilterSection>\r\n\r\n          {/* Origins Filter */}\r\n          <FilterSection\r\n            title=\"Origin\"\r\n            icon={<MapPin className=\"h-5 w-5\" />}\r\n            sectionKey=\"origins\"\r\n          >\r\n            <div className=\"space-y-3 max-h-40 overflow-y-auto pr-2\">\r\n              {originOptions.map((option) => (\r\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer group\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={filters.origins.includes(option.value)}\r\n                    onChange={(e) => {\r\n                      if (e.target.checked) {\r\n                        updateFilter('origins', [...filters.origins, option.value]);\r\n                      } else {\r\n                        updateFilter('origins', filters.origins.filter(o => o !== option.value));\r\n                      }\r\n                    }}\r\n                    className=\"form-checkbox h-4 w-4 text-neutral-600 rounded focus:ring-neutral-500\"\r\n                  />\r\n                  <span className=\"text-lg\">{option.flag}</span>\r\n                  <span className=\"text-neutral-700 group-hover:text-neutral-900 transition-colors text-sm\">\r\n                    {option.label}\r\n                  </span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </FilterSection>\r\n\r\n          {/* Fragrance Family Filter */}\r\n          <FilterSection\r\n            title=\"Fragrance Family\"\r\n            icon={<Flower2 className=\"h-5 w-5\" />}\r\n            sectionKey=\"fragranceFamily\"\r\n          >\r\n            <div className=\"flex flex-wrap gap-2 max-h-40 overflow-y-auto pr-2 pb-2\">\r\n              {fragranceFamilyOptions.map((option) => (\r\n                <button\r\n                  key={option.value}\r\n                  onClick={() => {\r\n                    if (filters.fragranceFamily.includes(option.value)) {\r\n                      updateFilter('fragranceFamily', filters.fragranceFamily.filter(f => f !== option.value));\r\n                    } else {\r\n                      updateFilter('fragranceFamily', [...filters.fragranceFamily, option.value]);\r\n                    }\r\n                  }}\r\n                  className={`flex items-center space-x-2 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 ${\r\n                    filters.fragranceFamily.includes(option.value)\r\n                      ? 'bg-gradient-to-r from-neutral-100 to-neutral-200 text-neutral-700 border border-neutral-300 shadow-sm'\r\n                      : 'bg-white text-neutral-600 border border-neutral-200 hover:bg-neutral-50 hover:border-neutral-300'\r\n                  }`}\r\n                >\r\n                  <span>{option.icon}</span>\r\n                  <span>{option.label}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </FilterSection>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Star, ThumbsUp, Shield } from 'lucide-react';\r\nimport { Review } from '../../types';\r\n\r\ninterface ProductReviewProps {\r\n  review: Review;\r\n  onHelpful?: (reviewId: string) => void;\r\n}\r\n\r\nexport const ProductReview: React.FC<ProductReviewProps> = ({ review, onHelpful }) => {\r\n  const [isHelpful, setIsHelpful] = useState(false);\r\n\r\n  const handleHelpful = () => {\r\n    if (onHelpful) {\r\n      onHelpful(review.id);\r\n      setIsHelpful(true);\r\n    }\r\n  };\r\n\r\n  // Use new field names with fallback to legacy fields\r\n  const reviewDate = review.createdAt || new Date(review.created_at || '');\r\n  const reviewerName = review.profiles?.full_name || 'Anonymous';\r\n  const reviewerAvatar = review.profiles?.avatar_url;\r\n\r\n  return (\r\n    <div className=\"py-6 border-b border-gray-200 last:border-b-0\">\r\n      <div className=\"flex items-start space-x-4\">\r\n        <img\r\n          src={reviewerAvatar || `https://api.dicebear.com/8.x/initials/svg?seed=${reviewerName}`}\r\n          alt={reviewerName}\r\n          className=\"h-12 w-12 rounded-full object-cover bg-gray-200\"\r\n        />\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <h4 className=\"font-semibold text-gray-900\">{reviewerName}</h4>\r\n                {review.isVerifiedPurchase && (\r\n                  <div className=\"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full\">\r\n                    <Shield className=\"h-3 w-3\" />\r\n                    Verified Purchase\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <p className=\"text-sm text-gray-500\">\r\n                {reviewDate instanceof Date ? reviewDate.toLocaleDateString() : new Date(reviewDate).toLocaleDateString()}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center\">\r\n              {[...Array(5)].map((_, i) => (\r\n                <Star\r\n                  key={i}\r\n                  className={`h-5 w-5 ${\r\n                    i < review.rating ? 'text-yellow-400 fill-current' : 'text-gray-300'\r\n                  }`}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Review Title */}\r\n          {review.title && (\r\n            <h5 className=\"font-medium text-gray-900 mb-2\">{review.title}</h5>\r\n          )}\r\n\r\n          {/* Review Comment */}\r\n          {review.comment && (\r\n            <p className=\"text-gray-700 mb-3 leading-relaxed\">{review.comment}</p>\r\n          )}\r\n\r\n          {/* Review Images */}\r\n          {review.images && review.images.length > 0 && (\r\n            <div className=\"flex gap-2 mb-3\">\r\n              {review.images.slice(0, 3).map((image, index) => (\r\n                <img\r\n                  key={index}\r\n                  src={image}\r\n                  alt={`Review image ${index + 1}`}\r\n                  className=\"h-16 w-16 object-cover rounded-lg border border-gray-200\"\r\n                />\r\n              ))}\r\n              {review.images.length > 3 && (\r\n                <div className=\"h-16 w-16 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center\">\r\n                  <span className=\"text-xs text-gray-600\">+{review.images.length - 3}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Helpful Button */}\r\n          <div className=\"flex items-center gap-4 mt-4\">\r\n            <button\r\n              onClick={handleHelpful}\r\n              disabled={isHelpful}\r\n              className={`flex items-center gap-2 text-sm px-3 py-1 rounded-full transition-colors ${\r\n                isHelpful\r\n                  ? 'bg-blue-100 text-blue-700 cursor-not-allowed'\r\n                  : 'text-gray-600 hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              <ThumbsUp className={`h-4 w-4 ${isHelpful ? 'fill-current' : ''}`} />\r\n              <span>\r\n                {isHelpful ? 'Helpful!' : 'Helpful'}\r\n                {review.helpfulCount && review.helpfulCount > 0 && ` (${review.helpfulCount})`}\r\n              </span>\r\n            </button>\r\n\r\n            {!review.isApproved && (\r\n              <span className=\"text-xs text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full\">\r\n                Pending Approval\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Star, Upload, X } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\n\r\ninterface ReviewFormProps {\r\n  onSubmit: (rating: number, comment: string, title?: string, images?: string[]) => void;\r\n}\r\n\r\nexport const ReviewForm: React.FC<ReviewFormProps> = ({ onSubmit }) => {\r\n  const [rating, setRating] = useState(0);\r\n  const [hoverRating, setHoverRating] = useState(0);\r\n  const [title, setTitle] = useState('');\r\n  const [comment, setComment] = useState('');\r\n  const [images, setImages] = useState<string[]>([]);\r\n  const { showNotification } = useNotification();\r\n\r\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.target.files;\r\n    if (files) {\r\n      Array.from(files).forEach(file => {\r\n        if (images.length < 3) {\r\n          const reader = new FileReader();\r\n          reader.onload = (event) => {\r\n            setImages(prev => [...prev, event.target?.result as string]);\r\n          };\r\n          reader.readAsDataURL(file);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeImage = (index: number) => {\r\n    setImages(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (rating === 0) {\r\n      showNotification({ type: 'error', title: 'Rating required', message: 'Please select a star rating.' });\r\n      return;\r\n    }\r\n    if (comment.trim() === '') {\r\n      showNotification({ type: 'error', title: 'Comment required', message: 'Please write a comment about the product.' });\r\n      return;\r\n    }\r\n    onSubmit(rating, comment, title, images);\r\n\r\n    // Reset form\r\n    setRating(0);\r\n    setTitle('');\r\n    setComment('');\r\n    setImages([]);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Your Rating</label>\r\n        <div className=\"flex items-center space-x-1\">\r\n          {[...Array(5)].map((_, index) => {\r\n            const starValue = index + 1;\r\n            return (\r\n              <motion.button\r\n                key={starValue}\r\n                type=\"button\"\r\n                onMouseEnter={() => setHoverRating(starValue)}\r\n                onMouseLeave={() => setHoverRating(0)}\r\n                onClick={() => setRating(starValue)}\r\n                whileHover={{ scale: 1.2, y: -2 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                className=\"p-1\"\r\n              >\r\n                <Star\r\n                  className={`h-7 w-7 transition-colors ${\r\n                    starValue <= (hoverRating || rating)\r\n                      ? 'text-yellow-400 fill-current'\r\n                      : 'text-gray-300'\r\n                  }`}\r\n                />\r\n              </motion.button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Review Title */}\r\n      <div>\r\n        <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Review Title (Optional)\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"title\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          className=\"input-field\"\r\n          placeholder=\"Summarize your review in a few words\"\r\n          maxLength={100}\r\n        />\r\n      </div>\r\n\r\n      {/* Review Comment */}\r\n      <div>\r\n        <label htmlFor=\"comment\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Your Review *\r\n        </label>\r\n        <textarea\r\n          id=\"comment\"\r\n          rows={5}\r\n          value={comment}\r\n          onChange={(e) => setComment(e.target.value)}\r\n          className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n          placeholder=\"Share your thoughts about the product...\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      {/* Image Upload */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Add Photos (Optional)\r\n        </label>\r\n        <div className=\"space-y-3\">\r\n          {/* Upload Button */}\r\n          {images.length < 3 && (\r\n            <label className=\"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-400 transition-colors\">\r\n              <div className=\"text-center\">\r\n                <Upload className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\r\n                <p className=\"text-sm text-gray-600\">Click to upload photos</p>\r\n                <p className=\"text-xs text-gray-500\">Up to 3 images, max 5MB each</p>\r\n              </div>\r\n              <input\r\n                type=\"file\"\r\n                multiple\r\n                accept=\"image/*\"\r\n                onChange={handleImageUpload}\r\n                className=\"hidden\"\r\n              />\r\n            </label>\r\n          )}\r\n\r\n          {/* Preview Images */}\r\n          {images.length > 0 && (\r\n            <div className=\"flex gap-3\">\r\n              {images.map((image, index) => (\r\n                <div key={index} className=\"relative\">\r\n                  <img\r\n                    src={image}\r\n                    alt={`Review image ${index + 1}`}\r\n                    className=\"h-20 w-20 object-cover rounded-lg border border-gray-200\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => removeImage(index)}\r\n                    className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors\"\r\n                  >\r\n                    <X className=\"h-3 w-3\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-end\">\r\n        <motion.button\r\n          type=\"submit\"\r\n          className=\"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          Submit Review\r\n        </motion.button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Product, Category } from '../../types';\r\nimport { useProducts } from '../../contexts/ProductContext';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport { ImageUpload } from '../Common/ImageUpload';\r\nimport { motion } from 'framer-motion';\r\nimport { Image, Plus, Trash2, AlertCircle } from 'lucide-react';\r\n\r\ninterface EnhancedProductFormProps {\r\n  product: Product | null;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const EnhancedProductForm: React.FC<EnhancedProductFormProps> = ({ product, onClose }) => {\r\n  const { addProduct, updateProduct, categories } = useProducts();\r\n  const { user } = useAuth();\r\n  const { showNotification } = useNotification();\r\n\r\n  const [activeTab, setActiveTab] = useState('basic');\r\n  const [imagePaths, setImagePaths] = useState<string[]>([]);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    slug: '',\r\n    description: '',\r\n    shortDescription: '',\r\n    price: 0,\r\n    originalPrice: 0,\r\n    category: categories.length > 0 ? categories[0].name : '',\r\n    categoryId: categories.length > 0 ? categories[0].id : '',\r\n    stock: 0,\r\n    minStockLevel: 5,\r\n    sku: '',\r\n    weight: 0,\r\n    dimensions: { length: 0, width: 0, height: 0 },\r\n    images: [''] as string[],\r\n    tags: [] as string[],\r\n    specifications: {\r\n      'Volume': '',\r\n      'Concentration': '',\r\n      'Longevity': '',\r\n      'Sillage': '',\r\n      'Origin': ''\r\n    },\r\n    featured: false,\r\n    isActive: true,\r\n    metaTitle: '',\r\n    metaDescription: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (product) {\r\n      const productData = {\r\n        name: product.name,\r\n        slug: product.slug || '',\r\n        description: product.description,\r\n        shortDescription: product.shortDescription || '',\r\n        price: product.price,\r\n        originalPrice: product.originalPrice || 0,\r\n        category: product.category,\r\n        categoryId: product.categoryId || '',\r\n        stock: product.stock,\r\n        minStockLevel: product.minStockLevel || 5,\r\n        sku: product.sku || '',\r\n        weight: product.weight || 0,\r\n        dimensions: product.dimensions || { length: 0, width: 0, height: 0 },\r\n        images: product.images || [''],\r\n        tags: product.tags || [],\r\n        specifications: product.specifications || {\r\n          'Volume': '',\r\n          'Concentration': '',\r\n          'Longevity': '',\r\n          'Sillage': '',\r\n          'Origin': ''\r\n        },\r\n        featured: product.featured || false,\r\n        isActive: product.isActive !== false,\r\n        metaTitle: product.metaTitle || '',\r\n        metaDescription: product.metaDescription || ''\r\n      };\r\n\r\n      setFormData(productData);\r\n      setImagePaths(product.images || ['']);\r\n    } else {\r\n      // Reset to default values for new product\r\n      setFormData({\r\n        name: '',\r\n        slug: '',\r\n        description: '',\r\n        shortDescription: '',\r\n        price: 0,\r\n        originalPrice: 0,\r\n        category: categories.length > 0 ? categories[0].name : '',\r\n        categoryId: categories.length > 0 ? categories[0].id : '',\r\n        stock: 0,\r\n        minStockLevel: 5,\r\n        sku: '',\r\n        weight: 0,\r\n        dimensions: { length: 0, width: 0, height: 0 },\r\n        images: [''],\r\n        tags: [],\r\n        specifications: {\r\n          'Volume': '',\r\n          'Concentration': '',\r\n          'Longevity': '',\r\n          'Sillage': '',\r\n          'Origin': ''\r\n        },\r\n        featured: false,\r\n        isActive: true,\r\n        metaTitle: '',\r\n        metaDescription: ''\r\n      });\r\n      setImagePaths(['']);\r\n    }\r\n  }, [product, categories]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Product name is required';\r\n    }\r\n\r\n    if (!formData.description.trim()) {\r\n      newErrors.description = 'Product description is required';\r\n    }\r\n\r\n    if (!formData.shortDescription.trim()) {\r\n      newErrors.shortDescription = 'Short description is required';\r\n    }\r\n\r\n    if (!formData.sku.trim()) {\r\n      newErrors.sku = 'SKU is required';\r\n    }\r\n\r\n    if (formData.price <= 0) {\r\n      newErrors.price = 'Price must be greater than 0';\r\n    }\r\n\r\n    if (formData.stock < 0) {\r\n      newErrors.stock = 'Stock quantity cannot be negative';\r\n    }\r\n\r\n    if (formData.weight <= 0) {\r\n      newErrors.weight = 'Weight must be greater than 0';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value, type } = e.target;\r\n\r\n    if (name === 'category') {\r\n      const selectedCategory = categories.find(c => c.name === value);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        category: value,\r\n        categoryId: selectedCategory?.id || ''\r\n      }));\r\n    } else if (type === 'checkbox') {\r\n      const checked = (e.target as HTMLInputElement).checked;\r\n      setFormData(prev => ({ ...prev, [name]: checked }));\r\n    } else {\r\n      setFormData(prev => ({ ...prev, [name]: value }));\r\n    }\r\n\r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[name];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSpecificationChange = (key: string, value: string) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      specifications: {\r\n        ...prev.specifications,\r\n        [key]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleDimensionChange = (dimension: 'length' | 'width' | 'height', value: number) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      dimensions: {\r\n        ...prev.dimensions,\r\n        [dimension]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleTagChange = (tag: string) => {\r\n    setFormData(prev => {\r\n      const newTags = prev.tags.includes(tag)\r\n        ? prev.tags.filter(t => t !== tag)\r\n        : [...prev.tags, tag];\r\n      return { ...prev, tags: newTags };\r\n    });\r\n  };\r\n\r\n  const handleImageChange = (index: number, value: string) => {\r\n    const newImages = [...formData.images];\r\n    newImages[index] = value;\r\n    setFormData(prev => ({ ...prev, images: newImages }));\r\n  };\r\n\r\n  const handleImagePathChange = (index: number, path: string) => {\r\n    const newPaths = [...imagePaths];\r\n    newPaths[index] = path;\r\n    setImagePaths(newPaths);\r\n  };\r\n\r\n  const addImageField = () => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      images: [...prev.images, '']\r\n    }));\r\n    setImagePaths(prev => [...prev, '']);\r\n  };\r\n\r\n  const removeImageField = (index: number) => {\r\n    if (formData.images.length <= 1) return;\r\n\r\n    const newImages = [...formData.images];\r\n    newImages.splice(index, 1);\r\n    setFormData(prev => ({ ...prev, images: newImages }));\r\n\r\n    const newPaths = [...imagePaths];\r\n    newPaths.splice(index, 1);\r\n    setImagePaths(newPaths);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n\r\n    if (!validateForm()) {\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Validation Error',\r\n        message: 'Please fix the errors in the form before submitting.'\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check if we're in direct login mode\r\n    const isDirectLogin = import.meta.env.VITE_DIRECT_LOGIN_ENABLED === 'true';\r\n    let sellerId = user?.id;\r\n\r\n    // If in direct login mode and no user.id, try to get from localStorage\r\n    if (isDirectLogin && !sellerId) {\r\n      const storedUser = localStorage.getItem('direct_login_current_user');\r\n      if (storedUser) {\r\n        try {\r\n          const parsedUser = JSON.parse(storedUser);\r\n          sellerId = parsedUser.id;\r\n        } catch (e) {\r\n          console.error('Error parsing direct login user:', e);\r\n        }\r\n      }\r\n    }\r\n\r\n    const productData = {\r\n      ...formData,\r\n      slug: formData.slug || formData.name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, ''),\r\n      price: Number(formData.price),\r\n      originalPrice: Number(formData.originalPrice) || undefined,\r\n      stock: Number(formData.stock),\r\n      minStockLevel: Number(formData.minStockLevel),\r\n      weight: Number(formData.weight),\r\n      dimensions: {\r\n        length: Number(formData.dimensions.length),\r\n        width: Number(formData.dimensions.width),\r\n        height: Number(formData.dimensions.height)\r\n      },\r\n      sellerId: sellerId,\r\n      sellerName: user?.name || user?.email || 'Unknown Seller',\r\n      rating: 0,\r\n      reviewCount: 0,\r\n      reviews: [],\r\n      createdAt: new Date(),\r\n      updatedAt: new Date()\r\n    };\r\n\r\n    try {\r\n      if (product) {\r\n        // Create the updated product object with the original ID preserved\r\n        const updatedProduct = {\r\n          ...product,\r\n          ...productData,\r\n          id: product.id, // Ensure ID is preserved\r\n          updatedAt: new Date()\r\n        };\r\n\r\n        await updateProduct(updatedProduct);\r\n        showNotification({\r\n          type: 'success',\r\n          title: 'Product Updated',\r\n          message: `${formData.name} has been updated successfully.`\r\n        });\r\n      } else {\r\n        await addProduct(productData);\r\n        showNotification({\r\n          type: 'success',\r\n          title: 'Product Added',\r\n          message: `${formData.name} has been added successfully.`\r\n        });\r\n      }\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Product operation error:', error);\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Operation Failed',\r\n        message: `Failed to ${product ? 'update' : 'add'} product. Please try again.`\r\n      });\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'basic', label: 'Basic Info' },\r\n    { id: 'pricing', label: 'Pricing & Inventory' },\r\n    { id: 'media', label: 'Media' },\r\n    { id: 'specs', label: 'Specifications' },\r\n    { id: 'seo', label: 'SEO' }\r\n  ];\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"flex flex-col h-full\">\r\n      {/* Tab Navigation */}\r\n      <div className=\"flex overflow-x-auto border-b border-gray-200 mb-6\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            type=\"button\"\r\n            onClick={() => setActiveTab(tab.id)}\r\n            className={`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${activeTab === tab.id\r\n              ? 'border-indigo-600 text-indigo-600'\r\n              : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Form Content */}\r\n      <div className=\"flex-1 overflow-y-auto px-1\">\r\n        {/* Basic Information */}\r\n        {activeTab === 'basic' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Product Name *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={formData.name}\r\n                  onChange={handleChange}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${errors.name ? 'border-red-500' : 'border-gray-300'\r\n                    }`}\r\n                  placeholder=\"Enter product name\"\r\n                />\r\n                {errors.name && (\r\n                  <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                    <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                    {errors.name}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  SKU *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"sku\"\r\n                  value={formData.sku}\r\n                  onChange={handleChange}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${errors.sku ? 'border-red-500' : 'border-gray-300'\r\n                    }`}\r\n                  placeholder=\"Enter SKU\"\r\n                />\r\n                {errors.sku && (\r\n                  <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                    <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                    {errors.sku}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Category *\r\n                </label>\r\n                <select\r\n                  name=\"category\"\r\n                  value={formData.category}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                >\r\n                  {categories.map((category: Category) => (\r\n                    <option key={category.id} value={category.name}>\r\n                      {category.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Weight (kg) *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"weight\"\r\n                  value={formData.weight}\r\n                  onChange={handleChange}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${errors.weight ? 'border-red-500' : 'border-gray-300'\r\n                    }`}\r\n                  placeholder=\"0.00\"\r\n                  step=\"0.001\"\r\n                  min=\"0\"\r\n                />\r\n                {errors.weight && (\r\n                  <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                    <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                    {errors.weight}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Short Description *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"shortDescription\"\r\n                value={formData.shortDescription}\r\n                onChange={handleChange}\r\n                className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${errors.shortDescription ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                placeholder=\"Brief product description\"\r\n              />\r\n              {errors.shortDescription && (\r\n                <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                  <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                  {errors.shortDescription}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Full Description *\r\n              </label>\r\n              <textarea\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleChange}\r\n                rows={6}\r\n                className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${errors.description ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                placeholder=\"Detailed product description\"\r\n              />\r\n              {errors.description && (\r\n                <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                  <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                  {errors.description}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                type=\"checkbox\"\r\n                name=\"isActive\"\r\n                checked={formData.isActive}\r\n                onChange={handleChange}\r\n                className=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\r\n              />\r\n              <label className=\"ml-2 block text-sm text-gray-900\">\r\n                Active Product\r\n              </label>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Pricing & Inventory */}\r\n        {activeTab === 'pricing' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Price *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"price\"\r\n                  value={formData.price}\r\n                  onChange={handleChange}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${errors.price ? 'border-red-500' : 'border-gray-300'\r\n                    }`}\r\n                  placeholder=\"0.00\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                />\r\n                {errors.price && (\r\n                  <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                    <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                    {errors.price}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Original Price\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"originalPrice\"\r\n                  value={formData.originalPrice}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                  placeholder=\"0.00\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Stock Quantity *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"stock\"\r\n                  value={formData.stock}\r\n                  onChange={handleChange}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${errors.stock ? 'border-red-500' : 'border-gray-300'\r\n                    }`}\r\n                  placeholder=\"0\"\r\n                  min=\"0\"\r\n                />\r\n                {errors.stock && (\r\n                  <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                    <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                    {errors.stock}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Min Stock Level\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"minStockLevel\"\r\n                  value={formData.minStockLevel}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                  placeholder=\"5\"\r\n                  min=\"0\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Length (cm)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.dimensions.length}\r\n                  onChange={(e) => handleDimensionChange('length', Number(e.target.value))}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                  placeholder=\"0\"\r\n                  step=\"0.1\"\r\n                  min=\"0\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Width (cm)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.dimensions.width}\r\n                  onChange={(e) => handleDimensionChange('width', Number(e.target.value))}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                  placeholder=\"0\"\r\n                  step=\"0.1\"\r\n                  min=\"0\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Height (cm)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.dimensions.height}\r\n                  onChange={(e) => handleDimensionChange('height', Number(e.target.value))}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                  placeholder=\"0\"\r\n                  step=\"0.1\"\r\n                  min=\"0\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Media */}\r\n        {activeTab === 'media' && (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Product Images\r\n              </label>\r\n              <div className=\"space-y-4\">\r\n                {formData.images.map((image, index) => (\r\n                  <div key={index} className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span className=\"text-sm font-medium text-gray-700\">\r\n                        Image {index + 1} {index === 0 && '(Main Image)'}\r\n                      </span>\r\n                      {formData.images.length > 1 && (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => removeImageField(index)}\r\n                          className=\"inline-flex items-center px-2 py-1 text-sm text-red-600 hover:text-red-800\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4 mr-1\" />\r\n                          Remove\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                    <ImageUpload\r\n                      value={image}\r\n                      onChange={(url) => handleImageChange(index, url)}\r\n                      onPathChange={(path) => handleImagePathChange(index, path)}\r\n                      folder=\"products\"\r\n                      placeholder={`Upload product image ${index + 1} or enter URL`}\r\n                      aspectRatio=\"square\"\r\n                      maxWidth={400}\r\n                      maxHeight={400}\r\n                    />\r\n                  </div>\r\n                ))}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={addImageField}\r\n                  className=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-indigo-700 bg-white hover:bg-indigo-50\"\r\n                >\r\n                  <Plus className=\"h-4 w-4 mr-1\" />\r\n                  Add Image\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Specifications */}\r\n        {activeTab === 'specs' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {Object.entries(formData.specifications).map(([key, value]) => (\r\n                <div key={key}>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    {key}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={(e) => handleSpecificationChange(key, e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                    placeholder={`Enter ${key.toLowerCase()}`}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Tags\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {['trending', 'bestseller', 'new', 'sale', 'premium', 'limited'].map((tag) => (\r\n                  <button\r\n                    key={tag}\r\n                    type=\"button\"\r\n                    onClick={() => handleTagChange(tag)}\r\n                    className={`px-3 py-1 rounded-full text-sm font-medium transition-colors ${formData.tags.includes(tag)\r\n                      ? 'bg-indigo-600 text-white'\r\n                      : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                      }`}\r\n                  >\r\n                    {tag}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                type=\"checkbox\"\r\n                name=\"featured\"\r\n                checked={formData.featured}\r\n                onChange={handleChange}\r\n                className=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\r\n              />\r\n              <label className=\"ml-2 block text-sm text-gray-900\">\r\n                Featured Product\r\n              </label>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* SEO */}\r\n        {activeTab === 'seo' && (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Meta Title\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"metaTitle\"\r\n                value={formData.metaTitle}\r\n                onChange={handleChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                placeholder=\"Product meta title\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Meta Description\r\n              </label>\r\n              <textarea\r\n                name=\"metaDescription\"\r\n                value={formData.metaDescription}\r\n                onChange={handleChange}\r\n                rows={4}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                placeholder=\"Product meta description\"\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Form Actions */}\r\n      <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200 mt-6\">\r\n        <motion.button\r\n          type=\"button\"\r\n          onClick={onClose}\r\n          className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          Cancel\r\n        </motion.button>\r\n        <motion.button\r\n          type=\"submit\"\r\n          className=\"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          {product ? 'Update Product' : 'Add Product'}\r\n        </motion.button>\r\n      </div>\r\n    </form>\r\n  );\r\n};"],"names":["ProductCard","product","isInWishlist","useWishlist","isInCompare","useCompare","showSuccess","useNotification","handleAddToCart","useAddToCartWithAuth","handleAddToWishlist","useAddToWishlistWithAuth","handleAddToCompare","useAddToCompareWithAuth","currentImageIndex","setCurrentImageIndex","useState","discount","originalPrice","Math","round","price","stock","jsxs","className","onMouseEnter","dataPreloader","preloadProduct","id","priority","children","jsx","Link","to","src","images","length","alt","name","loading","crossOrigin","onError","e","target","map","_","index","onClick","preventDefault","stopPropagation","featured","TrendingIndicator","isHot","Heart","GitCompare","disabled","ShoppingCart","category","Array","i","Star","floor","rating","toLocaleString","MiniTrustIndicators","freeShipping","warranty","returns","ProductDetails","isOpen","onClose","quantity","setQuantity","selectedImage","setSelectedImage","features","icon","Truck","text","RotateCcw","Shield","Fragment","X","image","description","_a","reviews","toFixed","max","Minus","min","Plus","motion","button","whileHover","scale","whileTap","Share2","feature","sellerName","ProductRecommendations","currentProduct","type","title","subtitle","maxItems","showAddToCart","layout","products","useProducts","addItem","addToCart","useCart","addToWishlist","showNotification","isMobile","useMobileDetection","recommendedProducts","setRecommendedProducts","isLoading","setIsLoading","algorithms","related","calculateSimilarity","product1","product2","score","abs","tags","filter","includes","tag","getRecommendations","allProducts","p","sort","a","b","slice","item","priceRatio","random","recentlyViewed","JSON","parse","localStorage","getItem","useEffect","recentProducts","setTimeout","recommendations","getRecommendationIcon","Package","Users","TrendingUp","Eye","getDefaultTitle","from","getDefaultSubtitle","ArrowRight","MobileCompactCarousel","div","initial","opacity","y","animate","transition","delay","handleWishlistToggle","message","ProductListCard","addToCompare","longevityOptions","value","label","sillageOptions","concentrationOptions","premium","originOptions","flag","fragranceFamilyOptions","AttrFilters","filters","onFiltersChange","categories","onToggle","productCount","expandedSections","setExpandedSections","longevity","sillage","concentration","origins","fragranceFamily","updateFilter","key","activeFilterCount","priceRange","reduce","sum","count","FilterSection","sectionKey","toggleSection","section","prev","Crown","ChevronUp","ChevronDown","AnimatePresence","height","exit","duration","ease","QuickFilterButton","isActive","Filter","inStock","brands","sortBy","search","Sparkles","Droplets","newConcentration","c","newLongevity","l","newSillage","s","checked","onChange","DollarSign","parseInt","placeholder","range","desc","Clock","option","MapPin","o","Flower2","f","ProductReview","review","onHelpful","isHelpful","setIsHelpful","reviewDate","createdAt","Date","created_at","reviewerName","profiles","full_name","reviewerAvatar","_b","avatar_url","isVerifiedPurchase","toLocaleDateString","comment","ThumbsUp","helpfulCount","isApproved","ReviewForm","onSubmit","setRating","hoverRating","setHoverRating","setTitle","setComment","setImages","trim","starValue","onMouseLeave","htmlFor","maxLength","rows","required","Upload","multiple","accept","files","forEach","file","reader","FileReader","onload","event","result","readAsDataURL","removeImage","EnhancedProductForm","addProduct","updateProduct","user","useAuth","activeTab","setActiveTab","imagePaths","setImagePaths","errors","setErrors","formData","setFormData","slug","shortDescription","categoryId","minStockLevel","sku","weight","dimensions","width","specifications","Volume","Concentration","Longevity","Sillage","Origin","metaTitle","metaDescription","productData","handleChange","selectedCategory","find","newErrors","handleDimensionChange","dimension","async","Object","keys","validateForm","sellerId","toLowerCase","replace","Number","email","reviewCount","updatedAt","updatedProduct","error","tab","AlertCircle","step","newImages","splice","newPaths","removeImageField","Trash2","ImageUpload","url","handleImageChange","onPathChange","path","handleImagePathChange","folder","aspectRatio","maxWidth","maxHeight","entries","handleSpecificationChange","newTags","t","handleTagChange"],"mappings":"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"}