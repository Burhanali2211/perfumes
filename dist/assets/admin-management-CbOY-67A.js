import{r as e,j as s,ae as t,i as a,e as r,R as i,l,w as n,p as o,af as c,T as d,q as m,n as x,ag as u,b as g,U as h,ah as p,v as f,ai as y,aj as b,ak as j,al as v,E as N,o as w,P as C,J as k,D as S,Q as P,F as A,$ as E,y as D,am as O,Y as U,Z as F,c as L,an as T,ao as _,ap as R,aq as M,a1 as $,ar as I,as as V,k as B,at as z,au as q,aa as W,av as G,z as H,N as Z,V as J,W as Y,aw as Q,C as K,a as X,ax as ee,ay as se,m as te}from"./vendor-I9hkboGq.js";import{s as ae,a as re,L as ie,d as le,u as ne,e as oe,f as ce,g as de,h as me,E as xe,i as ue,j as ge,k as he,r as pe,l as fe,m as ye,A as be,C as je,n as ve,M as Ne,o as we,I as Ce}from"./index-CzTquisR.js";import{e as ke,d as Se,v as Pe,s as Ae}from"./utils-DOabGuGE.js";import{u as Ee,b as De,c as Oe}from"./contexts-Cb1lEMMf.js";import{U as Ue}from"./admin-components-DqbfjU8M.js";import{E as Fe}from"./product-C38Xnw-V.js";import{m as Le,A as Te}from"./ui-CFZ2Pk_Q.js";import{S as _e}from"./services-BbBFH2H7.js";const Re=({tableName:u,displayName:g,onBack:h})=>{const[p,f]=e.useState([]),[y,b]=e.useState([]),[j,v]=e.useState(!0),[N,w]=e.useState(null),[C,k]=e.useState(""),[S,P]=e.useState("created_at"),[A,E]=e.useState("desc"),[D,O]=e.useState({currentPage:1,totalPages:1,totalRecords:0,recordsPerPage:10}),[U,F]=e.useState(new Set),[L,T]=e.useState(!1),[_,R]=e.useState(null),[M,$]=e.useState({}),[I,V]=e.useState(!1),[B,z]=e.useState(!1),q=e.useCallback(async()=>{try{const{data:s,error:t}=await ae.rpc("get_table_schema",{table_name:u});if(!t&&s&&s.length>0)return void b(s);try{const{data:e,error:s}=await ae.from("information_schema.columns").select("column_name, data_type, is_nullable").eq("table_name",u).eq("table_schema","public");if(!s&&e&&e.length>0){const s=e.map(e=>({name:e.column_name,type:e.data_type,nullable:"YES"===e.is_nullable,displayName:H(e.column_name)}));return void b(s)}}catch(e){}const{data:a,error:r}=await ae.from(u).select("*").limit(1);if(!r&&a&&a.length>0){const e=a[0],s=Object.keys(e).map(s=>({name:s,type:W(e[s]),nullable:null===e[s],displayName:H(s)}));return void b(s)}b([{name:"id",type:"uuid",nullable:!1,displayName:"ID"},{name:"created_at",type:"timestamp",nullable:!0,displayName:"Created At"},{name:"updated_at",type:"timestamp",nullable:!0,displayName:"Updated At"}])}catch(s){b([{name:"id",type:"uuid",nullable:!1,displayName:"ID"},{name:"created_at",type:"timestamp",nullable:!0,displayName:"Created At"},{name:"updated_at",type:"timestamp",nullable:!0,displayName:"Updated At"}])}},[u]),W=e=>null==e?"text":"boolean"==typeof e?"boolean":"number"==typeof e?Number.isInteger(e)?"integer":"numeric":"string"==typeof e?/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)?"uuid":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(e)?"timestamp":/^\d{4}-\d{2}-\d{2}$/.test(e)?"date":"text":Array.isArray(e)?"array":"object"==typeof e?"json":"text",G=e.useCallback(async()=>{try{w(null);const{count:e,error:s}=await ae.from(u).select("*",{count:"exact",head:!0});if(s)throw s;const t=e||0,a=Math.ceil(t/D.recordsPerPage),r=(D.currentPage-1)*D.recordsPerPage;let i=ae.from(u).select("*").range(r,r+D.recordsPerPage-1);if(S&&(i=i.order(S,{ascending:"asc"===A})),C){const e=y.filter(e=>e.type.includes("text")||e.type.includes("varchar"));if(e.length>0){const s=e.map(e=>`${e.name}.ilike.%${C}%`).join(",");i=i.or(s)}}const{data:l,error:n}=await i;if(n)throw n;f(l||[]),O(e=>({...e,totalRecords:t,totalPages:a}))}catch(e){w(`Failed to load ${g} data`)}finally{v(!1),T(!1)}},[u,y,D.currentPage,D.recordsPerPage,S,A,C,g]);e.useEffect(()=>{q()},[q]),e.useEffect(()=>{y.length>0&&G()},[y,G]);const H=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),Z=e=>{e>=1&&e<=D.totalPages&&O(s=>({...s,currentPage:e}))},J=(e,s)=>{$(t=>({...t,[e]:s}))},Y=[{key:"id",title:"ID",width:100,render:e=>s.jsx("span",{className:"font-mono text-sm",children:(null==e?void 0:e.slice(0,8))||"-"})},{key:"data",title:"Data",minWidth:200,render:(e,t)=>s.jsxs("div",{className:"max-w-xs truncate",children:[JSON.stringify(t,null,2).slice(0,100),"..."]})},{key:"created_at",title:"Created",width:150,render:e=>s.jsx("span",{className:"text-sm text-gray-500",children:e?new Date(e).toLocaleDateString():"-"})},{key:"actions",title:"Actions",width:100,render:(e,t)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{R(e),$({...e}),z(!0)})(t)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit Record",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),t.id&&(async e=>{if(window.confirm("Are you sure you want to delete this record? This action cannot be undone.")){w(null);try{const{error:s}=await ae.from(u).delete().eq("id",e);if(s)throw new Error(`Failed to delete record: ${s.message}`);await G()}catch(s){const e=s instanceof Error?s.message:"Failed to delete record";w(e)}}})(String(t.id))},className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete Record",children:s.jsx(o,{className:"h-4 w-4"})})]})}];return N?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:s.jsxs("div",{children:[s.jsxs("button",{onClick:h,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-2",children:[s.jsx(t,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]}),s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[g," Management"]})]})}),s.jsx(re,{error:N,onRetry:()=>{w(null),G()},type:"database",size:"large"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("button",{onClick:h,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-2",children:[s.jsx(t,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]}),s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[g," Management"]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage ",g.toLowerCase()," data (",D.totalRecords," total records)"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>{R({id:"new"}),$({}),z(!0)},className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx(a,{className:"h-4 w-4 mr-1"}),"Add New"]}),s.jsxs("button",{onClick:async()=>{try{await ke(u,g)}catch(e){w("Failed to export data")}},className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx(r,{className:"h-4 w-4 mr-1"}),"Export"]}),s.jsxs("button",{onClick:()=>{T(!0),G()},disabled:L,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:[s.jsx(i,{className:"h-4 w-4 mr-1 "+(L?"animate-spin":"")}),"Refresh"]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",placeholder:`Search ${g}...`,value:C,onChange:e=>k(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 w-full"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(n,{className:"h-4 w-4 text-gray-500"}),s.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{children:"All Columns"}),y.map(e=>s.jsx("option",{value:e.name,children:e.displayName},e.name))]})]})]})}),U.size>0&&s.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-indigo-800",children:[U.size," ",1===U.size?"record":"records"," selected"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:async()=>{if(0!==U.size&&window.confirm(`Are you sure you want to delete ${U.size} records? This action cannot be undone.`))try{const e=Array.from(U);await Se(u,e),F(new Set),G()}catch(e){w("Failed to delete records")}},className:"flex items-center px-3 py-1.5 text-sm font-medium text-red-700 bg-red-100 border border-red-300 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(o,{className:"h-4 w-4 mr-1"}),"Delete Selected"]}),s.jsx("button",{onClick:()=>F(new Set),className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Selection"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:j?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx(ie,{})}):s.jsxs(s.Fragment,{children:[s.jsx(le,{columns:Y,data:p,loading:j,emptyMessage:`No ${g.toLowerCase()} found`}),D.totalPages>1&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",D.currentPage," of ",D.totalPages]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>Z(D.currentPage-1),disabled:1===D.currentPage,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsx("button",{onClick:()=>Z(D.currentPage+1),disabled:D.currentPage===D.totalPages,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),B&&_&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"new"===_.id?`Add New ${g} Record`:`Edit ${g} Record`}),s.jsx("button",{onClick:()=>{z(!1),w(null)},className:"text-gray-400 hover:text-gray-600",children:s.jsx(c,{className:"h-6 w-6"})})]}),N&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(d,{className:"h-5 w-5 text-red-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),s.jsx("div",{className:"mt-1 text-sm text-red-700",children:N})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsx("div",{className:"space-y-4",children:y.filter(e=>"id"!==e.name&&"created_at"!==e.name&&"updated_at"!==e.name).map(e=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.displayName}),"boolean"===e.type?s.jsxs("select",{value:M[e.name]?"true":"false",onChange:s=>J(e.name,"true"===s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"true",children:"Yes"}),s.jsx("option",{value:"false",children:"No"})]}):e.type.includes("text")||e.type.includes("varchar")?s.jsx("textarea",{value:String(M[e.name]||""),onChange:s=>J(e.name,s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:3}):e.type.includes("json")||e.type.includes("array")?s.jsx("textarea",{value:JSON.stringify(M[e.name]||"",null,2),onChange:s=>{try{const t=JSON.parse(s.target.value);J(e.name,t)}catch{J(e.name,s.target.value)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm",rows:4,placeholder:"Enter valid JSON"}):s.jsx("input",{type:e.type.includes("int")||e.type.includes("numeric")?"number":"text",value:String(M[e.name]||""),onChange:s=>{const t=e.type.includes("int")||e.type.includes("numeric")?parseFloat(s.target.value)||0:s.target.value;J(e.name,t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]},e.name))})}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[s.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),s.jsx("button",{onClick:async()=>{if(_){V(!0),w(null);try{const e={...M};if(Object.keys(e).forEach(s=>{if(""===e[s]){const t=y.find(e=>e.name===s);(null==t?void 0:t.nullable)&&(e[s]=null)}}),"new"===_.id&&(e.created_at=(new Date).toISOString()),e.updated_at=(new Date).toISOString(),"new"===_.id){const{data:s,error:t}=await ae.from(u).insert(e).select();if(t)throw new Error(`Failed to create record: ${t.message}`)}else{const{data:s,error:t}=await ae.from(u).update(e).eq("id",_.id).select();if(t)throw new Error(`Failed to update record: ${t.message}`)}await G(),z(!1),R(null),$({})}catch(e){const s=e instanceof Error?e.message:"Failed to save record";w(s)}finally{V(!1)}}},disabled:I,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center",children:I?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})},Me=({users:e,selectedUsers:t,onSelectUser:a,onSelectAll:r,onEditUser:i,onDeleteUser:l,onResendConfirmation:n,onConfirmEmail:c,actionLoading:d,getStatusBadge:m,getRoleBadge:p})=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"hidden lg:block overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:s.jsx("input",{type:"checkbox",checked:t.length===e.length&&e.length>0,onChange:r,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var r,h;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>a(e.id),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-indigo-700",children:(null==(h=null==(r=null==e?void 0:e.name)?void 0:r.charAt(0))?void 0:h.toUpperCase())||"U"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:(null==e?void 0:e.name)||"Unknown User"}),s.jsx("div",{className:"text-sm text-gray-500",children:e.email}),e.phone&&s.jsx("div",{className:"text-xs text-gray-400",children:e.phone})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p(e.role)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(e)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[!e.emailVerified&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>n(e.id),disabled:d===`confirm-${e.id}`,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Resend confirmation email",children:s.jsx(u,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>c(e.id),disabled:d===`manual-confirm-${e.id}`,className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:"Manually confirm email",children:s.jsx(g,{className:"w-4 h-4"})})]}),s.jsx("button",{onClick:()=>i(e),className:"text-indigo-600 hover:text-indigo-900",title:"Edit user",children:s.jsx(x,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>l(e.id),disabled:d===`delete-${e.id}`,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Delete user",children:s.jsx(o,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),s.jsx("div",{className:"lg:hidden",children:e.map(e=>{var r,h;return s.jsx("div",{className:"p-4 border-b border-gray-200 last:border-b-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>a(e.id),className:"mt-1 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-indigo-700",children:(null==(h=null==(r=null==e?void 0:e.name)?void 0:r.charAt(0))?void 0:h.toUpperCase())||"U"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:(null==e?void 0:e.name)||"Unknown User"}),s.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.email}),e.phone&&s.jsx("div",{className:"text-xs text-gray-400",children:e.phone}),s.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[p(e.role),m(e)]}),s.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[!e.emailVerified&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>n(e.id),disabled:d===`confirm-${e.id}`,className:"p-2 text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Resend confirmation email",children:s.jsx(u,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>c(e.id),disabled:d===`manual-confirm-${e.id}`,className:"p-2 text-green-600 hover:text-green-900 disabled:opacity-50",title:"Manually confirm email",children:s.jsx(g,{className:"w-4 h-4"})})]}),s.jsx("button",{onClick:()=>i(e),className:"p-2 text-indigo-600 hover:text-indigo-900",title:"Edit user",children:s.jsx(x,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>l(e.id),disabled:d===`delete-${e.id}`,className:"p-2 text-red-600 hover:text-red-900 disabled:opacity-50",title:"Delete user",children:s.jsx(o,{className:"w-4 h-4"})})]})]})},e.id)})}),0===e.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 mb-4",children:s.jsx(h,{className:"w-12 h-12 mx-auto"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]}),$e=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const t=ne(),{isInstallable:a,installPWA:i}=oe(),{checkPermission:n,logSecurityEvent:o,rateLimitStatus:d}=ce(),[m,x]=e.useState([]),[u,y]=e.useState(!0),[b,j]=e.useState([]),[v,N]=e.useState(!1),[w,C]=e.useState(!1),[k,S]=e.useState(null),[P,A]=e.useState(!1),[E,D]=e.useState(""),[O,U]=e.useState(""),[F,L]=e.useState({search:"",role:"all",status:"all",sortBy:"createdAt",sortOrder:"desc"}),[T,_]=e.useState({email:"",name:"",role:"customer",phone:"",dateOfBirth:"",isActive:!0,sendEmail:!0}),{showNotification:R}=Ee();e.useEffect(()=>{$()},[]);const M=e.useMemo(()=>{let e=m.filter(e=>{if(F.search){const s=F.search.toLowerCase();if(!e.name.toLowerCase().includes(s)&&!e.email.toLowerCase().includes(s))return!1}if("all"!==F.role&&e.role!==F.role)return!1;if("all"!==F.status)switch(F.status){case"active":return!0===e.isActive;case"inactive":return!1===e.isActive;case"unverified":return!1===e.emailVerified}return!0});return e.sort((e,s)=>{let t,a;switch(F.sortBy){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"email":t=e.email.toLowerCase(),a=s.email.toLowerCase();break;case"role":t=e.role,a=s.role;break;case"createdAt":t=new Date(e.createdAt),a=new Date(s.createdAt);break;default:return 0}return"asc"===F.sortOrder?t>a?1:-1:t<a?1:-1}),e},[m,F]),$=async()=>{try{y(!0);const e=await de();x(e||[])}catch(e){R({type:"error",title:"Error",message:"Failed to load users. Please try again."})}finally{y(!1)}},I=()=>{_({email:"",name:"",role:"customer",phone:"",dateOfBirth:"",isActive:!0,sendEmail:!0}),D(""),A(!1)},V=async e=>{if(0!==b.length)try{U("bulk-role");const s=await ue(b,{role:e});s.success?(x(m.map(s=>b.includes(s.id)?{...s,role:e}:s)),j([]),R({type:"success",title:"Roles Updated",message:`${b.length} users have been updated to ${e} role.`})):R({type:"error",title:"Error",message:s.error||"Failed to update user roles."})}catch(s){R({type:"error",title:"Error",message:"Failed to update user roles. Please try again later."})}finally{U("")}else R({type:"warning",title:"No Users Selected",message:"Please select users to update."})},B=async e=>{if(0!==b.length)try{U("bulk-status");const s=await ue(b,{isActive:e});s.success?(x(m.map(s=>b.includes(s.id)?{...s,isActive:e}:s)),j([]),R({type:"success",title:"Status Updated",message:`${b.length} users have been ${e?"activated":"deactivated"}.`})):R({type:"error",title:"Error",message:s.error||"Failed to update user status."})}catch(s){R({type:"error",title:"Error",message:"Failed to update user status. Please try again later."})}finally{U("")}else R({type:"warning",title:"No Users Selected",message:"Please select users to update."})};return u?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(ie,{size:"lg"})}):s.jsx(me,{className:"user-management-container",enablePWASupport:!0,showMobileMenu:t.isMobile,children:s.jsxs("div",{className:"space-y-6 p-4 sm:p-6 lg:p-8",children:[a&&s.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Smartphone,{className:"w-5 h-5 text-indigo-600 mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-indigo-900",children:"Install App"}),s.jsx("p",{className:"text-sm text-indigo-700",children:"Get the full experience with our mobile app"})]})]}),s.jsx("button",{onClick:i,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700",children:"Install"})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between user-management-header",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center user-management-title",children:[s.jsx(h,{className:"w-8 h-8 mr-3 text-indigo-600"}),"User Management"]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage users, roles, and permissions across your platform"})]}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[s.jsxs(xe,{onClick:()=>{const e=[["Name","Email","Role","Phone","Status","Email Verified","Created At"],...M.map(e=>[e.name,e.email,e.role,e.phone||"",e.isActive?"Active":"Inactive",e.emailVerified?"Yes":"No",new Date(e.createdAt).toLocaleDateString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`users-export-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t),R({type:"success",title:"Export Complete",message:"Users have been exported to CSV successfully."})},variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),s.jsxs(xe,{onClick:()=>N(!0),variant:"primary",size:"sm",className:"w-full sm:w-auto",children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search users...",value:F.search,onChange:e=>L({...F,search:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("select",{value:F.role,onChange:e=>L({...F,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"seller",children:"Seller"}),s.jsx("option",{value:"customer",children:"Customer"})]}),s.jsxs("select",{value:F.status,onChange:e=>L({...F,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"unverified",children:"Unverified"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:F.sortBy,onChange:e=>L({...F,sortBy:e.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[s.jsx("option",{value:"createdAt",children:"Created Date"}),s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"role",children:"Role"})]}),s.jsx("button",{onClick:()=>L({...F,sortOrder:"asc"===F.sortOrder?"desc":"asc"}),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:"asc"===F.sortOrder?"↑":"↓"})]})]}),b.length>0&&s.jsx("div",{className:"mt-4 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[b.length," user",1!==b.length?"s":""," selected"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>V("admin"),disabled:"bulk-role"===O,className:"px-3 py-1 text-xs font-medium text-purple-700 bg-purple-100 rounded-full hover:bg-purple-200 disabled:opacity-50",children:"Make Admin"}),s.jsx("button",{onClick:()=>V("seller"),disabled:"bulk-role"===O,className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200 disabled:opacity-50",children:"Make Seller"}),s.jsx("button",{onClick:()=>V("customer"),disabled:"bulk-role"===O,className:"px-3 py-1 text-xs font-medium text-gray-700 bg-gray-100 rounded-full hover:bg-gray-200 disabled:opacity-50",children:"Make Customer"}),s.jsx("button",{onClick:()=>B(!0),disabled:"bulk-status"===O,className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full hover:bg-green-200 disabled:opacity-50",children:"Activate"}),s.jsx("button",{onClick:()=>B(!1),disabled:"bulk-status"===O,className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Deactivate"}),s.jsx("button",{onClick:async()=>{if(0!==b.length){if(window.confirm(`Are you sure you want to delete ${b.length} users? This action cannot be undone.`))try{U("bulk-delete");const e=await ge(b);e.success?(x(m.filter(e=>!b.includes(e.id))),j([]),R({type:"success",title:"Users Deleted",message:`${b.length} users have been deleted successfully.`})):R({type:"error",title:"Error",message:e.error||"Failed to delete users."})}catch(e){R({type:"error",title:"Error",message:"Failed to delete users. Please try again later."})}finally{U("")}}else R({type:"warning",title:"No Users Selected",message:"Please select users to delete."})},disabled:"bulk-delete"===O,className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Delete"})]})]})})]}),s.jsx(Me,{users:M,selectedUsers:b,onSelectUser:e=>{b.includes(e)?j(b.filter(s=>s!==e)):j([...b,e])},onSelectAll:()=>{b.length===M.length?j([]):j(M.map(e=>e.id))},onEditUser:e=>{S(e),_({email:e.email,name:e.name,role:e.role,phone:e.phone||"",dateOfBirth:e.dateOfBirth||"",isActive:e.isActive||!0,sendEmail:!1}),C(!0)},onDeleteUser:async e=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{U(`delete-${e}`);const s=await fe(e);s.success?(x(m.filter(s=>s.id!==e)),j(b.filter(s=>s!==e)),R({type:"success",title:"User Deleted",message:"User has been deleted successfully."})):R({type:"error",title:"Error",message:s.error||"Failed to delete user."})}catch(s){R({type:"error",title:"Error",message:"Failed to delete user. Please try again later."})}finally{U("")}},onResendConfirmation:async e=>{try{U(`confirm-${e}`);const s=await pe(e);s.success?R({type:"success",title:"Email Sent",message:"Confirmation email has been sent successfully."}):R({type:"error",title:"Error",message:s.error||"Failed to send confirmation email."})}catch(s){R({type:"error",title:"Error",message:"Failed to send confirmation email."})}finally{U("")}},onConfirmEmail:async e=>{try{U(`manual-confirm-${e}`);const s=await he(e);s.success?(x(m.map(s=>s.id===e?{...s,emailVerified:!0}:s)),R({type:"success",title:"Email Confirmed",message:"User email has been confirmed successfully."})):R({type:"error",title:"Error",message:s.error||"Failed to confirm email."})}catch(s){R({type:"error",title:"Error",message:"Failed to confirm email."})}finally{U("")}},actionLoading:O,getStatusBadge:e=>e.isActive?e.emailVerified?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx(g,{className:"w-3 h-3 mr-1"}),"Active"]}):s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[s.jsx(f,{className:"w-3 h-3 mr-1"}),"Unverified"]}):s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[s.jsx(c,{className:"w-3 h-3 mr-1"}),"Inactive"]}),getRoleBadge:e=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{admin:"bg-purple-100 text-purple-800",seller:"bg-blue-100 text-blue-800",customer:"bg-gray-100 text-gray-800"}[e]}`,children:e.charAt(0).toUpperCase()+e.slice(1)})}),s.jsx(Ue,{isOpen:v,onClose:()=>{N(!1),I()},onSubmit:async()=>{if(!n("create","user_management"))return;if(!d.userCreation)return void R({type:"error",title:"Rate Limit Exceeded",message:"Please wait before creating another user."});const e=Pe({email:Ae(T.email),name:Ae(T.name),role:T.role,phone:T.phone?Ae(T.phone):void 0,dateOfBirth:T.dateOfBirth});if(e.isValid){e.warnings&&e.warnings.length>0&&R({type:"warning",title:"Validation Warnings",message:e.warnings.join(", ")});try{U("create");const e=await createNewUser({email:Ae(T.email),name:Ae(T.name),role:T.role,phone:T.phone,dateOfBirth:T.dateOfBirth,isActive:T.isActive,sendEmail:T.sendEmail});e.success&&e.user?(x([...m,e.user]),N(!1),I(),e.password&&(D(e.password),A(!0)),R({type:"success",title:"User Created",message:`User has been created successfully${T.sendEmail?" and confirmation email sent":""}.`})):R({type:"error",title:"Error",message:e.error||"Failed to create user."})}catch(s){R({type:"error",title:"Error",message:"Failed to create user. Please try again later."})}finally{U("")}}else R({type:"error",title:"Validation Error",message:e.errors.join(", ")})},formData:T,setFormData:_,isEdit:!1,loading:"create"===O,generatedPassword:E,showPassword:P,setShowPassword:A}),s.jsx(Ue,{isOpen:w,onClose:()=>{C(!1),S(null),I()},onSubmit:async()=>{if(!k)return;if(!n("update","user_management"))return;const e=Pe({email:Ae(T.email),name:Ae(T.name),role:T.role,phone:T.phone?Ae(T.phone):void 0,dateOfBirth:T.dateOfBirth});if(e.isValid)try{U("update");const e=await ye(k.id,{name:T.name,email:T.email,role:T.role,phone:T.phone,dateOfBirth:T.dateOfBirth,isActive:T.isActive});e.success&&e.user?(x(m.map(s=>s.id===k.id?e.user:s)),C(!1),I(),S(null),R({type:"success",title:"User Updated",message:"User has been updated successfully."})):R({type:"error",title:"Error",message:e.error||"Failed to update user."})}catch(s){R({type:"error",title:"Error",message:"Failed to update user. Please try again later."})}finally{U("")}else R({type:"error",title:"Validation Error",message:e.errors.join(", ")})},formData:T,setFormData:_,isEdit:!0,loading:"update"===O,showPassword:P,setShowPassword:A})]})})}},Symbol.toStringTag,{value:"Module"})),Ie=Object.freeze(Object.defineProperty({__proto__:null,ProductManagement:()=>{const{products:t,deleteProduct:n,loading:c}=De(),{showNotification:d}=Ee(),[m,u]=e.useState(!1),[g,h]=e.useState(null),[p,f]=e.useState(""),[k,S]=e.useState("all"),[P,A]=e.useState([]),[E,D]=e.useState(!1),[O,U]=e.useState("name"),[F,L]=e.useState("asc"),[T,_]=e.useState("all"),[R,M]=e.useState({min:0,max:1e3}),[$,I]=e.useState("table"),[V,B]=e.useState(!1),[z,q]=e.useState(!1),W=["all",...Array.from(new Set(t.map(e=>e.category)))],G=e.useMemo(()=>{const e=t.filter(e=>{const s=e.name.toLowerCase().includes(p.toLowerCase())||e.description.toLowerCase().includes(p.toLowerCase()),t="all"===k||e.category===k;let a=!0;"in-stock"===T?a=e.stock>10:"low-stock"===T?a=e.stock>0&&e.stock<=10:"out-of-stock"===T&&(a=0===e.stock);const r=e.price>=R.min&&e.price<=R.max;return s&&t&&a&&r});return e.sort((e,s)=>{let t,a;switch(O){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"price":t=e.price,a=s.price;break;case"stock":t=e.stock,a=s.stock;break;case"createdAt":t=new Date(e.createdAt||0).getTime(),a=new Date(s.createdAt||0).getTime();break;default:return 0}return t<a?"asc"===F?-1:1:t>a?"asc"===F?1:-1:0}),e},[t,p,k,T,R,O,F]),H=()=>{h(null),u(!0)},Z=e=>{h(e),u(!0)},J=e=>{window.confirm(`Are you sure you want to delete "${e.name}"?`)&&(n(e.id),d({type:"success",title:"Product Deleted",message:`${e.name} has been deleted successfully.`}))},Y=e=>{A(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},Q=async e=>{if(0!==P.length)try{A([]),d({type:"success",title:"Products Updated",message:`${P.length} products have been ${"active"===e?"activated":"deactivated"}.`})}catch(s){d({type:"error",title:"Error",message:"Failed to update products. Please try again."})}},K=e=>{O===e?L("asc"===F?"desc":"asc"):(U(e),L("asc"))},X=e=>0===e?{text:"Out of Stock",color:"text-red-600 bg-red-100"}:e<10?{text:"Low Stock",color:"text-yellow-600 bg-yellow-100"}:{text:"In Stock",color:"text-green-600 bg-green-100"},ee=[{key:"select",title:s.jsx("button",{onClick:()=>{P.length===G.length?A([]):A(G.map(e=>e.id))},className:"flex items-center justify-center w-full",children:P.length===G.length&&G.length>0?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})}),width:50,render:(e,t)=>s.jsx("button",{onClick:e=>{e.stopPropagation(),Y(t.id)},className:"flex items-center justify-center w-full",children:P.includes(t.id)?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})})},{key:"product",title:s.jsxs("button",{onClick:()=>K("name"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Product"}),"name"===O&&("asc"===F?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),minWidth:200,render:(e,t)=>{var a;return s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:t.images&&t.images.length>0&&t.images[0]||"https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image",alt:t.name,className:"h-12 w-12 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:[null==(a=t.description)?void 0:a.slice(0,50),"..."]})]})]})}},{key:"category",title:"Category",width:100,render:e=>s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e})},{key:"price",title:s.jsxs("button",{onClick:()=>K("price"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Price"}),"price"===O&&("asc"===F?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),width:120,render:(e,t)=>s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₹",t.price.toFixed(2)]}),t.originalPrice&&s.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["₹",t.originalPrice.toFixed(2)]}),t.originalPrice&&s.jsxs("div",{className:"text-xs text-green-600 font-medium",children:[Math.round((t.originalPrice-t.price)/t.originalPrice*100),"% off"]})]})},{key:"stock",title:s.jsxs("button",{onClick:()=>K("stock"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Stock"}),"stock"===O&&("asc"===F?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),width:120,render:(e,t)=>{const a=X(t.stock);return s.jsxs("div",{children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.color}`,children:a.text}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[t.stock," units"]})]})}},{key:"sellerName",title:"Seller",width:120,render:e=>s.jsx("span",{className:"text-sm text-gray-900",children:e})},{key:"actions",title:"Actions",width:120,render:(e,t)=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),Z(t)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Product",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:s.jsx(N,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Duplicate Product",children:s.jsx(w,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),J(t)},className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Product",children:s.jsx(o,{className:"h-4 w-4"})})]})}];return c?s.jsx(ie,{text:"Loading products..."}):s.jsx(be,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all products across the platform (",G.length," of ",t.length," products)"]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[s.jsxs("button",{onClick:async()=>{q(!0);try{await new Promise(e=>setTimeout(e,1e3)),d({type:"success",title:"Refreshed",message:"Product data has been refreshed."})}catch(e){d({type:"error",title:"Refresh Failed",message:"Failed to refresh data. Please try again."})}finally{q(!1)}},disabled:z,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(i,{className:"h-4 w-4 "+(z?"animate-spin":"")}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:async()=>{B(!0);try{await new Promise(e=>setTimeout(e,2e3)),d({type:"success",title:"Export Complete",message:"Products have been exported successfully."})}catch(e){d({type:"error",title:"Export Failed",message:"Failed to export products. Please try again."})}finally{B(!1)}},disabled:V,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(r,{className:"h-4 w-4"}),s.jsx("span",{children:V?"Exporting...":"Export"})]}),s.jsxs(Le.button,{onClick:H,className:"btn-primary flex items-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(a,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Product"})]})]})]}),s.jsx(Te,{children:P.length>0&&s.jsx(Le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[P.length," product",1!==P.length?"s":""," selected"]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>Q("active"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Activate"}),s.jsx("button",{onClick:()=>Q("inactive"),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 text-sm",children:"Deactivate"}),s.jsx("button",{onClick:async()=>{if(0!==P.length&&window.confirm(`Are you sure you want to delete ${P.length} products?`))try{for(const e of P)await n(e);A([]),d({type:"success",title:"Products Deleted",message:`${P.length} products have been deleted successfully.`})}catch(e){d({type:"error",title:"Error",message:"Failed to delete some products. Please try again."})}},className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),s.jsx("button",{onClick:()=>A([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:()=>I("table"===$?"grid":"table"),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm",children:"table"===$?"Grid View":"Table View"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Products"}),s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsx("select",{value:k,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:W.map(e=>s.jsx("option",{value:e,children:"all"===e?"All Categories":e},e))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),s.jsxs("select",{value:T,onChange:e=>_(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"all",children:"All Stock Levels"}),s.jsx("option",{value:"in-stock",children:"In Stock"}),s.jsx("option",{value:"low-stock",children:"Low Stock"}),s.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",value:R.min,onChange:e=>M(s=>({...s,min:Number(e.target.value)})),placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),s.jsx("input",{type:"number",value:R.max,onChange:e=>M(s=>({...s,max:Number(e.target.value)})),placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(p||"all"!==k||"all"!==T||R.min>0||R.max<1e3)&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",G.length," of ",t.length," products"]}),s.jsx("button",{onClick:()=>{f(""),S("all"),_("all"),M({min:0,max:1e3})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),c?s.jsx(je,{count:8}):0===G.length?s.jsx(ve,{icon:s.jsx(C,{className:"h-24 w-24"}),title:"No products found",description:"No products match your current filters. Try adjusting your search criteria or add a new product.",action:{label:"Add Product",onClick:H}}):"table"===$?s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx(le,{columns:ee,data:G,loading:c,emptyMessage:"No products found",onRowClick:Z})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:G.map(e=>s.jsxs(Le.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Z(e),children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e.images&&e.images.length>0&&e.images[0]||"https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image",alt:e.name,className:"w-full h-48 object-cover",onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("button",{onClick:s=>{s.stopPropagation(),Y(e.id)},className:"p-1 bg-white rounded-md shadow-sm",children:P.includes(e.id)?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})})}),s.jsx("div",{className:"absolute top-2 right-2",children:(()=>{const t=X(e.stock);return s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.color}`,children:t.text})})()})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 truncate",children:e.name}),s.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",e.price.toFixed(2)]}),e.originalPrice&&s.jsxs("span",{className:"text-sm text-gray-500 line-through ml-2",children:["₹",e.originalPrice.toFixed(2)]})]}),s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e.category})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:[e.stock," units"]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:s=>{s.stopPropagation(),Z(e)},className:"p-1 text-indigo-600 hover:text-indigo-900 rounded hover:bg-indigo-50",title:"Edit Product",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{onClick:s=>{s.stopPropagation(),J(e)},className:"p-1 text-red-600 hover:text-red-900 rounded hover:bg-red-50",title:"Delete Product",children:s.jsx(o,{className:"h-4 w-4"})})]})]})]})]},e.id))}),s.jsx(Ne,{isOpen:m,onClose:()=>u(!1),title:g?"Edit Product":"Add New Product",size:"xl",children:s.jsx(Fe,{product:g,onClose:()=>u(!1)})})]})})}},Symbol.toStringTag,{value:"Module"})),Ve=Object.freeze(Object.defineProperty({__proto__:null,OrderManager:()=>{const[t,a]=e.useState([]),[n,o]=e.useState(!0),[c,d]=e.useState(""),[m,u]=e.useState("all"),[h,p]=e.useState(null),[w,D]=e.useState([]),[O,U]=e.useState("created_at"),[F,L]=e.useState("desc"),[T,_]=e.useState({start:"",end:""}),[R,M]=e.useState({min:0,max:1e4}),[$,I]=e.useState(""),[V,B]=e.useState(!1),[z,q]=e.useState(!1),[W,G]=e.useState(!1),[H,Z]=e.useState(!1),{showNotification:J}=Ee();e.useEffect(()=>{Q()},[]);const Y=e.useMemo(()=>{const e=t.filter(e=>{const s=e.profiles.name.toLowerCase().includes(c.toLowerCase())||e.profiles.email.toLowerCase().includes(c.toLowerCase())||e.id.toLowerCase().includes(c.toLowerCase()),t="all"===m||e.status===m,a=!$||e.profiles.name.toLowerCase().includes($.toLowerCase())||e.profiles.email.toLowerCase().includes($.toLowerCase()),r=e.total>=R.min&&e.total<=R.max;let i=!0;if(T.start&&T.end){const s=new Date(e.created_at),t=new Date(T.start),a=new Date(T.end);i=s>=t&&s<=a}return s&&t&&a&&r&&i});return e.sort((e,s)=>{let t,a;switch(O){case"created_at":t=new Date(e.created_at).getTime(),a=new Date(s.created_at).getTime();break;case"total":t=e.total,a=s.total;break;case"status":t=e.status,a=s.status;break;default:return 0}return t<a?"asc"===F?-1:1:t>a?"asc"===F?1:-1:0}),e},[t,c,m,$,R,T,O,F]),Q=async()=>{try{const{data:e,error:s}=await ae.from("orders").select("\n          id,\n          total,\n          status,\n          created_at,\n          user_id,\n          profiles!inner(email, name),\n          order_items(\n            id,\n            quantity,\n            price,\n            products(name, image)\n          )\n        ").order("created_at",{ascending:!1});if(s)throw s;const t=(e||[]).map(e=>{var s,t;return{id:e.id,total:e.total,status:e.status,created_at:e.created_at,user_id:e.user_id,profiles:{email:(null==(s=e.profiles)?void 0:s.email)||"",name:(null==(t=e.profiles)?void 0:t.name)||""},order_items:(e.order_items||[]).map(e=>{var s,t;return{id:e.id,quantity:e.quantity,price:e.price,products:{name:(null==(s=e.products)?void 0:s.name)||"",image:(null==(t=e.products)?void 0:t.image)||""}}})}});a(t)}catch(e){}finally{o(!1)}},K=async(e,s)=>{try{const{error:r}=await ae.from("orders").update({status:s}).eq("id",e);if(r)throw r;a(t.map(t=>t.id===e?{...t,status:s}:t)),J({type:"success",title:"Order Updated",message:`Order status updated to ${s} successfully!`})}catch(r){J({type:"error",title:"Update Failed",message:"Failed to update order status. Please try again."})}},X=async e=>{if(0!==w.length)try{const{error:s}=await ae.from("orders").update({status:e}).in("id",w);if(s)throw s;a(t.map(s=>w.includes(s.id)?{...s,status:e}:s)),D([]),J({type:"success",title:"Orders Updated",message:`${w.length} orders updated to ${e} successfully!`})}catch(s){J({type:"error",title:"Update Failed",message:"Failed to update orders. Please try again."})}},ee=e=>{O===e?L("asc"===F?"desc":"asc"):(U(e),L("asc"))},se=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},te=e=>{switch(e){case"pending":return s.jsx(f,{className:"h-4 w-4"});case"confirmed":case"shipped":case"delivered":return s.jsx(g,{className:"h-4 w-4"});case"cancelled":return s.jsx(E,{className:"h-4 w-4"});default:return s.jsx(C,{className:"h-4 w-4"})}},re=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),ie=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ne=[{key:"select",title:s.jsx("button",{onClick:()=>{w.length===Y.length?D([]):D(Y.map(e=>e.id))},className:"flex items-center justify-center w-full",children:w.length===Y.length&&Y.length>0?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})}),width:50,render:(e,t)=>s.jsx("button",{onClick:e=>{var s;e.stopPropagation(),s=t.id,D(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},className:"flex items-center justify-center w-full",children:w.includes(t.id)?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})})},{key:"id",title:s.jsxs("button",{onClick:()=>ee("created_at"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Order ID"}),"created_at"===O&&("asc"===F?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),width:120,render:e=>s.jsxs("span",{className:"font-medium",children:["#",e.slice(0,8)]})},{key:"customer",title:"Customer",minWidth:200,render:(e,t)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:s.jsx(k,{className:"h-4 w-4 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:t.profiles.name}),s.jsx("div",{className:"text-gray-500 text-sm",children:t.profiles.email})]})]})},{key:"total",title:s.jsxs("button",{onClick:()=>ee("total"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Total"}),"total"===O&&("asc"===F?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),width:120,render:e=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(S,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:re(e)})]})},{key:"status",title:s.jsxs("button",{onClick:()=>ee("status"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Status"}),"status"===O&&("asc"===F?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),width:140,render:e=>s.jsxs("span",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${se(e)}`,children:[te(e),s.jsx("span",{className:"capitalize",children:e})]})},{key:"created_at",title:"Date",width:150,render:e=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(P,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:ie(e)})]})},{key:"actions",title:"Actions",width:150,render:(e,t)=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),p(t),B(!0)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"View Details",children:s.jsx(N,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),p(t),q(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Order",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Print Invoice",children:s.jsx(A,{className:"h-4 w-4"})}),"pending"===t.status&&s.jsx("button",{onClick:e=>{e.stopPropagation(),K(t.id,"confirmed")},className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700",title:"Confirm Order",children:"Confirm"}),"confirmed"===t.status&&s.jsx("button",{onClick:e=>{e.stopPropagation(),K(t.id,"shipped")},className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",title:"Mark as Shipped",children:"Ship"})]})}];return n?s.jsx(we,{type:"orders",message:"Loading order data..."}):s.jsx(be,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all customer orders (",Y.length," of ",t.length," orders)"]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[s.jsxs("button",{onClick:async()=>{G(!0),await Q(),G(!1),J({type:"success",title:"Refreshed",message:"Order data has been refreshed."})},disabled:W,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(i,{className:"h-4 w-4 "+(W?"animate-spin":"")}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:async()=>{Z(!0);try{await new Promise(e=>setTimeout(e,2e3)),J({type:"success",title:"Export Complete",message:"Orders have been exported successfully."})}catch(e){J({type:"error",title:"Export Failed",message:"Failed to export orders. Please try again."})}finally{Z(!1)}},disabled:H,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(r,{className:"h-4 w-4"}),s.jsx("span",{children:H?"Exporting...":"Export"})]})]})]}),s.jsx(Te,{children:w.length>0&&s.jsx(Le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[w.length," order",1!==w.length?"s":""," selected"]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>X("confirmed"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Confirm"}),s.jsx("button",{onClick:()=>X("shipped"),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200 text-sm",children:"Ship"}),s.jsx("button",{onClick:()=>X("cancelled"),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Cancel"}),s.jsx("button",{onClick:async()=>{if(0!==w.length&&window.confirm(`Are you sure you want to delete ${w.length} orders? This action cannot be undone.`))try{const{error:e}=await ae.from("orders").delete().in("id",w);if(e)throw e;a(t.filter(e=>!w.includes(e.id))),D([]),J({type:"success",title:"Orders Deleted",message:`${w.length} orders deleted successfully!`})}catch(e){J({type:"error",title:"Delete Failed",message:"Failed to delete orders. Please try again."})}},className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),s.jsx("button",{onClick:()=>D([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Orders"}),s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Search by order ID, customer...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"shipped",children:"Shipped"}),s.jsx("option",{value:"delivered",children:"Delivered"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"date",value:T.start,onChange:e=>_(s=>({...s,start:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),s.jsx("input",{type:"date",value:T.end,onChange:e=>_(s=>({...s,end:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Range"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",value:R.min,onChange:e=>M(s=>({...s,min:Number(e.target.value)})),placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),s.jsx("input",{type:"number",value:R.max,onChange:e=>M(s=>({...s,max:Number(e.target.value)})),placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(c||"all"!==m||T.start||T.end||R.min>0||R.max<1e4)&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",Y.length," of ",t.length," orders"]}),s.jsx("button",{onClick:()=>{d(""),u("all"),_({start:"",end:""}),M({min:0,max:1e4}),I("")},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),0===Y.length?s.jsx(ve,{icon:s.jsx(C,{className:"h-24 w-24"}),title:"No orders found",description:"No orders match your current filters. Try adjusting your search criteria."}):s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx(le,{columns:ne,data:Y,loading:n,emptyMessage:"No orders found",onRowClick:e=>{p(e),B(!0)}})}),s.jsx(Ne,{isOpen:V,onClose:()=>{B(!1),p(null)},title:h?`Order #${h.id.slice(0,8)}`:"Order Details",size:"xl",children:h&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(k,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Customer Information"]}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Name:"}),s.jsx("span",{className:"font-medium",children:h.profiles.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Email:"}),s.jsx("span",{className:"font-medium",children:h.profiles.email})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(C,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Order Information"]}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Date:"}),s.jsx("span",{className:"font-medium",children:ie(h.created_at)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsxs("span",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${se(h.status)}`,children:[te(h.status),s.jsx("span",{className:"capitalize",children:h.status})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total:"}),s.jsx("span",{className:"font-medium text-lg",children:re(h.total)})]})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),s.jsx("div",{className:"space-y-3",children:h.order_items.map(e=>s.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("img",{src:e.products.image||"/placeholder-image.jpg",alt:e.products.name,className:"h-16 w-16 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="/placeholder-image.jpg"}}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:e.products.name}),s.jsxs("p",{className:"text-gray-600",children:["Quantity: ",e.quantity]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium text-gray-900",children:re(e.price*e.quantity)}),s.jsxs("p",{className:"text-gray-600 text-sm",children:[re(e.price)," each"]})]})]},e.id))})]})]})}),s.jsx(Ne,{isOpen:z,onClose:()=>{q(!1),p(null)},title:h?`Edit Order #${h.id.slice(0,8)}`:"Edit Order",size:"lg",children:h&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),s.jsxs("select",{value:h.status,onChange:e=>K(h.id,e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"shipped",children:"Shipped"}),s.jsx("option",{value:"delivered",children:"Delivered"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Save Changes"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Be=Object.freeze(Object.defineProperty({__proto__:null,CategoryManagement:()=>{const{categories:t,addCategory:n,updateCategory:c,deleteCategory:d,loading:m}=De(),{showNotification:u}=Ee(),[g,h]=e.useState(!1),[p,f]=e.useState(null),[k,S]=e.useState(""),[P,A]=e.useState({name:"",slug:"",description:"",image:"",isActive:!0,sortOrder:0}),[E,U]=e.useState(""),[F,L]=e.useState([]),[T,_]=e.useState("name"),[R,M]=e.useState("asc"),[$,I]=e.useState("all"),[V,B]=e.useState("table"),[z,q]=e.useState(!1),[W,G]=e.useState(!1),[H,Z]=e.useState(!1);e.useEffect(()=>{(async()=>{try{await _e.initializeBucket()}catch(e){}})()},[]);const J=e.useMemo(()=>{const e=t.filter(e=>{const s=e.name.toLowerCase().includes(k.toLowerCase())||e.description&&e.description.toLowerCase().includes(k.toLowerCase()),t="all"===$||"active"===$&&e.isActive||"inactive"===$&&!e.isActive;return s&&t});return e.sort((e,s)=>{let t,a;switch(T){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"productCount":t=e.productCount||0,a=s.productCount||0;break;case"sortOrder":t=e.sortOrder||0,a=s.sortOrder||0;break;case"createdAt":t=new Date(e.createdAt||0).getTime(),a=new Date(s.createdAt||0).getTime();break;default:return 0}return t<a?"asc"===R?-1:1:t>a?"asc"===R?1:-1:0}),e},[t,k,$,T,R]),Y=()=>{f(null),A({name:"",slug:"",description:"",image:"",isActive:!0,sortOrder:0}),U(""),h(!0)},Q=e=>{f(e),A({name:e.name,slug:e.slug||"",description:e.description||"",image:e.image,isActive:e.isActive||!0,sortOrder:e.sortOrder||0}),U(""),h(!0)},K=async e=>{if(e.productCount&&e.productCount>0)u({type:"error",title:"Cannot Delete Category",message:`This category has ${e.productCount} products. Please move or delete them first.`});else if(window.confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{await d(e.id),u({type:"success",title:"Category Deleted",message:`${e.name} has been deleted successfully.`})}catch(s){u({type:"error",title:"Deletion Failed",message:`Failed to delete category: ${s instanceof Error?s.message:"Unknown error"}`})}},X=e=>{L(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},ee=async e=>{if(0!==F.length)try{for(const s of F){const a=t.find(e=>e.id===s);a&&await c({...a,isActive:e})}L([]),u({type:"success",title:"Categories Updated",message:`${F.length} categories have been ${e?"activated":"deactivated"}.`})}catch(s){u({type:"error",title:"Update Failed",message:"Failed to update categories. Please try again."})}},se=e=>{T===e?M("asc"===R?"desc":"asc"):(_(e),M("asc"))},te=e=>{const{name:s,value:t,type:a}=e.target;"checkbox"===a&&e.target instanceof HTMLInputElement?A(t=>({...t,[s]:e.target.checked})):A(e=>({...e,[s]:t}))},ae=[{key:"select",title:s.jsx("button",{onClick:()=>{F.length===J.length?L([]):L(J.map(e=>e.id))},className:"flex items-center justify-center w-full",children:F.length===J.length&&J.length>0?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})}),width:50,render:(e,t)=>s.jsx("button",{onClick:e=>{e.stopPropagation(),X(t.id)},className:"flex items-center justify-center w-full",children:F.includes(t.id)?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})})},{key:"category",title:s.jsxs("button",{onClick:()=>se("name"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Category"}),"name"===T&&("asc"===R?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),minWidth:200,render:(e,t)=>s.jsxs("div",{className:"flex items-center",children:[t.image?s.jsx("img",{src:t.image,alt:t.name,className:"h-12 w-12 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="/placeholder-image.jpg"}}):s.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center border border-gray-200",children:s.jsx(D,{className:"h-6 w-6 text-gray-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.slug&&s.jsxs("div",{className:"text-sm text-gray-500",children:["/",t.slug]}),t.description&&s.jsx("div",{className:"text-xs text-gray-400 mt-1 max-w-xs truncate",children:t.description})]})]})},{key:"productCount",title:s.jsxs("button",{onClick:()=>se("productCount"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Products"}),"productCount"===T&&("asc"===R?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),width:120,render:(e,t)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(C,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[e||0," products"]})]})},{key:"sortOrder",title:s.jsxs("button",{onClick:()=>se("sortOrder"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[s.jsx("span",{children:"Order"}),"sortOrder"===T&&("asc"===R?s.jsx(j,{className:"h-4 w-4"}):s.jsx(v,{className:"h-4 w-4"}))]}),width:80,render:e=>s.jsx("span",{className:"text-sm text-gray-600 font-mono",children:e||0})},{key:"isActive",title:"Status",width:100,render:(e,t)=>s.jsx("div",{className:"flex items-center space-x-2",children:e?s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-1"}),"Active"]}):s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:[s.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-1"}),"Inactive"]})})},{key:"actions",title:"Actions",width:150,render:(e,t)=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),Q(t)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Category",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:s.jsx(N,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Duplicate Category",children:s.jsx(w,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),K(t)},className:"p-1 rounded hover:bg-red-50 "+(t.productCount&&t.productCount>0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900"),title:t.productCount&&t.productCount>0?"Cannot delete - has products":"Delete Category",disabled:t.productCount&&t.productCount>0,children:s.jsx(o,{className:"h-4 w-4"})})]})}];return m?s.jsx(we,{type:"products",message:"Loading category data..."}):s.jsx(be,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Category Management"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage product categories (",J.length," of ",t.length," categories)"]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[s.jsxs("button",{onClick:async()=>{q(!0);try{await new Promise(e=>setTimeout(e,1e3)),u({type:"success",title:"Refreshed",message:"Category data has been refreshed."})}catch(e){u({type:"error",title:"Refresh Failed",message:"Failed to refresh data. Please try again."})}finally{q(!1)}},disabled:z,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(i,{className:"h-4 w-4 "+(z?"animate-spin":"")}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:async()=>{G(!0);try{await new Promise(e=>setTimeout(e,2e3)),u({type:"success",title:"Export Complete",message:"Categories have been exported successfully."})}catch(e){u({type:"error",title:"Export Failed",message:"Failed to export categories. Please try again."})}finally{G(!1)}},disabled:W,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(r,{className:"h-4 w-4"}),s.jsx("span",{children:W?"Exporting...":"Export"})]}),s.jsxs(Le.button,{onClick:Y,className:"btn-primary flex items-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(a,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Category"})]})]})]}),s.jsx(Te,{children:F.length>0&&s.jsx(Le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[F.length," categor",1!==F.length?"ies":"y"," selected"]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>ee(!0),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Activate"}),s.jsx("button",{onClick:()=>ee(!1),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 text-sm",children:"Deactivate"}),s.jsx("button",{onClick:async()=>{if(0===F.length)return;const e=J.filter(e=>F.includes(e.id)&&e.productCount&&e.productCount>0);if(e.length>0)u({type:"error",title:"Cannot Delete Categories",message:`${e.length} categories have products. Please move or delete products first.`});else if(window.confirm(`Are you sure you want to delete ${F.length} categories? This action cannot be undone.`))try{for(const e of F)await d(e);L([]),u({type:"success",title:"Categories Deleted",message:`${F.length} categories have been deleted successfully.`})}catch(s){u({type:"error",title:"Deletion Failed",message:"Failed to delete some categories. Please try again."})}},className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),s.jsx("button",{onClick:()=>L([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>B("table"===V?"grid":"table"),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm",children:"table"===V?"Grid View":"Table View"}),s.jsxs("button",{onClick:()=>Z(!H),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm flex items-center space-x-1",children:[s.jsx(O,{className:"h-4 w-4"}),s.jsx("span",{children:"Hierarchy"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Categories"}),s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:k,onChange:e=>S(e.target.value),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:$,onChange:e=>I(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"active",children:"Active Only"}),s.jsx("option",{value:"inactive",children:"Inactive Only"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),s.jsxs("select",{value:`${T}-${R}`,onChange:e=>{const[s,t]=e.target.value.split("-");_(s),M(t)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),s.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),s.jsx("option",{value:"productCount-desc",children:"Most Products"}),s.jsx("option",{value:"productCount-asc",children:"Least Products"}),s.jsx("option",{value:"sortOrder-asc",children:"Sort Order"}),s.jsx("option",{value:"createdAt-desc",children:"Newest First"}),s.jsx("option",{value:"createdAt-asc",children:"Oldest First"})]})]})]}),(k||"all"!==$)&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",J.length," of ",t.length," categories"]}),s.jsx("button",{onClick:()=>{S(""),I("all")},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),0===J.length?s.jsx(ve,{icon:s.jsx(D,{className:"h-24 w-24"}),title:"No categories found",description:"No categories match your current filters. Try adjusting your search criteria or add a new category.",action:{label:"Add Category",onClick:Y}}):"table"===V?s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx(le,{columns:ae,data:J,loading:m,emptyMessage:"No categories found",onRowClick:Q})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:J.map(e=>s.jsxs(Le.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Q(e),children:[s.jsxs("div",{className:"relative",children:[e.image?s.jsx("img",{src:e.image,alt:e.name,className:"w-full h-32 object-cover",onError:e=>{e.target.src="/placeholder-image.jpg"}}):s.jsx("div",{className:"w-full h-32 bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center",children:s.jsx(D,{className:"h-12 w-12 text-indigo-400"})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("button",{onClick:s=>{s.stopPropagation(),X(e.id)},className:"p-1 bg-white rounded-md shadow-sm",children:F.includes(e.id)?s.jsx(y,{className:"h-4 w-4 text-indigo-600"}):s.jsx(b,{className:"h-4 w-4 text-gray-400"})})}),s.jsx("div",{className:"absolute top-2 right-2",children:e.isActive?s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-1"}),"Active"]}):s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:[s.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-1"}),"Inactive"]})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 truncate",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(C,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[e.productCount||0," products"]})]}),s.jsxs("span",{className:"text-xs text-gray-400",children:["Order: ",e.sortOrder||0]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:["/",e.slug]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:s=>{s.stopPropagation(),Q(e)},className:"p-1 text-indigo-600 hover:text-indigo-900 rounded hover:bg-indigo-50",title:"Edit Category",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{onClick:s=>{s.stopPropagation(),K(e)},className:"p-1 rounded hover:bg-red-50 "+(e.productCount&&e.productCount>0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900"),title:e.productCount&&e.productCount>0?"Cannot delete - has products":"Delete Category",disabled:e.productCount&&e.productCount>0,children:s.jsx(o,{className:"h-4 w-4"})})]})]})]})]},e.id))}),s.jsx(Ne,{isOpen:g,onClose:()=>h(!1),title:p?"Edit Category":"Add New Category",children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{p?(await c({...p,name:P.name,description:P.description,imageUrl:P.image,isActive:P.isActive}),u({type:"success",title:"Category Updated",message:`${P.name} has been updated successfully.`})):(await n({name:P.name,description:P.description,imageUrl:P.image}),u({type:"success",title:"Category Added",message:`${P.name} has been added successfully.`})),h(!1)}catch(s){u({type:"error",title:"Operation Failed",message:`Failed to ${p?"update":"add"} category: ${s instanceof Error?s.message:"Unknown error"}`})}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),s.jsx("input",{type:"text",name:"name",value:P.name,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),s.jsx("input",{type:"text",name:"slug",value:P.slug,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{name:"description",value:P.description,onChange:te,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Image"}),s.jsx(Ce,{value:P.image,onChange:e=>A(s=>({...s,image:e})),onPathChange:U,folder:"categories",placeholder:"Upload category image or enter URL",aspectRatio:"landscape",maxWidth:400,maxHeight:200})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),s.jsx("input",{type:"number",name:"sortOrder",value:P.sortOrder,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"isActive",checked:P.isActive,onChange:te,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:p?"Update Category":"Add Category"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),ze=Object.freeze(Object.defineProperty({__proto__:null,CollectionManagement:({className:t=""})=>{const{collections:n,loading:c,addCollection:d,updateCollection:m,deleteCollection:u,refreshCollections:g}=Oe(),[h,p]=e.useState(!1),[f,y]=e.useState(!1),[b,j]=e.useState(null),[v,C]=e.useState(""),[k,S]=e.useState("all"),[A,E]=e.useState("all"),[O,I]=e.useState("name"),[V,B]=e.useState("asc"),[z,q]=e.useState(!1),[W,G]=e.useState(!1),{showNotification:H}=Ee(),[Z,J]=e.useState({name:"",slug:"",description:"",shortDescription:"",image:"",bannerImage:"",type:"modern",status:"active",price:0,originalPrice:0,discount:0,productIds:[],featured:!1,isExclusive:!1,sortOrder:0,tags:[]}),[Y,Q]=e.useState(""),[K,X]=e.useState("");e.useEffect(()=>{(async()=>{try{await _e.initializeBucket()}catch(e){}})()},[]),e.useEffect(()=>{if(Z.name&&!b){const e=Z.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");J(s=>({...s,slug:e}))}},[Z.name,b]),e.useEffect(()=>{if(Z.price&&Z.originalPrice&&Z.originalPrice>Z.price){const e=Math.round((Z.originalPrice-Z.price)/Z.originalPrice*100);J(s=>({...s,discount:e}))}else J(e=>({...e,discount:0}))},[Z.price,Z.originalPrice]);const ee=e.useMemo(()=>{let e=n.filter(e=>{var s;const t=e.name.toLowerCase().includes(v.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(v.toLowerCase()))||e.tags.some(e=>e.toLowerCase().includes(v.toLowerCase())),a="all"===k||e.status===k,r="all"===A||e.type===A;return t&&a&&r});return e.sort((e,s)=>{var t,a;let r,i;switch(O){case"name":default:r=e.name.toLowerCase(),i=s.name.toLowerCase();break;case"type":r=e.type,i=s.type;break;case"status":r=e.status,i=s.status;break;case"productCount":r=e.productCount,i=s.productCount;break;case"price":r=e.price||0,i=s.price||0;break;case"sortOrder":r=e.sortOrder||0,i=s.sortOrder||0;break;case"createdAt":r=(null==(t=e.createdAt)?void 0:t.getTime())||0,i=(null==(a=s.createdAt)?void 0:a.getTime())||0}return r<i?"asc"===V?-1:1:r>i?"asc"===V?1:-1:0}),e},[n,v,k,A,O,V]),se=()=>{j(null),J({name:"",slug:"",description:"",shortDescription:"",image:"",bannerImage:"",type:"modern",status:"active",price:0,originalPrice:0,discount:0,productIds:[],featured:!1,isExclusive:!1,sortOrder:0,tags:[]}),Q(""),X(""),y(!0)},te=e=>{const{name:s,value:t,type:a}=e.target;if("checkbox"===a){const t=e.target.checked;J(e=>({...e,[s]:t}))}else J("number"===a?e=>({...e,[s]:parseFloat(t)||0}):e=>({...e,[s]:t}))},ae=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"coming_soon":return"bg-blue-100 text-blue-800";case"sold_out":return"bg-red-100 text-red-800"}};return c&&0===n.length?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(ie,{size:"lg"})}):s.jsxs("div",{className:`space-y-6 ${t}`,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Collection Management"}),s.jsxs("p",{className:"text-gray-600",children:["Manage special collections (",ee.length," of ",n.length," collections)"]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:async()=>{q(!0);try{await g()}catch(e){}finally{q(!1)}},disabled:z,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(i,{className:"h-4 w-4 "+(z?"animate-spin":"")}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:async()=>{G(!0);try{await new Promise(e=>setTimeout(e,2e3)),H({type:"success",title:"Export Complete",message:"Collections data has been exported successfully."})}catch(e){H({type:"error",title:"Export Failed",message:"Failed to export data. Please try again."})}finally{G(!1)}},disabled:W,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(r,{className:"h-4 w-4"}),s.jsx("span",{children:W?"Exporting...":"Export"})]}),s.jsxs("button",{onClick:se,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[s.jsx(a,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Collection"})]})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name or description...",value:v,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("select",{value:k,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"coming_soon",children:"Coming Soon"}),s.jsx("option",{value:"sold_out",children:"Sold Out"})]}),s.jsxs("select",{value:A,onChange:e=>E(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"heritage",children:"Heritage"}),s.jsx("option",{value:"seasonal",children:"Seasonal"}),s.jsx("option",{value:"limited",children:"Limited"}),s.jsx("option",{value:"exclusive",children:"Exclusive"}),s.jsx("option",{value:"signature",children:"Signature"}),s.jsx("option",{value:"modern",children:"Modern"})]}),s.jsxs("select",{value:O,onChange:e=>I(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"type",children:"Type"}),s.jsx("option",{value:"status",children:"Status"}),s.jsx("option",{value:"productCount",children:"Product Count"}),s.jsx("option",{value:"price",children:"Price"}),s.jsx("option",{value:"sortOrder",children:"Sort Order"}),s.jsx("option",{value:"createdAt",children:"Created Date"})]}),s.jsx("button",{onClick:()=>B(e=>"asc"===e?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"asc"===V?s.jsx(U,{className:"h-4 w-4"}):s.jsx(F,{className:"h-4 w-4"})})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type & Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(e=>{const t=(e=>{switch(e){case"heritage":return T;case"seasonal":return P;case"limited":return $;case"exclusive":return M;case"signature":return L;case"modern":return R;default:return _}})(e.type);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{src:e.image,alt:e.name,className:"h-12 w-12 rounded-lg object-cover",onError:e=>{e.target.src="/placeholder-collection.jpg"}})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.featured&&s.jsx(L,{className:"h-4 w-4 text-yellow-500"}),e.isExclusive&&s.jsx(T,{className:"h-4 w-4 text-purple-500"})]}),s.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["/",e.slug]}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:e.shortDescription})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(t,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-900 capitalize",children:e.type})]}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ae(e.status)}`,children:e.status.replace("_"," ")})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{className:"h-4 w-4 text-gray-400"}),s.jsxs("span",{className:"text-sm text-gray-900",children:[e.productCount," products"]})]})}),s.jsx("td",{className:"px-6 py-4",children:e.price?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",e.price]}),e.originalPrice&&e.originalPrice>e.price&&s.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["$",e.originalPrice]})]}),e.discount&&e.discount>0&&s.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["-",e.discount,"% off"]})]}):s.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-900",children:e.sortOrder||0})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>(e=>{j(e),J({name:e.name,slug:e.slug||"",description:e.description||"",shortDescription:e.shortDescription||"",image:e.image,bannerImage:e.bannerImage||"",type:e.type,status:e.status,price:e.price||0,originalPrice:e.originalPrice||0,discount:e.discount||0,productIds:e.productIds,featured:e.featured,isExclusive:e.isExclusive,launchDate:e.launchDate,endDate:e.endDate,sortOrder:e.sortOrder||0,tags:e.tags}),Q(""),X(""),y(!0)})(e),className:"p-1 text-gray-400 hover:text-indigo-600",title:"Edit Collection",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{},className:"p-1 text-gray-400 hover:text-blue-600",title:"View Details",children:s.jsx(N,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{},className:"p-1 text-gray-400 hover:text-green-600",title:"Duplicate Collection",children:s.jsx(w,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this collection?"))try{p(!0),await u(e)}catch(s){}finally{p(!1)}})(e.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete Collection",children:s.jsx(o,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),0===ee.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No collections found"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v||"all"!==k||"all"!==A?"Try adjusting your search or filter criteria.":"Get started by creating your first collection."}),!v&&"all"===k&&"all"===A&&s.jsx("div",{className:"mt-6",children:s.jsxs("button",{onClick:se,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[s.jsx(a,{className:"h-4 w-4 mr-2"}),"Add Collection"]})})]})]}),s.jsx(Ne,{isOpen:f,onClose:()=>y(!1),title:b?"Edit Collection":"Add New Collection",size:"xl",children:s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),Z.name.trim())try{p(!0),b?await m(b.id,Z):await d(Z),y(!1)}catch(s){}finally{p(!1)}else H({type:"error",title:"Validation Error",message:"Collection name is required."})},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Collection Name *"}),s.jsx("input",{type:"text",name:"name",value:Z.name,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter collection name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),s.jsx("input",{type:"text",name:"slug",value:Z.slug,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"collection-slug"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),s.jsx("input",{type:"text",name:"shortDescription",value:Z.shortDescription,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Brief description for cards"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{name:"description",value:Z.description,onChange:te,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Detailed collection description"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{name:"type",value:Z.type,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"modern",children:"Modern"}),s.jsx("option",{value:"heritage",children:"Heritage"}),s.jsx("option",{value:"seasonal",children:"Seasonal"}),s.jsx("option",{value:"limited",children:"Limited"}),s.jsx("option",{value:"exclusive",children:"Exclusive"}),s.jsx("option",{value:"signature",children:"Signature"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:Z.status,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"coming_soon",children:"Coming Soon"}),s.jsx("option",{value:"sold_out",children:"Sold Out"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),s.jsx("input",{type:"number",name:"price",value:Z.price,onChange:te,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price ($)"}),s.jsx("input",{type:"number",name:"originalPrice",value:Z.originalPrice,onChange:te,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),s.jsx("input",{type:"number",name:"sortOrder",value:Z.sortOrder,onChange:te,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),s.jsx("input",{type:"text",value:Z.tags.join(", "),onChange:e=>{const s=e.target.value.split(",").map(e=>e.trim()).filter(e=>e);J(e=>({...e,tags:s}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"luxury, premium, exclusive"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"featured",checked:Z.featured,onChange:te,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Featured Collection"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"isExclusive",checked:Z.isExclusive,onChange:te,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Exclusive Collection"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collection Image"}),s.jsx(Ce,{value:Z.image,onChange:e=>J(s=>({...s,image:e})),onPathChange:Q,folder:"collections",placeholder:"Upload collection image or enter URL",aspectRatio:"square",maxWidth:300,maxHeight:300})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner Image (Optional)"}),s.jsx(Ce,{value:Z.bannerImage||"",onChange:e=>J(s=>({...s,bannerImage:e})),onPathChange:X,folder:"collections/banners",placeholder:"Upload banner image or enter URL",aspectRatio:"landscape",maxWidth:600,maxHeight:300})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Launch Date (Optional)"}),s.jsx("input",{type:"date",name:"launchDate",value:Z.launchDate?Z.launchDate.toISOString().split("T")[0]:"",onChange:e=>J(s=>({...s,launchDate:e.target.value?new Date(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date (Optional)"}),s.jsx("input",{type:"date",name:"endDate",value:Z.endDate?Z.endDate.toISOString().split("T")[0]:"",onChange:e=>J(s=>({...s,endDate:e.target.value?new Date(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:[h&&s.jsx(ie,{size:"sm"}),s.jsx("span",{children:b?"Update Collection":"Add Collection"})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),qe=Object.freeze(Object.defineProperty({__proto__:null,CouponManagement:()=>{const[t,r]=e.useState([]),[i,n]=e.useState(!0),[c,d]=e.useState(!1),[m,u]=e.useState(null),[g,h]=e.useState(""),[p,f]=e.useState("all"),[y,b]=e.useState([]),[j,v]=e.useState("createdAt"),[N,w]=e.useState("desc"),[C,k]=e.useState("all"),[S,P]=e.useState("all"),[A,E]=e.useState("all"),[O,U]=e.useState(!1),[F,L]=e.useState(!1),[T,_]=e.useState("table"),{showNotification:R}=Ee(),[M,$]=e.useState({code:"",name:"",description:"",type:"percentage",value:0,minimumAmount:0,maximumDiscount:void 0,usageLimit:void 0,isActive:!0,validFrom:(new Date).toISOString().split("T")[0],validUntil:void 0});e.useEffect(()=>{B()},[]);const B=async()=>{try{n(!0);const{data:e,error:s}=await ae.from("coupons").select("*").order("created_at",{ascending:!1});if(s)throw s;const t=(null==e?void 0:e.map(e=>({id:e.id,code:e.code,name:e.name,description:e.description,type:e.type,value:e.value,minimumAmount:e.minimum_amount,maximumDiscount:e.maximum_discount,usageLimit:e.usage_limit,usedCount:e.used_count,isActive:e.is_active,validFrom:e.valid_from,validUntil:e.valid_until,createdAt:e.created_at})))||[];r(t)}catch(e){}finally{n(!1)}},z=e=>{const{name:s,value:t,type:a}=e.target;"checkbox"===a&&e.target instanceof HTMLInputElement?$(t=>({...t,[s]:e.target.checked})):$("number"===a?e=>({...e,[s]:t?parseFloat(t):0}):e=>({...e,[s]:t}))},q=e.useMemo(()=>{const e=t.filter(e=>{const s=e.code.toLowerCase().includes(g.toLowerCase())||e.name.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase()),t="all"===p||"active"===p&&e.isActive||"inactive"===p&&!e.isActive,a="all"===C||e.type===C,r=new Date,i=new Date(e.validFrom),l=e.validUntil?new Date(e.validUntil):null;let n=!0;"valid"===S?n=e.isActive&&r>=i&&(!l||r<=l):"expired"===S?n=l&&r>l:"upcoming"===S&&(n=r<i);let o=!0;return"unused"===A?o=0===e.usedCount:"partial"===A?o=e.usedCount>0&&(!e.usageLimit||e.usedCount<e.usageLimit):"exhausted"===A&&(o=e.usageLimit&&e.usedCount>=e.usageLimit),s&&t&&a&&n&&o});return e.sort((e,s)=>{let t,a;switch(j){case"code":t=e.code.toLowerCase(),a=s.code.toLowerCase();break;case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"value":t=e.value,a=s.value;break;case"usedCount":t=e.usedCount,a=s.usedCount;break;case"validUntil":t=e.validUntil?new Date(e.validUntil).getTime():0,a=s.validUntil?new Date(s.validUntil).getTime():0;break;case"createdAt":t=new Date(e.createdAt).getTime(),a=new Date(s.createdAt).getTime();break;default:return 0}return t<a?"asc"===N?-1:1:t>a?"asc"===N?1:-1:0}),e},[t,g,p,C,S,A,j,N]);return i?s.jsx(ie,{text:"Loading coupons..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Coupon Management"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Create and manage discount coupons (",t.length," total)"]})]}),s.jsxs(Le.button,{onClick:()=>{u(null),$({code:"",name:"",description:"",type:"percentage",value:0,minimumAmount:0,maximumDiscount:void 0,usageLimit:void 0,isActive:!0,validFrom:(new Date).toISOString().split("T")[0],validUntil:void 0}),d(!0)},className:"btn-primary flex items-center space-x-2 mt-4 lg:mt-0",whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(a,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Coupon"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Coupons"}),s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"Search by code or name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),s.jsxs("select",{value:p,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coupon"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===q.length?s.jsx("tr",{children:s.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[s.jsx(D,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No coupons found"}),s.jsx("p",{className:"text-gray-600",children:g||"all"!==p?"Try adjusting your search or filter criteria.":"Get started by creating your first coupon."})]})}):q.map(e=>s.jsxs(Le.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&s.jsx("div",{className:"text-sm text-gray-500",children:e.description})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800",children:e.code})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:"percentage"===e.type?s.jsxs("span",{className:"flex items-center",children:[s.jsx(I,{className:"h-4 w-4 mr-1"}),e.value,"%"]}):s.jsxs("span",{className:"flex items-center",children:[s.jsx(V,{className:"h-4 w-4 mr-1"}),"₹",e.value]})}),e.minimumAmount>0&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ₹",e.minimumAmount]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[e.usedCount," used"]}),e.usageLimit&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Limit: ",e.usageLimit]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(e.validFrom).toLocaleDateString()}),e.validUntil&&s.jsxs("div",{className:"text-xs text-gray-500",children:["to ",new Date(e.validUntil).toLocaleDateString()]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isActive?s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}):s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Inactive"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>(e=>{u(e),$({code:e.code,name:e.name,description:e.description,type:e.type,value:e.value,minimumAmount:e.minimumAmount,maximumDiscount:e.maximumDiscount,usageLimit:e.usageLimit,isActive:e.isActive,validFrom:e.validFrom.split("T")[0],validUntil:e.validUntil?e.validUntil.split("T")[0]:void 0}),d(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 flex items-center",children:[s.jsx(x,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.jsxs("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this coupon? This action cannot be undone."))try{const{error:s}=await ae.from("coupons").delete().eq("id",e);if(s)throw s;B(),R({type:"success",title:"Coupon Deleted",message:"Coupon has been deleted successfully."})}catch(s){R({type:"error",title:"Delete Failed",message:"Failed to delete coupon. Please try again."})}})(e.id),className:"text-red-600 hover:text-red-900 flex items-center",children:[s.jsx(o,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},e.id))})]})})}),s.jsx(Ne,{isOpen:c,onClose:()=>d(!1),title:m?"Edit Coupon":"Add New Coupon",children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(m){const{error:e}=await ae.from("coupons").update({code:M.code,name:M.name,description:M.description,type:M.type,value:M.value,minimum_amount:M.minimumAmount,maximum_discount:M.maximumDiscount,usage_limit:M.usageLimit,is_active:M.isActive,valid_from:M.validFrom,valid_until:M.validUntil}).eq("id",m.id);if(e)throw e}else{const{error:e}=await ae.from("coupons").insert({code:M.code,name:M.name,description:M.description,type:M.type,value:M.value,minimum_amount:M.minimumAmount,maximum_discount:M.maximumDiscount,usage_limit:M.usageLimit,is_active:M.isActive,valid_from:M.validFrom,valid_until:M.validUntil});if(e)throw e}d(!1),B()}catch(s){}},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Name *"}),s.jsx("input",{type:"text",name:"name",value:M.name,onChange:z,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter coupon name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Code *"}),s.jsx("input",{type:"text",name:"code",value:M.code,onChange:z,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter coupon code"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{name:"description",value:M.description,onChange:z,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter coupon description"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type *"}),s.jsxs("select",{name:"type",value:M.type,onChange:z,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"percentage",children:"Percentage"}),s.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Value *"}),s.jsx("input",{type:"number",name:"value",value:M.value,onChange:z,min:"0",step:"0.01",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter discount value"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Order Amount"}),s.jsx("input",{type:"number",name:"minimumAmount",value:M.minimumAmount,onChange:z,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter minimum amount"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Discount"}),s.jsx("input",{type:"number",name:"maximumDiscount",value:M.maximumDiscount||"",onChange:z,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter maximum discount (optional)"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit"}),s.jsx("input",{type:"number",name:"usageLimit",value:M.usageLimit||"",onChange:z,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter usage limit (optional)"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mr-2",children:"Status"}),s.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[s.jsx("input",{type:"checkbox",name:"isActive",checked:M.isActive,onChange:z,className:"sr-only",id:"status-toggle"}),s.jsx("label",{htmlFor:"status-toggle",className:"block overflow-hidden h-6 rounded-full cursor-pointer "+(M.isActive?"bg-indigo-600":"bg-gray-300"),children:s.jsx("span",{className:"block h-4 w-4 mt-1 rounded-full bg-white shadow transform transition-transform duration-200 ease-in-out "+(M.isActive?"translate-x-5":"translate-x-1")})})]}),s.jsx("span",{className:"text-sm text-gray-600",children:M.isActive?"Active":"Inactive"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From *"}),s.jsx("input",{type:"date",name:"validFrom",value:M.validFrom,onChange:z,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),s.jsx("input",{type:"date",name:"validUntil",value:M.validUntil||"",onChange:z,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500",children:m?"Update Coupon":"Add Coupon"})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),We=Object.freeze(Object.defineProperty({__proto__:null,SettingsManagement:()=>{const[t,a]=e.useState({siteName:"",siteDescription:"",siteUrl:"",contactEmail:"",supportEmail:"",currency:"USD",taxRate:0,shippingFee:0,freeShippingThreshold:0,allowGuestCheckout:!0,requireEmailVerification:!1,enableReviews:!0,enableWishlist:!0,enableCoupons:!0,maintenanceMode:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!0}),[i,n]=e.useState(!0),[o,c]=e.useState(!1),[d,x]=e.useState("general"),[u,g]=e.useState(!1),[h,p]=e.useState(""),[f,y]=e.useState(!1),[b,j]=e.useState(!1),[v,w]=e.useState(!1),[C,k]=e.useState("json"),[S,P]=e.useState(null),[A,E]=e.useState(!1),{showNotification:D}=Ee(),O=[{id:"general",name:"General",icon:G},{id:"ecommerce",name:"E-commerce",icon:H},{id:"features",name:"Features",icon:B},{id:"email",name:"Email",icon:Z},{id:"security",name:"Security",icon:J}];e.useEffect(()=>{U()},[]);const U=async()=>{try{const{data:e,error:s}=await ae.from("system_settings").select("*").single();if(s&&"PGRST116"!==s.code)throw s;e&&a(e)}catch(e){D({type:"error",title:"Error",message:"Failed to load settings"})}finally{n(!1)}},F=(e,s)=>{a(t=>({...t,[e]:s})),E(!0)};return i?s.jsx("div",{className:"p-8",children:s.jsx(ie,{size:"large",text:"Loading settings..."})}):s.jsx(be,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(B,{className:"h-8 w-8 mr-3 text-indigo-600"}),"System Settings"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your store settings and preferences"}),A&&s.jsxs("div",{className:"flex items-center mt-2 text-amber-600",children:[s.jsx(z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"You have unsaved changes"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search settings...",value:h,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),s.jsx(xe,{onClick:()=>y(!0),icon:r,variant:"outline",size:"sm",children:"Export"}),s.jsx(xe,{onClick:()=>j(!0),icon:q,variant:"outline",size:"sm",children:"Import"}),s.jsx(xe,{onClick:()=>w(!0),icon:W,variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Reset"}),s.jsx(xe,{onClick:async()=>{c(!0);try{const{error:e}=await ae.from("system_settings").upsert(t,{onConflict:"id"});if(e)throw e;D({type:"success",title:"Settings Saved",message:"System settings have been updated successfully"})}catch(e){D({type:"error",title:"Error",message:"Failed to save settings"})}finally{c(!1)}},loading:o,icon:m,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:"Save Changes"})]})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:O.map(e=>s.jsxs("button",{onClick:()=>x(e.id),className:(d===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[s.jsx(e.icon,{className:"h-5 w-5"}),s.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["general"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),s.jsx("input",{type:"text",value:t.siteName,onChange:e=>F("siteName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your Store Name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),s.jsx("textarea",{value:t.siteDescription,onChange:e=>F("siteDescription",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Brief description of your store"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site URL"}),s.jsx("input",{type:"url",value:t.siteUrl,onChange:e=>F("siteUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://yourstore.com"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),s.jsx("input",{type:"email",value:t.contactEmail,onChange:e=>F("contactEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contact@yourstore.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Support Email"}),s.jsx("input",{type:"email",value:t.supportEmail,onChange:e=>F("supportEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"support@yourstore.com"})]})]})]}),"ecommerce"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),s.jsxs("select",{value:t.currency,onChange:e=>F("currency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"USD",children:"USD - US Dollar"}),s.jsx("option",{value:"EUR",children:"EUR - Euro"}),s.jsx("option",{value:"GBP",children:"GBP - British Pound"}),s.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:t.taxRate,onChange:e=>F("taxRate",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Fee"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:t.shippingFee,onChange:e=>F("shippingFee",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Free Shipping Threshold"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:t.freeShippingThreshold,onChange:e=>F("freeShippingThreshold",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),"features"===d&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Store Features"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Allow Guest Checkout"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to checkout without creating an account"})]}),s.jsx("button",{type:"button",onClick:()=>F("allowGuestCheckout",!t.allowGuestCheckout),className:(t.allowGuestCheckout?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.allowGuestCheckout?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Require Email Verification"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Require users to verify their email address"})]}),s.jsx("button",{type:"button",onClick:()=>F("requireEmailVerification",!t.requireEmailVerification),className:(t.requireEmailVerification?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.requireEmailVerification?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Reviews"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to leave product reviews"})]}),s.jsx("button",{type:"button",onClick:()=>F("enableReviews",!t.enableReviews),className:(t.enableReviews?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.enableReviews?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Additional Features"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Wishlist"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to save products to wishlist"})]}),s.jsx("button",{type:"button",onClick:()=>F("enableWishlist",!t.enableWishlist),className:(t.enableWishlist?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.enableWishlist?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Coupons"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow discount coupons and promotional codes"})]}),s.jsx("button",{type:"button",onClick:()=>F("enableCoupons",!t.enableCoupons),className:(t.enableCoupons?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.enableCoupons?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Maintenance Mode"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Put the store in maintenance mode"})]}),s.jsx("button",{type:"button",onClick:()=>F("maintenanceMode",!t.maintenanceMode),className:(t.maintenanceMode?"bg-red-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.maintenanceMode?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]})]})}),"email"===d&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SMTP Configuration"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),s.jsx("input",{type:"text",value:t.smtpHost,onChange:e=>F("smtpHost",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"smtp.gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),s.jsx("input",{type:"number",value:t.smtpPort,onChange:e=>F("smtpPort",parseInt(e.target.value)||587),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"587"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),s.jsx("input",{type:"text",value:t.smtpUsername,onChange:e=>F("smtpUsername",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"your-email@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:u?"text":"password",value:t.smtpPassword,onChange:e=>F("smtpPassword",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your SMTP password"}),s.jsx("button",{type:"button",onClick:()=>g(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?s.jsx(Y,{className:"h-4 w-4 text-gray-400"}):s.jsx(N,{className:"h-4 w-4 text-gray-400"})})]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Use Secure Connection (TLS/SSL)"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enable secure email transmission"})]}),s.jsx("button",{type:"button",onClick:()=>F("smtpSecure",!t.smtpSecure),className:(t.smtpSecure?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.smtpSecure?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})})]})}),"security"===d&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Settings"}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx(z,{className:"h-5 w-5 text-yellow-400"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Security Notice"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsx("p",{children:"These settings affect the security of your entire application. Please review carefully before making changes."})})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Require Email Verification"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Force users to verify their email before accessing the store"})]}),s.jsx("button",{type:"button",onClick:()=>F("requireEmailVerification",!t.requireEmailVerification),className:(t.requireEmailVerification?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.requireEmailVerification?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Maintenance Mode"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Temporarily disable public access to the store"})]}),s.jsx("button",{type:"button",onClick:()=>F("maintenanceMode",!t.maintenanceMode),className:(t.maintenanceMode?"bg-red-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:s.jsx("span",{className:(t.maintenanceMode?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Security Recommendations"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"• Enable email verification for new user accounts"}),s.jsx("li",{children:"• Use strong SMTP passwords and enable secure connections"}),s.jsx("li",{children:"• Regularly review and update security settings"}),s.jsx("li",{children:"• Monitor system logs for suspicious activity"})]})]})]})})]}),s.jsx(Ne,{isOpen:f,onClose:()=>y(!1),title:"Export Settings",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),s.jsxs("select",{value:C,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"json",children:"JSON"}),s.jsx("option",{value:"csv",children:"CSV"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{onClick:()=>y(!1),variant:"outline",children:"Cancel"}),s.jsx(xe,{onClick:()=>{const e={...t,exportedAt:(new Date).toISOString(),version:"1.0"};if("json"===C){const s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`settings-export-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(t)}else{const s=Object.entries(e).map(([e,s])=>`${e},${s}`).join("\n"),t=new Blob([s],{type:"text/csv"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`settings-export-${(new Date).toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(a)}y(!1),D({type:"success",title:"Settings Exported",message:`Settings exported successfully as ${C.toUpperCase()}`})},icon:r,children:"Export"})]})]})}),s.jsx(Ne,{isOpen:b,onClose:()=>j(!1),title:"Import Settings",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),s.jsx("input",{type:"file",accept:".json,.csv",onChange:e=>{var s;return P((null==(s=e.target.files)?void 0:s[0])||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Supported formats: JSON, CSV"})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{onClick:()=>{j(!1),P(null)},variant:"outline",children:"Cancel"}),s.jsx(xe,{onClick:async()=>{if(S)try{const e=await S.text();let s;if("application/json"===S.type)s=JSON.parse(e);else{const t=e.split("\n");s={},t.forEach(e=>{const[t,a]=e.split(",");t&&a&&(s[t]=a)})}const r={...t};Object.keys(t).forEach(e=>{void 0!==s[e]&&(r[e]=s[e])}),a(r),E(!0),j(!1),P(null),D({type:"success",title:"Settings Imported",message:"Settings imported successfully. Please review and save changes."})}catch(e){D({type:"error",title:"Import Failed",message:"Failed to import settings. Please check the file format."})}},disabled:!S,icon:q,children:"Import"})]})]})}),s.jsx(Ne,{isOpen:v,onClose:()=>w(!1),title:"Reset Settings",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(z,{className:"h-6 w-6 text-red-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to reset all settings?"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This action will restore all settings to their default values. This cannot be undone."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{onClick:()=>w(!1),variant:"outline",children:"Cancel"}),s.jsx(xe,{onClick:async()=>{try{a({siteName:"",siteDescription:"",siteUrl:"",contactEmail:"",supportEmail:"",currency:"USD",taxRate:0,shippingFee:0,freeShippingThreshold:0,allowGuestCheckout:!0,requireEmailVerification:!1,enableReviews:!0,enableWishlist:!0,enableCoupons:!0,maintenanceMode:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!0}),E(!0),w(!1),D({type:"success",title:"Settings Reset",message:"Settings have been reset to defaults. Please save to apply changes."})}catch(e){D({type:"error",title:"Reset Failed",message:"Failed to reset settings."})}},icon:W,className:"bg-red-600 hover:bg-red-700 text-white",children:"Reset All Settings"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Ge=Object.freeze(Object.defineProperty({__proto__:null,MarketingManagement:()=>{const[t,r]=e.useState([]),[n,c]=e.useState([]),[d,m]=e.useState(null),[u,g]=e.useState(!0),[h,p]=e.useState("overview"),[f,y]=e.useState(""),[b,j]=e.useState(""),[v,C]=e.useState(""),[k,P]=e.useState(!1),[A,E]=e.useState(!1),[D,O]=e.useState(null),[U,F]=e.useState(null),{showNotification:L}=Ee(),T=[{id:"overview",name:"Overview",icon:s.jsx(K,{className:"h-5 w-5"})},{id:"campaigns",name:"Campaigns",icon:s.jsx(Q,{className:"h-5 w-5"})},{id:"promotions",name:"Promotions",icon:s.jsx(_,{className:"h-5 w-5"})},{id:"analytics",name:"Analytics",icon:s.jsx(X,{className:"h-5 w-5"})}];e.useEffect(()=>{R()},[]);const R=async()=>{g(!0);try{await Promise.all([M(),$(),I()])}catch(e){L({type:"error",title:"Error",message:"Failed to load marketing data"})}finally{g(!1)}},M=async()=>{r([{id:"1",name:"Summer Sale Email Campaign",type:"email",status:"active",startDate:"2024-06-01",endDate:"2024-06-30",targetAudience:"All Customers",budget:5e3,spent:3200,impressions:45e3,clicks:2250,conversions:180,revenue:18e3,createdAt:"2024-05-15T10:00:00Z",updatedAt:"2024-06-15T14:30:00Z"},{id:"2",name:"New Product Launch",type:"social",status:"scheduled",startDate:"2024-07-01",endDate:"2024-07-15",targetAudience:"Premium Customers",budget:8e3,spent:0,impressions:0,clicks:0,conversions:0,revenue:0,createdAt:"2024-06-01T09:00:00Z",updatedAt:"2024-06-01T09:00:00Z"}])},$=async()=>{c([{id:"1",name:"Flash Sale - 50% Off Electronics",type:"flash_sale",status:"active",discountType:"percentage",discountValue:50,minimumAmount:100,maxUses:1e3,currentUses:234,startDate:"2024-06-15T00:00:00Z",endDate:"2024-06-17T23:59:59Z",products:["electronics"],categories:["smartphones","laptops"],createdAt:"2024-06-14T10:00:00Z"},{id:"2",name:"Buy One Get One Free - Clothing",type:"bogo",status:"scheduled",discountType:"percentage",discountValue:50,minimumAmount:0,maxUses:500,currentUses:0,startDate:"2024-07-01T00:00:00Z",endDate:"2024-07-31T23:59:59Z",products:[],categories:["clothing"],createdAt:"2024-06-20T15:00:00Z"}])},I=async()=>{m({totalCampaigns:12,activeCampaigns:3,totalBudget:5e4,totalSpent:32e3,totalImpressions:45e4,totalClicks:22500,totalConversions:1800,totalRevenue:18e4,averageCTR:5,averageConversionRate:8,roi:462.5})};return u?s.jsx("div",{className:"p-8",children:s.jsx(ie,{size:"large",text:"Loading marketing data..."})}):s.jsx(be,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(Q,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Marketing & Promotions"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage campaigns, promotions, and marketing analytics"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{onClick:()=>P(!0),icon:a,children:"Create Campaign"}),s.jsx(xe,{onClick:()=>E(!0),icon:_,variant:"secondary",children:"Create Promotion"})]})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:T.map(e=>s.jsxs("button",{onClick:()=>p(e.id),className:(h===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[e.icon,s.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["overview"===h&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Q,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==d?void 0:d.totalCampaigns)||0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(S,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null==(V=null==d?void 0:d.totalRevenue)?void 0:V.toLocaleString())||0]})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(ee,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(null==d?void 0:d.averageConversionRate)||0,"%"]})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(X,{className:"h-6 w-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ROI"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(null==d?void 0:d.roi)||0,"%"]})]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(xe,{onClick:()=>P(!0),icon:a,className:"w-full",children:"Create Campaign"}),s.jsx(xe,{onClick:()=>E(!0),icon:_,variant:"outline",className:"w-full",children:"Create Promotion"}),s.jsx(xe,{onClick:()=>p("analytics"),icon:s.jsx(K,{className:"h-4 w-4"}),variant:"outline",className:"w-full",children:"View Analytics"}),s.jsx(xe,{onClick:R,icon:i,variant:"outline",className:"w-full",children:"Refresh Data"})]})]})]}),"campaigns"===h&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search campaigns...",value:f,onChange:e=>y(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("select",{value:b,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"paused",children:"Paused"}),s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"completed",children:"Completed"})]}),s.jsxs("select",{value:v,onChange:e=>C(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"sms",children:"SMS"}),s.jsx("option",{value:"social",children:"Social"}),s.jsx("option",{value:"banner",children:"Banner"}),s.jsx("option",{value:"popup",children:"Popup"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),s.jsx("div",{className:"text-sm text-gray-500",children:e.targetAudience})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.type})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"paused"===e.status?"bg-yellow-100 text-yellow-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.jsxs("div",{children:["CTR: ",(e.clicks/e.impressions*100).toFixed(2),"%"]}),s.jsxs("div",{children:["Conv: ",(e.conversions/e.clicks*100).toFixed(2),"%"]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.jsxs("div",{children:["$",e.spent.toLocaleString()," / $",e.budget.toLocaleString()]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:e.spent/e.budget*100+"%"}})})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(N,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:"active"===e.status?s.jsx(se,{className:"h-4 w-4"}):s.jsx(te,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(o,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),"promotions"===h&&s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"expired"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Type:"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.type})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Discount:"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"percentage"===e.discountType?`${e.discountValue}%`:"fixed"===e.discountType?`$${e.discountValue}`:"Free Shipping"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Usage:"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.currentUses," / ",e.maxUses]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:e.currentUses/e.maxUses*100+"%"}})}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("span",{children:["Start: ",new Date(e.startDate).toLocaleDateString()]}),s.jsxs("span",{children:["End: ",new Date(e.endDate).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(N,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(x,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:s.jsx(w,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(o,{className:"h-4 w-4"})})]})]},e.id))})}),"analytics"===h&&(()=>{var e,t,a;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Performance"}),s.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"Performance chart will be implemented here"})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"ROI Analysis"}),s.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"ROI chart will be implemented here"})})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detailed Metrics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:null==(e=null==d?void 0:d.totalImpressions)?void 0:e.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500",children:"Total Impressions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-green-600",children:null==(t=null==d?void 0:d.totalClicks)?void 0:t.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500",children:"Total Clicks"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:null==(a=null==d?void 0:d.totalConversions)?void 0:a.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500",children:"Total Conversions"})]})]})]})]})})()]}),s.jsx(Ne,{isOpen:k,onClose:()=>P(!1),title:"Create New Campaign",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Name"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter campaign name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Type"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"email",children:"Email Campaign"}),s.jsx("option",{value:"sms",children:"SMS Campaign"}),s.jsx("option",{value:"social",children:"Social Media"}),s.jsx("option",{value:"banner",children:"Banner Ads"}),s.jsx("option",{value:"popup",children:"Popup Campaign"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget (₹)"}),s.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Image"}),s.jsx(Ce,{value:"",onChange:e=>{},folder:"marketing",placeholder:"Upload campaign image or enter URL",aspectRatio:"landscape",maxWidth:600,maxHeight:300})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{onClick:()=>P(!1),variant:"outline",children:"Cancel"}),s.jsx(xe,{onClick:()=>{P(!1),L({type:"success",title:"Campaign Created",message:"New campaign has been created successfully"})},icon:a,children:"Create Campaign"})]})]})}),s.jsx(Ne,{isOpen:A,onClose:()=>E(!1),title:"Create New Promotion",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Name"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter promotion name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Type"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"flash_sale",children:"Flash Sale"}),s.jsx("option",{value:"bundle",children:"Bundle Deal"}),s.jsx("option",{value:"bogo",children:"Buy One Get One"}),s.jsx("option",{value:"discount",children:"Discount"}),s.jsx("option",{value:"free_shipping",children:"Free Shipping"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Type"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"percentage",children:"Percentage"}),s.jsx("option",{value:"fixed",children:"Fixed Amount"}),s.jsx("option",{value:"free_shipping",children:"Free Shipping"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Value"}),s.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{onClick:()=>E(!1),variant:"outline",children:"Cancel"}),s.jsx(xe,{onClick:()=>{E(!1),L({type:"success",title:"Promotion Created",message:"New promotion has been created successfully"})},icon:_,children:"Create Promotion"})]})]})})]})});var V}},Symbol.toStringTag,{value:"Module"}));export{Be as C,Ge as M,Ve as O,$e as P,We as S,Re as U,Ie as a,ze as b,qe as c};
//# sourceMappingURL=admin-management-CbOY-67A.js.map
