import{j as e,m as c,P as n,n as p,ae as v,L as w,y as O,p as S}from"./index-CZfeFpFF.js";import{r as o,L as h}from"./router-ji7Lkway.js";import{T as g,C as u}from"./truck-CLaVScap.js";import{S as k}from"./square-pen-sypM05a8.js";import"./vendor-DRGAkOw0.js";const C=({history:i})=>{const d=t=>{switch(t){case"Order Placed":return e.jsx(n,{className:"h-5 w-5"});case"Processing":return e.jsx(u,{className:"h-5 w-5"});case"Shipped":return e.jsx(g,{className:"h-5 w-5"});case"Delivered":return e.jsx(p,{className:"h-5 w-5"});default:return e.jsx(n,{className:"h-5 w-5"})}},l=t=>t<i.length;return e.jsxs("div",{className:"py-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Tracking History"}),e.jsx("div",{className:"space-y-8",children:i.map((t,a)=>e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.1},className:"flex space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l(a)?"bg-indigo-600 text-white":"bg-gray-200 text-gray-500"}`,children:d(t.status)}),a<i.length-1&&e.jsx("div",{className:`w-0.5 flex-grow ${l(a+1)?"bg-indigo-600":"bg-gray-200"}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.status}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.date).toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500",children:t.location})]})]},a))})]})},I=()=>{const{orders:i,loading:d,fetchUserOrders:l}=v(),[t,a]=o.useState("all"),[x,j]=o.useState(null);o.useEffect(()=>{l()},[l]);const r=i,y=[{id:"all",name:"All Orders",count:r.length},{id:"processing",name:"Processing",count:r.filter(s=>s.status==="processing").length},{id:"shipped",name:"Shipped",count:r.filter(s=>s.status==="shipped").length},{id:"delivered",name:"Delivered",count:r.filter(s=>s.status==="delivered").length}],m=t==="all"?r:r.filter(s=>s.status===t),N=s=>{switch(s){case"processing":return e.jsx(u,{className:"h-4 w-4"});case"shipped":return e.jsx(g,{className:"h-4 w-4"});case"delivered":return e.jsx(p,{className:"h-4 w-4"});default:return e.jsx(n,{className:"h-4 w-4"})}},f=s=>{switch(s){case"processing":return"bg-yellow-100 text-yellow-700";case"shipped":return"bg-blue-100 text-blue-700";case"delivered":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:e.jsx(n,{className:"h-8 w-8 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Orders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage your orders"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:y.map(s=>e.jsxs("button",{onClick:()=>a(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${t===s.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.name,s.count>0&&e.jsx("span",{className:`ml-2 py-0.5 px-2 rounded-full text-xs ${t===s.id?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"}`,children:s.count})]},s.id))})}),d?e.jsx(w,{text:"Loading your orders..."}):e.jsx("div",{className:"space-y-6",children:m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(n,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-600",children:"You haven't placed any orders yet."}),e.jsx(h,{to:"/products",className:"btn-primary mt-4 inline-block",children:"Start Shopping"})]}):m.map((s,b)=>e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.1},className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-100 cursor-pointer",onClick:()=>j(x===s.id?null:s.id),children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",s.id.slice(0,8)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsxs("span",{className:`inline-flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${f(s.status)}`,children:[N(s.status),e.jsx("span",{className:"capitalize",children:s.status})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 lg:mt-0",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",s.total.toFixed(2)]}),e.jsx(c.div,{animate:{rotate:x===s.id?180:0},children:e.jsx(O,{className:"h-5 w-5 text-gray-500"})})]})]})}),e.jsx(S,{children:x===s.id&&e.jsx(c.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx(C,{history:s.trackingHistory,status:s.status}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-100 flex items-center justify-end",children:e.jsx(h,{to:`/products/${s.items[0].product.id}#reviews`,children:e.jsxs("button",{className:"flex items-center space-x-2 text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:"Write a Review"})]})})})]})})})]},s.id))})]})]})};export{I as OrdersPage,I as default};
