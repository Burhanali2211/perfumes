import{F as M,v as $,j as e,a4 as H,B as f,a1 as I,ac as j,a5 as N,E as y,a0 as U}from"./index-CZfeFpFF.js";import{r as i,b as B,u as J}from"./router-ji7Lkway.js";import"./vendor-DRGAkOw0.js";const G=()=>{const[t,n]=i.useState("login"),[m,v]=i.useState(!1),[u,P]=i.useState(!1),[o,h]=i.useState(!1),[k,S]=i.useState(!1),{signIn:C,signUp:E,user:p}=M(),{showNotification:x}=$(),d=B(),b=J(),[a,A]=i.useState({email:"",password:"",confirmPassword:"",fullName:""}),[r,w]=i.useState({});i.useEffect(()=>{p&&d("/dashboard")},[p,d]),i.useEffect(()=>{const l=new URLSearchParams(b.search).get("mode");l==="signup"?n("signup"):l==="forgot"&&n("forgot")},[b.search]);const R=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),q=s=>s.length>=8,F=()=>{const s={};return a.email?R(a.email)||(s.email="Please enter a valid email address"):s.email="Email is required",t!=="forgot"&&!a.password?s.password="Password is required":t!=="forgot"&&!q(a.password)&&(s.password="Password must be at least 8 characters"),t==="signup"&&(a.fullName.trim()||(s.fullName="Full name is required"),a.password!==a.confirmPassword&&(s.confirmPassword="Passwords do not match")),w(s),Object.keys(s).length===0},g=(s,l)=>{A(c=>({...c,[s]:l})),r[s]&&w(c=>({...c,[s]:""}))},L=async s=>{if(s.preventDefault(),!!F()){h(!0);try{t==="login"?(await C(a.email,a.password),x({type:"success",title:"Welcome back!",message:"Successfully logged in."}),d("/dashboard")):t==="signup"?(await E(a.email,a.password,{fullName:a.fullName}),x({type:"success",title:"Account created!",message:"Account created successfully!"}),d("/dashboard")):t==="forgot"&&(x({type:"success",title:"Password reset sent!",message:"Password reset link sent to your email!"}),n("login"))}catch(l){const c=l instanceof Error?l.message:"An error occurred. Please try again.";x({type:"error",title:"Authentication failed",message:c})}finally{h(!1)}}},D=()=>{d("/")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"S"})}),e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[t==="login"&&"Welcome Back",t==="signup"&&"Create Account",t==="forgot"&&"Reset Password"]}),e.jsxs("p",{className:"text-purple-100 mt-2",children:[t==="login"&&"Sign in to your account",t==="signup"&&"Join our community",t==="forgot"&&"Enter your email to reset your password"]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(H,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",value:a.email,onChange:s=>g("email",s.target.value),className:`block w-full pl-10 pr-3 py-3 border ${r.email?"border-red-300":"border-gray-300"} rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors`,placeholder:"you@example.com",disabled:o,required:!0})]}),r.email&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),r.email]})]}),t==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a.fullName,onChange:s=>g("fullName",s.target.value),className:`block w-full pl-10 pr-3 py-3 border ${r.fullName?"border-red-300":"border-gray-300"} rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors`,placeholder:"John Doe",disabled:o,required:!0})]}),r.fullName&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),r.fullName]})]}),t!=="forgot"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:m?"text":"password",value:a.password,onChange:s=>g("password",s.target.value),className:`block w-full pl-10 pr-10 py-3 border ${r.password?"border-red-300":"border-gray-300"} rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors`,placeholder:"••••••••",disabled:o,required:!0}),e.jsx("button",{type:"button",onClick:()=>v(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":m?"Hide password":"Show password",children:m?e.jsx(N,{className:"h-5 w-5 text-gray-500"}):e.jsx(y,{className:"h-5 w-5 text-gray-500"})})]}),r.password&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),r.password]})]}),t==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:u?"text":"password",value:a.confirmPassword,onChange:s=>g("confirmPassword",s.target.value),className:`block w-full pl-10 pr-10 py-3 border ${r.confirmPassword?"border-red-300":"border-gray-300"} rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors`,placeholder:"••••••••",disabled:o,required:!0}),e.jsx("button",{type:"button",onClick:()=>P(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":u?"Hide password":"Show password",children:u?e.jsx(N,{className:"h-5 w-5 text-gray-500"}):e.jsx(y,{className:"h-5 w-5 text-gray-500"})})]}),r.confirmPassword&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),r.confirmPassword]})]}),t==="login"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:k,onChange:s=>S(s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:o}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):t==="login"?"Sign In":t==="signup"?"Create Account":"Send Reset Link"})}),e.jsx("div",{className:"text-center text-sm text-gray-600",children:t==="login"?e.jsxs("p",{children:["Don't have an account?"," ",e.jsx("button",{type:"button",onClick:()=>n("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none",disabled:o,children:"Sign up"})]}):t==="signup"?e.jsxs("p",{children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>n("login"),className:"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none",disabled:o,children:"Sign in"})]}):e.jsxs("p",{children:["Remember your password?"," ",e.jsx("button",{type:"button",onClick:()=>n("login"),className:"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none",disabled:o,children:"Sign in"})]})})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:D,className:"inline-flex items-center text-sm font-medium text-gray-600 hover:text-indigo-600 transition-colors focus:outline-none",children:"← Return to Home"})})]})})};export{G as default};
