import{q as L,r as z,t as R,v as A,i as P,j as s,m as C,b as $,H as W,w as D,x as E,k as S}from"./index-CZfeFpFF.js";import{r as k,L as y}from"./router-ji7Lkway.js";import{M as p,a as G}from"./MobileTouchButton-C8zq9LKe.js";import{C as I}from"./chevron-left-C9hlcGbE.js";const T=({product:e,variant:l="default"})=>{const{addItem:c}=L(),{addItem:i,isInWishlist:n}=z(),{addItem:j,isInCompare:m}=R(),{showSuccess:o}=A(),[d,f]=k.useState(0),{onTouchStart:x,onTouchMove:u,onTouchEnd:g}=P({onSwipeLeft:()=>{e.images.length>1&&f(a=>a===e.images.length-1?0:a+1)},onSwipeRight:()=>{e.images.length>1&&f(a=>a===0?e.images.length-1:a-1)}}),v=a=>{a.stopPropagation(),a.preventDefault(),e.stock>0&&(c(e),o(`${e.name} has been added to your cart.`,"Added to Cart"))},N=a=>{a.stopPropagation(),a.preventDefault(),i(e),o(`${e.name} has been ${n(e.id)?"removed from":"added to"} your wishlist.`,n(e.id)?"Removed from Wishlist":"Added to Wishlist")},w=a=>{a.stopPropagation(),a.preventDefault(),j(e)},h=e.originalPrice?Math.round((e.originalPrice-e.price)/e.originalPrice*100):0,b={text:e.stock>10?"In Stock":e.stock>0?`${e.stock} left`:"Out of Stock",color:e.stock>10?"bg-green-500":e.stock>0?"bg-orange-500":"bg-red-500"};return l==="compact"?s.jsx(C.div,{className:"bg-white rounded-lg shadow-sm border border-neutral-200 overflow-hidden",whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:25},children:s.jsx(y,{to:`/products/${e.id}`,className:"block",children:s.jsxs("div",{className:"flex",children:[s.jsxs("div",{className:"w-16 sm:w-20 h-16 sm:h-20 flex-shrink-0 relative",children:[s.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}),h>0&&s.jsxs("span",{className:"absolute top-1 left-1 bg-red-500 text-white text-[10px] px-1 py-0.5 rounded font-bold",children:["-",h,"%"]})]}),s.jsxs("div",{className:"flex-1 p-2.5 min-h-[64px] sm:min-h-[80px] flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-neutral-900 text-xs leading-tight line-clamp-2",children:e.name}),s.jsx("p",{className:"text-[10px] text-neutral-500 mt-1",children:e.category})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsxs("span",{className:"font-semibold text-neutral-900 text-xs",children:["₹",e.price.toLocaleString("en-IN")]}),e.originalPrice&&s.jsxs("span",{className:"text-[10px] text-neutral-500 line-through",children:["₹",e.originalPrice.toLocaleString("en-IN")]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx($,{className:"w-2.5 h-2.5 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"text-[10px] text-neutral-600",children:e.rating})]})]})]})]})})}):s.jsxs(C.div,{className:"product-card bg-white overflow-hidden rounded-lg sm:rounded-xl shadow-sm border border-neutral-200",whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:25},children:[s.jsxs("div",{className:"relative",children:[s.jsx(y,{to:`/products/${e.id}`,className:"block",children:s.jsxs("div",{className:"aspect-square relative overflow-hidden",onTouchStart:x,onTouchMove:u,onTouchEnd:g,children:[s.jsx("img",{src:e.images[d]||e.images[0],alt:e.name,className:"w-full h-full object-cover transition-transform duration-300",loading:"lazy"},d),e.images.length>1&&s.jsx("div",{className:"absolute bottom-1.5 left-1/2 transform -translate-x-1/2 flex space-x-1",children:e.images.map((a,t)=>s.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),f(t)},className:`w-1 h-1 rounded-full transition-colors ${t===d?"bg-white":"bg-white/50"}`,"aria-label":`View image ${t+1}`},t))})]})}),s.jsxs("div",{className:"absolute top-1.5 left-1.5 flex flex-col space-y-1",children:[h>0&&s.jsxs("span",{className:"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm",children:["-",h,"%"]}),s.jsxs("span",{className:`${b.color} text-white text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm flex items-center space-x-1`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full bg-white ${e.stock>0?"animate-pulse":""}`}),s.jsx("span",{children:b.text})]})]}),s.jsxs("div",{className:"absolute top-1.5 right-1.5 flex flex-col space-y-1.5",children:[s.jsx(p,{icon:W,onClick:N,variant:n(e.id)?"primary":"secondary",size:"minimum",ariaLabel:n(e.id)?"Remove from wishlist":"Add to wishlist",active:n(e.id)}),s.jsx(p,{icon:D,onClick:w,variant:m(e.id)?"primary":"secondary",size:"minimum",ariaLabel:m(e.id)?"Remove from compare":"Add to compare",active:m(e.id)})]})]}),s.jsxs("div",{className:"p-2.5 sm:p-3 space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-neutral-500 font-medium uppercase tracking-wide",children:e.category}),s.jsx(y,{to:`/products/${e.id}`,children:s.jsx("h3",{className:"font-medium text-neutral-900 text-sm leading-tight line-clamp-2 mt-0.5",children:e.name})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsxs("span",{className:"font-semibold text-neutral-900 text-base",children:["₹",e.price.toLocaleString("en-IN")]}),e.originalPrice&&s.jsxs("span",{className:"text-xs text-neutral-500 line-through",children:["₹",e.originalPrice.toLocaleString("en-IN")]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx($,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"text-xs text-neutral-600 font-medium",children:e.rating})]})]}),s.jsx(G,{onClick:v,disabled:e.stock===0,variant:e.stock===0?"secondary":"primary",size:"comfortable",icon:E,fullWidth:!0,ariaLabel:e.stock===0?"Out of stock":"Add to cart",children:e.stock===0?"Out of Stock":"Add to Cart"})]})]})},M=({products:e,title:l,variant:c="default",itemsPerView:i=1.2,showNavigation:n=!0,autoPlay:j=!1,autoPlayInterval:m=5e3})=>{const[o,d]=k.useState(0),f=k.useRef(null),x=Math.max(0,e.length-Math.floor(i)),u=()=>{d(t=>Math.min(t+1,x))},g=()=>{d(t=>Math.max(t-1,0))},v=t=>{d(Math.min(Math.max(t,0),x))},{onTouchStart:N,onTouchMove:w,onTouchEnd:h}=P({onSwipeLeft:u,onSwipeRight:g},{minSwipeDistance:50,preventDefaultTouchmove:!1});if(!e.length)return null;const b=100/i,a=-(o*b);return s.jsxs("div",{className:"w-full",children:[l&&s.jsxs("div",{className:"flex items-center justify-between mb-3 px-3",children:[s.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:l}),n&&e.length>i&&s.jsxs("div",{className:"flex space-x-1.5",children:[s.jsx(p,{icon:I,onClick:g,disabled:o===0,variant:"secondary",size:"minimum",ariaLabel:"Previous products"}),s.jsx(p,{icon:S,onClick:u,disabled:o>=x,variant:"secondary",size:"minimum",ariaLabel:"Next products"})]})]}),s.jsxs("div",{className:"relative overflow-hidden",children:[s.jsx("div",{ref:f,className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(${a}%)`,width:`${e.length/i*100}%`},onTouchStart:N,onTouchMove:w,onTouchEnd:h,children:e.map((t,r)=>s.jsx("div",{className:"flex-shrink-0 px-1.5",style:{width:`${b}%`},children:s.jsx(T,{product:t,variant:c})},`carousel-product-${t.id}-${r}`))}),n&&e.length>i&&s.jsxs(s.Fragment,{children:[o>0&&s.jsx("button",{onClick:g,className:"absolute left-1.5 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1.5 shadow-md z-10 active:bg-white/80 touch-manipulation","aria-label":"Previous products",children:s.jsx(I,{className:"w-4 h-4 text-neutral-700"})}),o<x&&s.jsx("button",{onClick:u,className:"absolute right-1.5 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1.5 shadow-md z-10 active:bg-white/80 touch-manipulation","aria-label":"Next products",children:s.jsx(S,{className:"w-4 h-4 text-neutral-700"})})]})]}),e.length>i&&s.jsx("div",{className:"flex justify-center mt-3 space-x-1.5",children:Array.from({length:x+1},(t,r)=>s.jsx("button",{onClick:()=>v(r),className:`w-1.5 h-1.5 rounded-full transition-colors duration-200 ${r===o?"bg-neutral-900":"bg-neutral-300 hover:bg-neutral-400"} touch-manipulation`,"aria-label":`Go to slide ${r+1}`},`indicator-${r}`))})]})},H=({products:e,title:l})=>s.jsx(M,{products:e,title:l,variant:"featured",itemsPerView:1,showNavigation:!0,autoPlay:!1,autoPlayInterval:4e3}),X=({products:e,title:l})=>s.jsx(M,{products:e,title:l,variant:"compact",itemsPerView:1.5,showNavigation:!1,autoPlay:!1}),_=({products:e,columns:l=2,variant:c="default"})=>{const i=l===1?"grid-cols-1":"grid-cols-2",n=c==="compact"?"gap-2":"gap-3",j=c==="compact"?"p-3":"px-3";return s.jsx("div",{className:`grid ${i} ${n} ${j} py-4`,children:e.map((m,o)=>s.jsx("div",{className:"touch-manipulation",children:s.jsx(T,{product:m,variant:c})},`mobile-product-${m.id}`))})};export{H as M,X as a,_ as b};
