import{F as P,v as C,j as e,a1 as D,a4 as T,ad as J,f as K,m as v,an as I,J as R,M as O,b as H,B as Y,W as V,ao as _,ap as Q,N as L,ac as X,o as S,aq as ee,ar as $,as as se,at as te,au as ae,O as re,Y as ie}from"./index-CZfeFpFF.js";import{r as m}from"./router-ji7Lkway.js";import{C as le}from"./check-DKHHOl4H.js";import{C as ne}from"./camera-BBIGK9jQ.js";import{S as B}from"./save-KH5sfU-R.js";import{M as ce}from"./Modal-DVXVptVo.js";import{S as z}from"./square-pen-sypM05a8.js";import{T as W}from"./trash-2-y9ynRNkh.js";import{S as G}from"./smartphone-CLjphsQ0.js";import{C as Z}from"./credit-card-DOwGzToR.js";import{G as oe}from"./globe-juN_cdlp.js";import"./vendor-DRGAkOw0.js";const U=()=>{const{user:i,updateProfile:h}=P(),{showNotification:y}=C(),[o,f]=m.useState(!1),[r,d]=m.useState({}),[u,s]=m.useState(!1),[t,p]=m.useState({name:"",email:"",phone:"",dateOfBirth:"",avatar:"",bio:"",location:"",website:""});m.useEffect(()=>{i&&(console.log("🔄 ProfileSettings: Initializing form data with user:",i),p({name:i.name||"",email:i.email||"",phone:i.phone||"",dateOfBirth:i.dateOfBirth||"",avatar:i.avatar||"",bio:"",location:"",website:""}))},[i]);const b=()=>{const a={};if(t.name.trim()?t.name.trim().length<2&&(a.name="Name must be at least 2 characters"):a.name="Name is required",t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(a.email="Please enter a valid email address"):a.email="Email is required",t.phone&&!/^[+]?[1-9][\d]{0,15}$/.test(t.phone.replace(/\s/g,""))&&(a.phone="Please enter a valid phone number"),t.dateOfBirth){const x=new Date(t.dateOfBirth);new Date().getFullYear()-x.getFullYear()<13&&(a.dateOfBirth="You must be at least 13 years old")}return t.website&&!/^https?:\/\/.+/.test(t.website)&&(a.website="Please enter a valid URL (starting with http:// or https://)"),d(a),Object.keys(a).length===0},c=a=>{const{name:x,value:N}=a.target;p(w=>({...w,[x]:N})),r[x]&&d(w=>({...w,[x]:""})),u&&s(!1)},l=async a=>{if(a.preventDefault(),!!i&&b()){f(!0),d({});try{console.log("🔄 ProfileSettings: Starting profile update with data:",t),await h({name:t.name,phone:t.phone,dateOfBirth:t.dateOfBirth,avatar:t.avatar}),s(!0),y({type:"success",title:"Profile Updated",message:"Your profile has been updated successfully"}),console.log("✅ ProfileSettings: Profile update completed successfully")}catch(x){console.error("❌ ProfileSettings: Error updating profile:",x),y({type:"error",title:"Update Failed",message:x instanceof Error?x.message:"An error occurred while updating your profile"})}finally{f(!1)}}},n=a=>{var N;const x=(N=a.target.files)==null?void 0:N[0];if(x){const w=new FileReader;w.onload=q=>{var A;const k=(A=q.target)==null?void 0:A.result;p(E=>({...E,avatar:k}))},w.readAsDataURL(x)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Update your personal information and preferences"})]}),u&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Profile Updated"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your profile has been updated successfully"})]})]})}),e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:t.avatar?e.jsx("img",{src:t.avatar,alt:"Profile",className:"h-full w-full object-cover"}):e.jsx(D,{className:"h-12 w-12 text-gray-400"})}),e.jsxs("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-indigo-600 text-white p-2 rounded-full cursor-pointer hover:bg-indigo-700 transition-colors",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:n,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Profile Photo"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload a new profile photo"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:c,required:!0,className:`input-field pl-10 ${r.name?"border-red-500":""}`,placeholder:"Enter your full name"})]}),r.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(T,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,disabled:!0,className:"input-field pl-10 bg-gray-50 cursor-not-allowed",placeholder:"Email cannot be changed"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email address cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:c,className:`input-field pl-10 ${r.phone?"border-red-500":""}`,placeholder:"Enter your phone number"})]}),r.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:t.dateOfBirth,onChange:c,className:`input-field pl-10 ${r.dateOfBirth?"border-red-500":""}`})]}),r.dateOfBirth&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.dateOfBirth})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{id:"bio",name:"bio",value:t.bio,onChange:c,className:"input-field min-h-[100px]",placeholder:"Tell us a little about yourself"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",id:"location",name:"location",value:t.location,onChange:c,className:"input-field",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsx("input",{type:"url",id:"website",name:"website",value:t.website,onChange:c,className:`input-field ${r.website?"border-red-500":""}`,placeholder:"https://example.com"}),r.website&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.website})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Role"}),e.jsxs("div",{className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("span",{className:"capitalize font-medium text-gray-900",children:i==null?void 0:i.role}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your account role determines your access level and permissions"})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsx(v.button,{type:"submit",disabled:o,className:`btn-primary flex items-center gap-2 ${o?"opacity-70 cursor-not-allowed":""}`,whileHover:o?{}:{scale:1.02},whileTap:o?{}:{scale:.98},children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4"}),"Save Changes"]})})})]})]})},de=({address:i,onClose:h})=>{const{addAddress:y,updateAddress:o}=I(),[f,r]=m.useState(!1),[d,u]=m.useState({fullName:"",streetAddress:"",city:"",state:"",postalCode:"",country:"United States",phone:"",type:"shipping",isDefault:!1});m.useEffect(()=>{i&&u({fullName:i.fullName||"",streetAddress:i.streetAddress||i.street||"",city:i.city||"",state:i.state||"",postalCode:i.postalCode||i.zipCode||"",country:i.country||"United States",phone:i.phone||"",type:i.type||"shipping",isDefault:i.isDefault||!1})},[i]);const s=p=>{const{name:b,value:c,type:l}=p.target;u(n=>({...n,[b]:l==="checkbox"?p.target.checked:c}))},t=async p=>{p.preventDefault(),r(!0);try{i?await o({...i,...d}):await y(d),h()}catch(b){console.error("Error saving address:",b)}finally{r(!1)}};return e.jsxs("form",{onSubmit:t,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-text-primary mb-3",children:"Full Name *"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:d.fullName,onChange:s,required:!0,className:"input-field-luxury",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-text-primary mb-3",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:d.phone,onChange:s,className:"input-field-luxury",placeholder:"Enter your phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"streetAddress",className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),e.jsx("input",{type:"text",id:"streetAddress",name:"streetAddress",value:d.streetAddress,onChange:s,required:!0,className:"input-field",placeholder:"Enter your street address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),e.jsx("input",{type:"text",id:"city",name:"city",value:d.city,onChange:s,required:!0,className:"input-field",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),e.jsx("input",{type:"text",id:"state",name:"state",value:d.state,onChange:s,required:!0,className:"input-field",placeholder:"Enter state"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code *"}),e.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:d.postalCode,onChange:s,required:!0,className:"input-field",placeholder:"Enter postal code"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),e.jsxs("select",{id:"country",name:"country",value:d.country,onChange:s,required:!0,className:"input-field",children:[e.jsx("option",{value:"United States",children:"United States"}),e.jsx("option",{value:"Canada",children:"Canada"}),e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"Australia",children:"Australia"}),e.jsx("option",{value:"India",children:"India"}),e.jsx("option",{value:"Germany",children:"Germany"}),e.jsx("option",{value:"France",children:"France"}),e.jsx("option",{value:"Japan",children:"Japan"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Type *"}),e.jsxs("select",{id:"type",name:"type",value:d.type,onChange:s,required:!0,className:"input-field",children:[e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"billing",children:"Billing"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isDefault",name:"isDefault",checked:d.isDefault,onChange:s,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"isDefault",className:"ml-2 block text-sm text-gray-700",children:["Set as default ",d.type," address"]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(v.button,{type:"button",onClick:h,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),e.jsx(v.button,{type:"submit",disabled:f,className:"flex-1 btn-primary",whileHover:{scale:1.02},whileTap:{scale:.98},children:f?"Saving...":i?"Update Address":"Add Address"})]})]})},me=()=>{const{addresses:i,deleteAddress:h,setDefaultAddress:y,loading:o}=I(),[f,r]=m.useState(!1),[d,u]=m.useState(null),s=()=>{u(null),r(!0)},t=c=>{u(c),r(!0)},p=async c=>{window.confirm("Are you sure you want to delete this address?")&&await h(c)},b=async(c,l)=>{await y(c,l)};return o?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(c=>e.jsx("div",{className:"bg-gray-200 h-32 rounded-lg"},c))})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Addresses"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your shipping and billing addresses"})]}),e.jsxs(v.button,{onClick:s,className:"btn-primary flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(R,{className:"h-4 w-4"}),"Add Address"]})]}),i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No addresses yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first address to get started"}),e.jsx(v.button,{onClick:s,className:"btn-primary",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Add Address"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((c,l)=>e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:c.type||"shipping"}),c.isDefault&&e.jsx(H,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t(c),className:"p-1 text-gray-400 hover:text-indigo-600 transition-colors",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>p(c.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(W,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:c.fullName}),e.jsx("p",{className:"text-gray-600 text-sm",children:c.streetAddress||c.street}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[c.city,", ",c.state," ",c.postalCode||c.zipCode]}),e.jsx("p",{className:"text-gray-600 text-sm",children:c.country}),c.phone&&e.jsx("p",{className:"text-gray-600 text-sm",children:c.phone})]}),!c.isDefault&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b(c.id,"shipping"),className:"flex-1 text-xs px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Set as Default Shipping"}),e.jsx("button",{onClick:()=>b(c.id,"billing"),className:"flex-1 text-xs px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Set as Default Billing"})]})]},c.id))}),e.jsx(ce,{isOpen:f,onClose:()=>r(!1),title:d?"Edit Address":"Add New Address",children:e.jsx(de,{address:d,onClose:()=>r(!1)})})]})},xe=()=>{const{showNotification:i}=C(),{user:h}=P(),[y,o]=m.useState(!0),[f,r]=m.useState(!1),[d,u]=m.useState(null),[s,t]=m.useState({email:{orderUpdates:!0,promotions:!0,newsletter:!1,security:!0,productUpdates:!1},push:{orderUpdates:!0,promotions:!1,newsletter:!1,security:!0,productUpdates:!1},sms:{orderUpdates:!1,promotions:!1,newsletter:!1,security:!0,productUpdates:!1}});m.useEffect(()=>{(async()=>{if(h){o(!0),u(null);try{const n=await _(h.id);n&&(setPreferences(n),t({email:{orderUpdates:n.emailOrderUpdates,promotions:n.emailPromotions,newsletter:n.emailNewsletter,security:n.emailSecurity,productUpdates:n.emailProductUpdates},push:{orderUpdates:n.pushOrderUpdates,promotions:n.pushPromotions,newsletter:n.pushNewsletter,security:n.pushSecurity,productUpdates:n.pushProductUpdates},sms:{orderUpdates:n.smsOrderUpdates,promotions:n.smsPromotions,newsletter:n.smsNewsletter,security:n.smsSecurity,productUpdates:n.smsProductUpdates}}))}catch(n){console.error("Error loading preferences:",n),u("Failed to load notification preferences. Please try again.")}finally{o(!1)}}})()},[h]);const p=(l,n)=>{t(a=>({...a,[l]:{...a[l],[n]:!a[l][n]}}))},b=async()=>{if(h){r(!0),u(null);try{const l={userId:h.id,emailOrderUpdates:s.email.orderUpdates,emailPromotions:s.email.promotions,emailNewsletter:s.email.newsletter,emailSecurity:s.email.security,emailProductUpdates:s.email.productUpdates,pushOrderUpdates:s.push.orderUpdates,pushPromotions:s.push.promotions,pushNewsletter:s.push.newsletter,pushSecurity:s.push.security,pushProductUpdates:s.push.productUpdates,smsOrderUpdates:s.sms.orderUpdates,smsPromotions:s.sms.promotions,smsNewsletter:s.sms.newsletter,smsSecurity:s.sms.security,smsProductUpdates:s.sms.productUpdates};if(await Q(l))i({type:"success",title:"Settings Saved",message:"Your notification preferences have been updated"});else throw new Error("Failed to update preferences")}catch(l){console.error("Error saving preferences:",l),u("Failed to save notification settings. Please try again."),i({type:"error",title:"Save Failed",message:"Failed to save notification settings"})}finally{r(!1)}}},c=[{key:"orderUpdates",title:"Order Updates",description:"Notifications about your order status and delivery"},{key:"promotions",title:"Promotions & Deals",description:"Special offers, discounts, and promotional campaigns"},{key:"newsletter",title:"Newsletter",description:"Weekly newsletter with new products and features"},{key:"security",title:"Security Alerts",description:"Important security notifications and account changes"},{key:"productUpdates",title:"Product Updates",description:"New product launches and feature announcements"}];return y?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Choose how you want to be notified about updates and activities"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4,5].map(l=>e.jsx("div",{className:"bg-gray-200 h-16 rounded-lg"},l))})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Choose how you want to be notified about updates and activities"})]}),d&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:d})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-2 font-medium text-gray-900",children:"Notification Type"}),e.jsx("th",{className:"text-center py-4 px-2 font-medium text-gray-900",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Email"]})}),e.jsx("th",{className:"text-center py-4 px-2 font-medium text-gray-900",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Push"]})}),e.jsx("th",{className:"text-center py-4 px-2 font-medium text-gray-900",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"SMS"]})})]})}),e.jsx("tbody",{children:c.map(l=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:l.title}),e.jsx("div",{className:"text-sm text-gray-600",children:l.description})]})}),e.jsx("td",{className:"py-4 px-2 text-center",children:e.jsx("label",{className:"inline-flex items-center",children:e.jsx("input",{type:"checkbox",checked:s.email[l.key],onChange:()=>p("email",l.key),className:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"})})}),e.jsx("td",{className:"py-4 px-2 text-center",children:e.jsx("label",{className:"inline-flex items-center",children:e.jsx("input",{type:"checkbox",checked:s.push[l.key],onChange:()=>p("push",l.key),className:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"})})}),e.jsx("td",{className:"py-4 px-2 text-center",children:e.jsx("label",{className:"inline-flex items-center",children:e.jsx("input",{type:"checkbox",checked:s.sms[l.key],onChange:()=>p("sms",l.key),className:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"})})})]},l.key))})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("button",{onClick:()=>{t(l=>({email:Object.keys(l.email).reduce((n,a)=>({...n,[a]:!0}),{}),push:Object.keys(l.push).reduce((n,a)=>({...n,[a]:!0}),{}),sms:Object.keys(l.sms).reduce((n,a)=>({...n,[a]:!0}),{})}))},className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors",children:"Enable All"}),e.jsx("button",{onClick:()=>{t(l=>({email:Object.keys(l.email).reduce((n,a)=>({...n,[a]:!1}),{}),push:Object.keys(l.push).reduce((n,a)=>({...n,[a]:!1}),{}),sms:Object.keys(l.sms).reduce((n,a)=>({...n,[a]:!1}),{})}))},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Disable All"}),e.jsx("button",{onClick:()=>{t(l=>({email:{...l.email,security:!0},push:{...l.push,security:!0},sms:{...l.sms,security:!0}}))},className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Security Only"})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsxs(v.button,{onClick:b,disabled:f,className:`btn-primary flex items-center gap-2 ${f?"opacity-70 cursor-not-allowed":""}`,whileHover:f?{}:{scale:1.02},whileTap:f?{}:{scale:.98},children:[e.jsx(B,{className:"h-4 w-4"}),f?"Saving...":"Save Preferences"]})})]})]})},he=()=>{const{user:i,updatePassword:h}=P(),{showNotification:y}=C(),[o,f]=m.useState(!0),[r,d]=m.useState(!1),[u,s]=m.useState(null),[t,p]=m.useState(null),[b,c]=m.useState({current:!1,new:!1,confirm:!1}),[l,n]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""});m.useEffect(()=>{(async()=>{if(i){f(!0),s(null);try{const j=await ee(i.id);j&&p(j)}catch(j){console.error("Error loading security settings:",j),s("Failed to load security settings. Please try again.")}finally{f(!1)}}})()},[i]);const a=g=>{const{name:j,value:M}=g.target;n(F=>({...F,[j]:M}))},x=g=>{c(j=>({...j,[g]:!j[g]}))},N=async(g,j)=>{if(!t)return;const M={...t,[g]:j};p(M),d(!0);try{if(await $({[g]:j}))y({type:"success",title:"Setting Updated",message:"Security setting has been updated successfully"});else throw new Error("Failed to update setting")}catch(F){console.error("Error updating security setting:",F),p(t),y({type:"error",title:"Update Failed",message:"Failed to update security setting"})}finally{d(!1)}},w=async g=>{if(g.preventDefault(),l.newPassword!==l.confirmPassword){y({type:"error",title:"Password Mismatch",message:"New password and confirmation do not match"});return}if(l.newPassword.length<6){y({type:"error",title:"Password Too Short",message:"Password must be at least 6 characters long"});return}d(!0);try{await h(l.newPassword),t&&await $({passwordChangedAt:new Date}),y({type:"success",title:"Password Updated",message:"Your password has been updated successfully"}),n({currentPassword:"",newPassword:"",confirmPassword:""})}catch(j){y({type:"error",title:"Update Failed",message:j instanceof Error?j.message:"Failed to update password"})}finally{d(!1)}},k=(g=>{let j=0;return g.length>=8&&j++,/[A-Z]/.test(g)&&j++,/[a-z]/.test(g)&&j++,/[0-9]/.test(g)&&j++,/[^A-Za-z0-9]/.test(g)&&j++,j})(l.newPassword),A=["Very Weak","Weak","Fair","Good","Strong"],E=["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"];return o?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your password and security preferences"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4].map(g=>e.jsx("div",{className:"bg-gray-200 h-24 rounded-lg"},g))})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your password and security preferences"})]}),u&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(X,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Password"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b.current?"text":"password",id:"currentPassword",name:"currentPassword",value:l.currentPassword,onChange:a,required:!0,className:"input-field pr-10",placeholder:"Enter your current password"}),e.jsx("button",{type:"button",onClick:()=>x("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b.current?e.jsx(EyeOff,{className:"h-4 w-4"}):e.jsx(Eye,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b.new?"text":"password",id:"newPassword",name:"newPassword",value:l.newPassword,onChange:a,required:!0,className:"input-field pr-10",placeholder:"Enter your new password"}),e.jsx("button",{type:"button",onClick:()=>x("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b.new?e.jsx(EyeOff,{className:"h-4 w-4"}):e.jsx(Eye,{className:"h-4 w-4"})})]}),l.newPassword&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(g=>e.jsx("div",{className:`h-2 w-6 rounded-full ${g<=k?E[k-1]:"bg-gray-200"}`},g))}),e.jsx("span",{className:"text-xs text-gray-600",children:k>0?A[k-1]:"Very Weak"})]}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("li",{className:l.newPassword.length>=8?"text-green-600":"",children:"• At least 8 characters"}),e.jsx("li",{className:/[A-Z]/.test(l.newPassword)?"text-green-600":"",children:"• One uppercase letter"}),e.jsx("li",{className:/[a-z]/.test(l.newPassword)?"text-green-600":"",children:"• One lowercase letter"}),e.jsx("li",{className:/[0-9]/.test(l.newPassword)?"text-green-600":"",children:"• One number"}),e.jsx("li",{className:/[^A-Za-z0-9]/.test(l.newPassword)?"text-green-600":"",children:"• One special character"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b.confirm?"text":"password",id:"confirmPassword",name:"confirmPassword",value:l.confirmPassword,onChange:a,required:!0,className:"input-field pr-10",placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",onClick:()=>x("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b.confirm?e.jsx(EyeOff,{className:"h-4 w-4"}):e.jsx(Eye,{className:"h-4 w-4"})})]})]}),e.jsx(v.button,{type:"submit",disabled:r,className:`btn-primary ${r?"opacity-70 cursor-not-allowed":""}`,whileHover:r?{}:{scale:1.02},whileTap:r?{}:{scale:.98},children:r?"Updating...":"Update Password"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Two-Factor Authentication"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:(t==null?void 0:t.twoFactorEnabled)||!1,onChange:()=>N("twoFactorEnabled",!(t!=null&&t.twoFactorEnabled)),disabled:r}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:t!=null&&t.twoFactorEnabled?"Enabled":"Disabled"})]})})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Two-factor authentication adds an extra layer of security to your account by requiring a second form of verification in addition to your password."}),(t==null?void 0:t.twoFactorEnabled)&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Method"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>N("twoFactorMethod","email"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${t.twoFactorMethod==="email"?"bg-indigo-100 text-indigo-700 border border-indigo-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsx(T,{className:"h-4 w-4"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>N("twoFactorMethod","sms"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${t.twoFactorMethod==="sms"?"bg-indigo-100 text-indigo-700 border border-indigo-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsx(G,{className:"h-4 w-4"}),"SMS"]}),e.jsxs("button",{type:"button",onClick:()=>N("twoFactorMethod","authenticator"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${t.twoFactorMethod==="authenticator"?"bg-indigo-100 text-indigo-700 border border-indigo-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsx(Settings,{className:"h-4 w-4"}),"Authenticator App"]})]})]}),t.twoFactorMethod==="sms"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number for SMS Verification"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"tel",className:"input-field flex-1",placeholder:"Enter your phone number",value:t.twoFactorPhone||"",onChange:g=>p({...t,twoFactorPhone:g.target.value})}),e.jsx("button",{type:"button",className:"btn-primary",onClick:()=>N("twoFactorPhone",t.twoFactorPhone),children:"Save"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"h-5 w-5 text-amber-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Alerts"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Login Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when someone logs into your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:(t==null?void 0:t.loginAlerts)||!1,onChange:()=>N("loginAlerts",!(t!=null&&t.loginAlerts)),disabled:r}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Suspicious Activity Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about suspicious account activity"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:(t==null?void 0:t.suspiciousActivityAlerts)||!1,onChange:()=>N("suspiciousActivityAlerts",!(t!=null&&t.suspiciousActivityAlerts)),disabled:r}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(S,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Security Tips"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("li",{children:"• Use a unique password that you don't use anywhere else"}),e.jsx("li",{children:"• Make your password at least 8 characters long"}),e.jsx("li",{children:"• Include a mix of letters, numbers, and special characters"}),e.jsx("li",{children:"• Don't share your password with anyone"}),e.jsx("li",{children:"• Consider using a password manager"}),e.jsx("li",{children:"• Enable two-factor authentication for extra security"})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(S,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Account Security Status"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-green-800",children:"Email Verification"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-green-800",children:"Strong Password"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Active"})]})]})]})]})]})},ue=()=>{const{showNotification:i}=C(),{user:h}=P(),[y,o]=m.useState([]),[f,r]=m.useState(!0),[d,u]=m.useState(!1),[s,t]=m.useState(null);m.useEffect(()=>{(async()=>{if(h){r(!0),t(null);try{const x=await se();o(x)}catch(x){console.error("Error loading payment methods:",x),t("Failed to load payment methods. Please try again.")}finally{r(!1)}}})()},[h]);const p=async a=>{if(h){u(!0);try{if(await te(a))o(N=>N.map(w=>({...w,isDefault:w.id===a}))),i({type:"success",title:"Default Payment Method",message:"Default payment method has been updated"});else throw new Error("Failed to set default payment method")}catch(x){console.error("Error setting default payment method:",x),i({type:"error",title:"Update Failed",message:"Failed to set default payment method"})}finally{u(!1)}}},b=async a=>{if(window.confirm("Are you sure you want to delete this payment method?")){u(!0);try{if(await ae(a))o(N=>N.filter(w=>w.id!==a)),i({type:"success",title:"Payment Method Deleted",message:"Payment method has been deleted successfully"});else throw new Error("Failed to delete payment method")}catch(x){console.error("Error deleting payment method:",x),i({type:"error",title:"Delete Failed",message:"Failed to delete payment method"})}finally{u(!1)}}},c=()=>{i("Add payment method functionality coming soon","info")},l=a=>{i(`Edit payment method ${a.provider} functionality coming soon`,"info")},n=a=>{switch(a.toLowerCase()){case"visa":return"💳";case"mastercard":return"💳";case"amex":case"american express":return"💳";case"paypal":return"💰";default:return"💳"}};return f?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your payment methods and billing information"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(a=>e.jsx("div",{className:"bg-gray-200 h-32 rounded-lg"},a))})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Methods"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your payment methods and billing information"})]}),s&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:s})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-indigo-300 transition-colors",children:[e.jsx(Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add New Payment Method"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add a credit card, debit card, or PayPal account"}),e.jsxs(v.button,{className:"btn-primary flex items-center gap-2 mx-auto",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,children:[e.jsx(R,{className:"h-4 w-4"}),"Add Payment Method"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Payment Methods"}),e.jsx("div",{className:"space-y-4",children:y.map((a,x)=>{var N;return e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-2xl",children:n(a.provider)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[a.provider," •••• ",a.lastFour]}),a.isDefault&&e.jsx(H,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.holderName," • Expires ",(N=a.expiryMonth)==null?void 0:N.toString().padStart(2,"0"),"/",a.expiryYear]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!a.isDefault&&e.jsx("button",{onClick:()=>p(a.id),className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Set as Default"}),e.jsx("button",{onClick:()=>l(a),className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors",disabled:d,children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(a.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",disabled:d,children:e.jsx(W,{className:"h-4 w-4"})})]})]})},a.id)})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Billing Information"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Billing Address:"}),e.jsx("span",{children:"Same as shipping address"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax ID:"}),e.jsx("span",{children:"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Currency:"}),e.jsx("span",{children:"USD ($)"})]})]}),e.jsx("button",{className:"mt-4 text-sm text-blue-700 hover:text-blue-800 font-medium",children:"Update Billing Information"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Security & Privacy"}),e.jsxs("ul",{className:"space-y-2 text-sm text-green-800",children:[e.jsx("li",{children:"• All payment information is encrypted and secure"}),e.jsx("li",{children:"• We never store your full credit card numbers"}),e.jsx("li",{children:"• Payments are processed by trusted payment providers"}),e.jsx("li",{children:"• You can remove payment methods at any time"})]})]})]})]})},pe=()=>{const{showNotification:i}=C(),[h,y]=m.useState(!1),[o,f]=m.useState({site:{siteName:"E-Commerce Platform",siteDescription:"Your one-stop shop for everything",maintenanceMode:!1,allowRegistration:!0,requireEmailVerification:!0},email:{smtpHost:"smtp.gmail.com",smtpPort:"587",smtpUser:"",smtpPassword:"",fromEmail:"noreply@ecommerce.com",fromName:"E-Commerce Platform"},security:{sessionTimeout:"24",maxLoginAttempts:"5",passwordMinLength:"8",requireStrongPassword:!0,enableTwoFactor:!1},data:{dataMode:"real",autoBackup:!0,backupFrequency:"daily",retentionDays:"30"}}),r=(s,t,p)=>{f(b=>({...b,[s]:{...b[s],[t]:p}}))},d=async()=>{y(!0);try{await new Promise(s=>setTimeout(s,1500)),i({type:"success",title:"Settings Saved",message:"Admin settings have been updated successfully"})}catch{i({type:"error",title:"Save Failed",message:"Failed to save admin settings"})}finally{y(!1)}},u=()=>{const s=o.data.dataMode==="real"?"mock":"real";r("data","dataMode",s),localStorage.setItem("ecommerce_data_mode",s),i({type:"info",title:"Data Mode Changed",message:`Switched to ${s} data mode. Refresh the page to see changes.`})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure system-wide settings and preferences"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(oe,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Site Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),e.jsx("input",{type:"text",value:o.site.siteName,onChange:s=>r("site","siteName",s.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),e.jsx("input",{type:"text",value:o.site.siteDescription,onChange:s=>r("site","siteDescription",s.target.value),className:"input-field"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.site.maintenanceMode,onChange:s=>r("site","maintenanceMode",s.target.checked),className:"form-checkbox h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Maintenance Mode"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.site.allowRegistration,onChange:s=>r("site","allowRegistration",s.target.checked),className:"form-checkbox h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow User Registration"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.site.requireEmailVerification,onChange:s=>r("site","requireEmailVerification",s.target.checked),className:"form-checkbox h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Require Email Verification"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(re,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Management"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Mode"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:u,className:`px-4 py-2 rounded-lg font-medium transition-colors ${o.data.dataMode==="real"?"bg-green-100 text-green-700 border border-green-200":"bg-blue-100 text-blue-700 border border-blue-200"}`,children:o.data.dataMode==="real"?"Real Data Mode":"Mock Data Mode"}),e.jsx("span",{className:"text-sm text-gray-600",children:o.data.dataMode==="real"?"Using live database data":"Using demonstration data"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),e.jsxs("select",{value:o.data.backupFrequency,onChange:s=>r("data","backupFrequency",s.target.value),className:"input-field",children:[e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retention Days"}),e.jsx("input",{type:"number",value:o.data.retentionDays,onChange:s=>r("data","retentionDays",s.target.value),className:"input-field"})]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.data.autoBackup,onChange:s=>r("data","autoBackup",s.target.checked),className:"form-checkbox h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable Automatic Backups"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(S,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (hours)"}),e.jsx("input",{type:"number",value:o.security.sessionTimeout,onChange:s=>r("security","sessionTimeout",s.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),e.jsx("input",{type:"number",value:o.security.maxLoginAttempts,onChange:s=>r("security","maxLoginAttempts",s.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Password Length"}),e.jsx("input",{type:"number",value:o.security.passwordMinLength,onChange:s=>r("security","passwordMinLength",s.target.value),className:"input-field"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.security.requireStrongPassword,onChange:s=>r("security","requireStrongPassword",s.target.checked),className:"form-checkbox h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Require Strong Passwords"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.security.enableTwoFactor,onChange:s=>r("security","enableTwoFactor",s.target.checked),className:"form-checkbox h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable Two-Factor Authentication"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsxs(v.button,{onClick:d,disabled:h,className:"btn-primary flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(B,{className:"h-4 w-4"}),h?"Saving...":"Save Settings"]})})]})]})},Ae=()=>{const{user:i}=P(),[h,y]=m.useState("profile"),o=[{id:"profile",name:"Profile",icon:D,description:"Personal information and preferences"},{id:"addresses",name:"Addresses",icon:O,description:"Shipping and billing addresses"},{id:"notifications",name:"Notifications",icon:V,description:"Email and push notification settings"},{id:"security",name:"Security",icon:S,description:"Password and security settings"},{id:"payment",name:"Payment",icon:Z,description:"Payment methods and billing"},...(i==null?void 0:i.role)==="admin"?[{id:"admin",name:"Admin",icon:ie,description:"System administration settings"}]:[]],f=()=>{switch(h){case"profile":return e.jsx(U,{});case"addresses":return e.jsx(me,{});case"notifications":return e.jsx(xe,{});case"security":return e.jsx(he,{});case"payment":return e.jsx(ue,{});case"admin":return(i==null?void 0:i.role)==="admin"?e.jsx(pe,{}):e.jsx(U,{});default:return e.jsx(U,{})}};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsx("nav",{className:"space-y-2",children:o.map(r=>{const d=r.icon;return e.jsxs(v.button,{onClick:()=>y(r.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${h===r.id?"bg-indigo-50 text-indigo-700 border border-indigo-200":"text-gray-700 hover:bg-gray-50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(d,{className:`h-5 w-5 ${h===r.id?"text-indigo-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r.description})]})]},r.id)})})})}),e.jsx("div",{className:"lg:w-3/4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 min-h-[600px]",children:e.jsx(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:f()},h)})})]})]})})};export{Ae as SettingsPage,Ae as default};
