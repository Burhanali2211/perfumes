var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&l(e,t,s[t]);if(a)for(var t of a(s))i.call(s,t)&&l(e,t,s[t]);return e},o=(e,a)=>s(e,t(a)),d=(e,s,t)=>l(e,"symbol"!=typeof s?s+"":s,t),c=(e,s,t)=>new Promise((a,r)=>{var i=e=>{try{n(t.next(e))}catch(s){r(s)}},l=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,l);n((t=t.apply(e,s)).next())});import{u as m,g as x,_ as u,a as h,b as g,c as p,d as y,e as b,f,h as j,i as N,j as v,v as w,s as C,k,l as S,m as P,n as E,o as _,p as A,q as T,r as D}from"./app-core-ClnmP3o8.js";import{r as O,R as F,j as R,W as M,n as I,c as L,k as U,X as $,T as K,h as z,o as B,D as W,p as V,q as G,s as H,t as Z,u as q,v as J,S as Y,w as Q,G as X,x as ee,y as se,z as te,B as ae,J as re,K as ie,a as le,N as ne,O as oe,Q as de,i as ce,V as me,Y as xe,Z as ue,_ as he,$ as ge,a0 as pe,H as ye,U as be,a1 as fe,a2 as je,a3 as Ne,a4 as ve,a5 as we,a6 as Ce,a7 as ke,a8 as Se,a9 as Pe,aa as Ee,ab as _e,ac as Ae,ad as Te,e as De,ae as Oe,af as Fe,ag as Re,ah as Me,M as Ie,P as Le,f as Ue,E as $e,ai as Ke,aj as ze,ak as Be,al as We,am as Ve,an as Ge,ao as He,ap as Ze,aq as qe,ar as Je,as as Ye,C as Qe,b as Xe,l as es,at as ss,au as ts,av as as,aw as rs,ax as is,ay as ls,I as ns,az as os,aA as ds,aB as cs,aC as ms,aD as xs,aE as us,aF as hs,aG as gs,aH as ps,aI as ys,aJ as bs}from"./vendor-react-DowSDiGU.js";import{P as fs}from"./components-product-DbpUUX7Z.js";import{m as js,A as Ns}from"./vendor-animations-DsmzRAY5.js";import{l as vs,s as ws,y as Cs,z as ks,A as Ss,B as Ps,C as Es}from"./vendor-db-C6G_7sOF.js";const _s=O.createContext(void 0),As=()=>{const e=(()=>{const e=O.useContext(_s);if(!e)throw new Error("useNetwork must be used within a NetworkStatusProvider");return e})();return o(n({},e),{getImageProps:(s,t)=>e.shouldLoadImages?{src:s,alt:t,loading:"lazy"}:{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YTNhZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg==",alt:`${t} (Image loading disabled)`,loading:"lazy"},getAnimationProps:()=>e.shouldLoadAnimations?{}:{initial:!1,animate:!1,transition:{duration:0}},getQueryConfig:()=>e.shouldUseOptimizedQueries?{staleTime:3e5,cacheTime:6e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}:{staleTime:0,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}})},Ts=({product:e,className:s="",alt:t,size:a="medium",priority:r="normal",onError:i,onLoad:l})=>{var n;const[o,d]=F.useState(!1),[u,h]=F.useState(0),[g,p]=F.useState(!0),y=As(),{startLoading:b,endLoading:f}=m((null==(n=e.images)?void 0:n[u])||""),j=(()=>{if(e.images&&e.images.length>0){const s=e.images.filter(e=>e&&""!==e.trim()&&!e.includes("placeholder")&&(e.startsWith("http")||e.startsWith("/")));if(s.length>0)return s[u]||s[0]}return null})(),N=!j||o||!y.shouldLoadImages;return F.useEffect(()=>{var s;j&&y.shouldLoadImages&&(s=j,c(null,null,function*(){if(s)try{b(),yield x.addRequest({url:s,priority:r,tags:[`product-${e.id}`,"image"],dependencies:[],dedupKey:`image-${s}`,maxRetries:2,timeout:1e4}),f(!0)}catch(t){f(!1)}}))},[j,r,y.shouldLoadImages]),F.useEffect(()=>{y.shouldLoadImages||p(!1)},[y.shouldLoadImages]),R.jsxs(R.Fragment,{children:[g&&y.shouldLoadImages&&R.jsx("div",{className:`bg-gray-200 animate-pulse ${s}`}),R.jsx("img",{src:N?(e=>{const s=e.charAt(0).toUpperCase(),t=[{bg:"#E3F2FD",text:"#1976D2"},{bg:"#F3E5F5",text:"#7B1FA2"},{bg:"#E8F5E8",text:"#388E3C"},{bg:"#FFF3E0",text:"#F57C00"},{bg:"#FCE4EC",text:"#C2185B"},{bg:"#E0F2F1",text:"#00796B"},{bg:"#FFF8E1",text:"#F9A825"},{bg:"#EFEBE9",text:"#5D4037"}],r=Math.abs(s.charCodeAt(0))%t.length,i=r>=0&&r<t.length?t[r]:t[0],l={small:{width:100,height:100,fontSize:32},medium:{width:200,height:200,fontSize:64},large:{width:400,height:400,fontSize:128}}[a],n=(null==i?void 0:i.bg)||"#E3F2FD",o=(null==i?void 0:i.text)||"#1976D2",d=`\n      <svg width="${l.width}" height="${l.height}" xmlns="http://www.w3.org/2000/svg">\n        <rect width="100%" height="100%" fill="${n}"/>\n        <text x="50%" y="50%" font-family="system-ui, -apple-system, sans-serif" \n              font-size="${l.fontSize}" font-weight="600" \n              fill="${o}" text-anchor="middle" \n              dominant-baseline="central">${s}</text>\n      </svg>\n    `;return`data:image/svg+xml;base64,${btoa(d)}`})(e.name):j,alt:t||e.name,className:s,onError:()=>{f(!1),o||(d(!0),p(!1),i&&i())},onLoad:()=>{f(!0),p(!1),l&&l()},loading:"critical"===r?"eager":"lazy",style:{display:g&&y.shouldLoadImages?"none":"block"}})]})},Ds=({size:e="medium",text:s,subText:t,overlay:a=!1,className:r="",stage:i="loading",progress:l=0,showProgress:n=!1,onRetry:o})=>{const d={small:"h-4 w-4",medium:"h-10 w-10",large:"h-12 w-12"},c=R.jsx("div",{className:`flex flex-col items-center justify-center py-8 ${r}`,children:R.jsxs("div",{className:"flex flex-col items-center",children:[(()=>{switch(i){case"success":return R.jsx(U,{className:`${d[e]} text-green-500`});case"error":return R.jsx(L,{className:`${d[e]} text-red-500`});case"offline":return R.jsx(M,{className:`${d[e]} text-gray-500`});default:return R.jsx(I,{className:`${d[e]} text-primary`})}})(),n&&"loading"===i&&R.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full mt-4 overflow-hidden",children:R.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${l}%`}})}),s&&R.jsx("p",{className:`mt-4 text-sm font-medium ${(()=>{switch(i){case"success":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-600"}})()}`,children:s}),t&&R.jsx("p",{className:"mt-2 text-xs text-gray-500 text-center max-w-xs",children:t}),"error"===i&&o&&R.jsx("button",{onClick:o,className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm font-medium",children:"Try Again"}),"offline"===i&&R.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[R.jsx(M,{className:"h-3 w-3 mr-1"}),R.jsx("span",{children:"Check your internet connection"})]})]})});return a?R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:R.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:c})}):c},Os=({isOpen:e,onClose:s,title:t,children:a,size:r="md"})=>(F.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&s()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[e,s]),R.jsx(R.Fragment,{children:e&&R.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:R.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60",onClick:s,"aria-hidden":"true"}),R.jsxs("div",{className:`relative bg-white rounded-2xl shadow-2xl w-full mx-4 border border-neutral-200 ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[r]}`,children:[R.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200",children:[R.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-neutral-900 font-luxury",children:t}),R.jsx("button",{onClick:s,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors duration-200","aria-label":"Close modal",children:R.jsx($,{className:"h-5 w-5 text-neutral-600"})})]}),R.jsx("div",{className:"p-6",children:a})]})]})})}));class Fs extends O.Component{constructor(e){super(e),d(this,"retryTimeoutId",null),d(this,"reportError",(e,s,t)=>c(this,null,function*(){try{this.setState({isReported:!0})}catch(e){}})),d(this,"handleRetry",()=>{const{maxRetries:e=3}=this.props;if(this.state.retryCount>=e)return;this.setState({isRetrying:!0,retryCount:this.state.retryCount+1});const s=Math.min(1e3*Math.pow(2,this.state.retryCount),1e4);this.retryTimeoutId=setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1,showDetails:!1})},s)}),d(this,"handleGoHome",()=>{window.location.href="/dashboard"}),d(this,"handleReportError",()=>{if(this.state.error&&this.state.errorInfo){const e={errorId:this.state.errorId,errorType:this.state.errorType,context:this.props.context,timestamp:(new Date).toISOString(),url:window.location.href,userId:this.getCurrentUserId()};this.reportError(this.state.error,this.state.errorInfo,e)}}),d(this,"handleCopyError",()=>c(this,null,function*(){if(this.state.error){const s=`Error ID: ${this.state.errorId}\nType: ${this.state.errorType}\nMessage: ${this.state.error.message}\nStack: ${this.state.error.stack}\nTimestamp: ${(new Date).toISOString()}\nURL: ${window.location.href}`;try{yield navigator.clipboard.writeText(s)}catch(e){}}})),d(this,"toggleDetails",()=>{this.setState({showDetails:!this.state.showDetails})}),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,errorId:"",errorType:"unknown",isReported:!1,showDetails:!1}}componentWillUnmount(){this.retryTimeoutId&&clearTimeout(this.retryTimeoutId)}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,errorType:Fs.classifyError(e),isReported:!1,showDetails:!1}}static classifyError(e){var s;const t=e.message.toLowerCase(),a=(null==(s=e.stack)?void 0:s.toLowerCase())||"";return t.includes("network")||t.includes("fetch")||t.includes("connection")?"network":t.includes("database")||t.includes("supabase")||t.includes("postgres")?"database":t.includes("chunk")||t.includes("loading")||a.includes("import")?"chunk":a.includes("render")||t.includes("render")?"render":"unknown"}componentDidCatch(e,s){this.setState({error:e,errorInfo:s});const t={errorId:this.state.errorId,errorType:this.state.errorType,context:this.props.context,userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),url:window.location.href,userId:this.getCurrentUserId(),componentStack:s.componentStack,errorBoundary:"AdminErrorBoundary"};this.props.onError&&this.props.onError(e,s),!1!==this.props.enableReporting&&this.shouldAutoReport(e)&&this.reportError(e,s,t)}getCurrentUserId(){var e;try{const s=JSON.parse(localStorage.getItem("supabase.auth.token")||"{}");return(null==(e=null==s?void 0:s.user)?void 0:e.id)||null}catch(s){return null}}shouldAutoReport(e){return["chunk","network","database"].includes(this.state.errorType)||e.message.includes("ChunkLoadError")||e.message.includes("Loading chunk")}getErrorIcon(){switch(this.state.errorType){case"network":return R.jsx(M,{className:"h-8 w-8 text-red-600"});case"database":return R.jsx(W,{className:"h-8 w-8 text-red-600"});case"chunk":return R.jsx(B,{className:"h-8 w-8 text-orange-600"});case"render":return R.jsx(z,{className:"h-8 w-8 text-purple-600"});default:return R.jsx(K,{className:"h-8 w-8 text-red-600"})}}getErrorTitle(){switch(this.state.errorType){case"network":return"Connection Problem";case"database":return"Database Error";case"chunk":return"Loading Error";case"render":return"Rendering Error";default:return"Something went wrong"}}getErrorMessage(){switch(this.state.errorType){case"network":return"Unable to connect to the server. Please check your internet connection and try again.";case"database":return"There was a problem accessing the database. Our team has been notified.";case"chunk":return"Failed to load application resources. This usually resolves with a page refresh.";case"render":return"A component failed to render properly. Please try refreshing the page.";default:return"We encountered an unexpected error. Please try again or contact support if the problem persists."}}renderMinimalFallback(){return R.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[this.getErrorIcon(),R.jsxs("div",{children:[R.jsx("h3",{className:"font-medium text-red-900",children:this.getErrorTitle()}),R.jsx("p",{className:"text-sm text-red-700 mt-1",children:this.getErrorMessage()})]})]}),R.jsx("div",{className:"mt-3 flex space-x-2",children:R.jsx("button",{onClick:this.handleRetry,disabled:this.state.isRetrying||this.state.retryCount>=(this.props.maxRetries||3),className:"text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 disabled:opacity-50",children:this.state.isRetrying?"Retrying...":"Retry"})})]})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:"minimal"===this.props.fallbackComponent?this.renderMinimalFallback():R.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:R.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-lg",children:R.jsx("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:this.getErrorIcon()}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:this.getErrorTitle()}),R.jsx("p",{className:"text-gray-600 mb-4",children:this.getErrorMessage()}),R.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:[R.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Error ID"}),R.jsx("p",{className:"text-sm font-mono text-gray-700",children:this.state.errorId})]}),this.state.retryCount>0&&R.jsxs("div",{className:"mb-4 text-sm text-gray-500",children:["Retry attempt: ",this.state.retryCount," / ",this.props.maxRetries||3]}),!1,R.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[R.jsxs("button",{onClick:this.handleRetry,disabled:this.state.isRetrying||this.state.retryCount>=(this.props.maxRetries||3),className:"flex-1 flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[R.jsx(B,{className:"h-4 w-4 mr-2 "+(this.state.isRetrying?"animate-spin":"")}),this.state.isRetrying?"Retrying...":"Try Again"]}),R.jsxs("button",{onClick:this.handleGoHome,className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[R.jsx(V,{className:"h-4 w-4 mr-2"}),"Go Home"]})]}),R.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-sm",children:[R.jsxs("button",{onClick:this.handleCopyError,className:"flex items-center justify-center px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[R.jsx(G,{className:"h-4 w-4 mr-1"}),"Copy Error Details"]}),!1!==this.props.enableReporting&&!this.state.isReported&&R.jsxs("button",{onClick:this.handleReportError,className:"flex items-center justify-center px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[R.jsx(H,{className:"h-4 w-4 mr-1"}),"Report Error"]}),this.state.isReported&&R.jsxs("div",{className:"flex items-center justify-center px-3 py-2 text-green-600",children:[R.jsx(U,{className:"h-4 w-4 mr-1"}),"Error Reported"]})]}),!1]})})})}):this.props.children}}const Rs=O.lazy(()=>u(()=>Promise.resolve().then(()=>ht),void 0).then(e=>({default:e.ComprehensiveAdminDashboard}))),Ms=O.lazy(()=>u(()=>Promise.resolve().then(()=>jt),void 0)),Is=O.lazy(()=>u(()=>Promise.resolve().then(()=>Ct),void 0).then(e=>({default:e.ProductManagement}))),Ls=O.lazy(()=>u(()=>Promise.resolve().then(()=>kt),void 0).then(e=>({default:e.OrderManager}))),Us=O.lazy(()=>u(()=>Promise.resolve().then(()=>_t),void 0).then(e=>({default:e.CategoryManagement}))),$s=O.lazy(()=>u(()=>Promise.resolve().then(()=>At),void 0).then(e=>({default:e.CollectionManagement}))),Ks=O.lazy(()=>u(()=>Promise.resolve().then(()=>Tt),void 0).then(e=>({default:e.SettingsManagement}))),zs=O.lazy(()=>u(()=>Promise.resolve().then(()=>Dt),void 0).then(e=>({default:e.AnalyticsDashboard}))),Bs=O.lazy(()=>u(()=>Promise.resolve().then(()=>Ot),void 0).then(e=>({default:e.AdvancedReports}))),Ws=O.lazy(()=>u(()=>Promise.resolve().then(()=>Ft),void 0).then(e=>({default:e.MarketingManagement}))),Vs=O.lazy(()=>u(()=>Promise.resolve().then(()=>Rt),void 0).then(e=>({default:e.AuditLogs}))),Gs=O.lazy(()=>u(()=>Promise.resolve().then(()=>Mt),void 0).then(e=>({default:e.AccessibilityDashboard}))),Hs=O.lazy(()=>u(()=>Promise.resolve().then(()=>$t),void 0).then(e=>({default:e.ThemeCustomizationDashboard}))),Zs=O.memo(({item:e,isActive:s,onClick:t,collapsed:a})=>R.jsxs("button",{onClick:t,className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 "+(s?"bg-indigo-100 text-indigo-700 border-r-2 border-indigo-500":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),title:a?e.name:void 0,children:[R.jsx("span",{className:"flex-shrink-0",children:e.icon}),!a&&R.jsx("span",{className:"ml-3 truncate",children:e.name})]}));Zs.displayName="NavigationItem";const qs=O.memo(({component:e,isActive:s})=>s?R.jsx(O.Suspense,{fallback:R.jsx(Ds,{}),children:R.jsx(e,{})}):null);qs.displayName="ComponentRenderer";const Js=O.memo(()=>{var e,s;const[t,a]=O.useState("dashboard"),[r,i]=O.useState(!1),[l,n]=O.useState(!1),[o,d]=O.useState(!1),[m,x]=O.useState(window.innerWidth<768);O.useEffect(()=>{const e=()=>{x(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),O.useEffect(()=>{const e=setTimeout(()=>c(null,null,function*(){try{yield u(()=>Promise.resolve().then(()=>ht),void 0),setTimeout(()=>c(null,null,function*(){yield Promise.all([u(()=>Promise.resolve().then(()=>jt),void 0),u(()=>Promise.resolve().then(()=>Ct),void 0),u(()=>Promise.resolve().then(()=>kt),void 0)])}),2e3)}catch(e){}}),500);return()=>clearTimeout(e)},[]);const h=O.useMemo(()=>[{name:"Dashboard",icon:R.jsx(Z,{className:"h-5 w-5"}),component:Rs,preload:!0},{name:"Users",icon:R.jsx(q,{className:"h-5 w-5"}),component:Ms},{name:"Products",icon:R.jsx(J,{className:"h-5 w-5"}),component:Is},{name:"Orders",icon:R.jsx(Y,{className:"h-5 w-5"}),component:Ls},{name:"Categories",icon:R.jsx(Q,{className:"h-5 w-5"}),component:Us},{name:"Collections",icon:R.jsx(X,{className:"h-5 w-5"}),component:$s},{name:"Marketing",icon:R.jsx(ee,{className:"h-5 w-5"}),component:Ws},{name:"Analytics",icon:R.jsx(se,{className:"h-5 w-5"}),component:zs},{name:"Reports",icon:R.jsx(te,{className:"h-5 w-5"}),component:Bs},{name:"Audit Logs",icon:R.jsx(ae,{className:"h-5 w-5"}),component:Vs},{name:"Accessibility",icon:R.jsx(re,{className:"h-5 w-5"}),component:Gs},{name:"Theme",icon:R.jsx(ie,{className:"h-5 w-5"}),component:Hs},{name:"Settings",icon:R.jsx(le,{className:"h-5 w-5"}),component:Ks}],[]),g=O.useCallback(e=>{const s=e.toLowerCase();s!==t&&(d(!0),a(s),setTimeout(()=>{d(!1)},150))},[t]);O.useEffect(()=>{h.filter(e=>e.preload).forEach(e=>{e.component})},[h]);const p=O.useMemo(()=>h.find(e=>e.name.toLowerCase()===t),[h,t]),y=()=>{i(!1)};return R.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[R.jsxs("div",{className:"sr-only",children:[R.jsx("a",{href:"#main-content",className:"focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded z-50",children:"Skip to main content"}),R.jsx("a",{href:"#sidebar-nav",className:"focus:not-sr-only focus:absolute focus:top-4 focus:left-32 bg-blue-600 text-white px-4 py-2 rounded z-50",children:"Skip to navigation"})]}),r&&m&&R.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 transition-opacity duration-300",onClick:y}),R.jsx("aside",{className:`${m?r?"translate-x-0":"-translate-x-full":l?"w-16":"w-64"} ${m?"fixed inset-y-0 left-0 z-50 w-64":"flex-shrink-0"} bg-white transform transition-all duration-300 ease-in-out shadow-lg border-r border-gray-200 h-full`,"aria-label":"Admin navigation sidebar",role:"navigation",children:R.jsxs("div",{className:"flex flex-col h-full",children:[R.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 px-4 py-4 border-b border-gray-200",children:[(!l||m)&&R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:R.jsx(z,{className:"h-6 w-6 text-indigo-600"})}),R.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"})]}),R.jsx("button",{className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors "+(l&&!m?"mx-auto":""),onClick:m?y:()=>{m?i(!r):n(!l)},"aria-label":m?"Close sidebar":"Toggle sidebar",children:m?R.jsx($,{className:"h-5 w-5"}):l?R.jsx(ne,{className:"h-5 w-5"}):R.jsx(oe,{className:"h-5 w-5"})})]}),R.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[R.jsx("nav",{id:"sidebar-nav",className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto","aria-label":"Admin dashboard navigation",role:"navigation",children:h.map(e=>{const s=t===e.name.toLowerCase();return R.jsx(Zs,{item:e,isActive:s,onClick:()=>g(e.name),collapsed:l&&!m},e.name)})}),(!l||m)&&R.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-500",children:[R.jsx(ae,{className:"h-4 w-4"}),R.jsx("span",{children:"Admin Dashboard v2.0"})]})})]})]})}),R.jsxs("main",{id:"main-content",className:"flex flex-col flex-1 min-w-0 h-full overflow-hidden","aria-label":"Main dashboard content",role:"main",children:[m&&R.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30",children:R.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[R.jsx("button",{onClick:()=>i(!0),className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors","aria-label":"Open sidebar",children:R.jsx(de,{className:"h-6 w-6"})}),R.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:(null==(e=h.find(e=>e.name.toLowerCase()===t))?void 0:e.name)||"Admin Dashboard"}),R.jsx("div",{className:"w-10"})," "]})}),!m&&R.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(null==(s=h.find(e=>e.name.toLowerCase()===t))?void 0:s.name)||"Admin Dashboard"}),R.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your e-commerce platform"})]}),R.jsx("div",{className:"flex items-center space-x-3",children:R.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:R.jsx(ae,{className:"h-5 w-5"})})})]})}),R.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:R.jsx("div",{className:"p-4 md:p-6 lg:p-8 h-full",children:R.jsx("div",{className:"max-w-7xl mx-auto h-full",children:R.jsx(Fs,{children:o?R.jsx(Ds,{}):p?R.jsx(qs,{component:p.component,isActive:!0}):R.jsx("div",{className:"text-center py-12",children:R.jsx("p",{className:"text-gray-500",children:"Component not found"})})})})})})]})]})});Js.displayName="AdminDashboard";const Ys=()=>{const{user:e}=h(),{products:s}=g(),t=s.filter(s=>s.sellerId===(null==e?void 0:e.id)),a=[{title:"Total Sales",value:"$23,450",change:"+15.2%",icon:me,color:"bg-green-500"},{title:"Products Listed",value:t.length.toString(),change:`+${t.length}`,icon:J,color:"bg-blue-500"},{title:"Orders",value:"145",change:"+8.1%",icon:Y,color:"bg-purple-500"},{title:"Growth",value:"12.5%",change:"+2.1%",icon:ee,color:"bg-orange-500"}];return R.jsxs("div",{className:"space-y-6",children:[R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map((e,s)=>R.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),R.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:e.value}),R.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[e.change," from last month"]})]}),R.jsx("div",{className:`${e.color} p-3 rounded-lg`,children:R.jsx(e.icon,{className:"h-6 w-6 text-white"})})]})},e.title))}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[R.jsx("span",{className:"text-gray-700",children:'New order received for "Premium Attar"'}),R.jsx("span",{className:"text-sm text-gray-500",children:"2 hours ago"})]}),R.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[R.jsx("span",{className:"text-gray-700",children:'Product "Royal Oudh" inventory updated'}),R.jsx("span",{className:"text-sm text-gray-500",children:"5 hours ago"})]})]})]})]})},Qs=()=>R.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Sales Analytics"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[R.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[R.jsx(se,{className:"h-8 w-8 text-blue-500 mb-2"}),R.jsx("h3",{className:"font-semibold text-gray-900",children:"Sales Trends"}),R.jsx("p",{className:"text-sm text-gray-600",children:"View detailed sales performance over time"})]}),R.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[R.jsx(ee,{className:"h-8 w-8 text-green-500 mb-2"}),R.jsx("h3",{className:"font-semibold text-gray-900",children:"Revenue Growth"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Track monthly revenue growth metrics"})]}),R.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[R.jsx(J,{className:"h-8 w-8 text-purple-500 mb-2"}),R.jsx("h3",{className:"font-semibold text-gray-900",children:"Top Products"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Identify best-performing products"})]})]})]}),Xs=()=>{const{user:e}=h(),{products:s,deleteProduct:t}=g(),[a,r]=O.useState(!1),[i,l]=O.useState(null),n=s.filter(s=>s.sellerId===(null==e?void 0:e.id));return R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Products Management"}),R.jsxs("button",{onClick:()=>{l(null),r(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2",children:[R.jsx(he,{className:"h-4 w-4"}),R.jsx("span",{children:"Add Product"})]})]}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>R.jsxs("tr",{children:[R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx(Ts,{product:{id:e.id,name:e.name,images:e.images},className:"h-10 w-10 rounded object-cover",alt:e.name,size:"small"}),R.jsxs("div",{className:"ml-4",children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),R.jsx("div",{className:"text-sm text-gray-500",children:e.category})]})]})}),R.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.price]}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.stock}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.stock>0?"In Stock":"Out of Stock"})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>(e=>{l(e),r(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 p-1",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:()=>{return s=e.id,void(window.confirm("Are you sure you want to delete this product?")&&t(s));var s},className:"text-red-600 hover:text-red-900 p-1",children:R.jsx(pe,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),R.jsx(Os,{isOpen:a,onClose:()=>r(!1),title:i?"Edit Product":"Add New Product",size:"xl",children:R.jsx(fs,{product:i,onClose:()=>r(!1)})})]})},et=()=>R.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Order Management"}),R.jsx("p",{className:"text-gray-600",children:"Manage your orders, process shipments, and track delivery status."})]}),st=()=>R.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Promotions & Marketing"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[R.jsx(Q,{className:"h-8 w-8 text-orange-500 mb-2"}),R.jsx("h3",{className:"font-semibold text-gray-900",children:"Discount Campaigns"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Create and manage product discounts"})]}),R.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[R.jsx(ue,{className:"h-8 w-8 text-red-500 mb-2"}),R.jsx("h3",{className:"font-semibold text-gray-900",children:"Featured Products"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Promote your best products"})]})]})]}),tt=()=>R.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customer Reviews"}),R.jsx("p",{className:"text-gray-600",children:"Monitor and respond to customer feedback and reviews."})]}),at=()=>R.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Seller Settings"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[R.jsx(le,{className:"h-8 w-8 text-gray-500 mb-2"}),R.jsx("h3",{className:"font-semibold text-gray-900",children:"Store Settings"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Manage your store profile and preferences"})]}),R.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[R.jsx(xe,{className:"h-8 w-8 text-green-500 mb-2"}),R.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Settings"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Configure payment methods and payouts"})]})]})]}),rt=[{id:"overview",label:"Overview",icon:R.jsx(V,{className:"h-5 w-5"})},{id:"products",label:"Products",icon:R.jsx(J,{className:"h-5 w-5"})},{id:"orders",label:"Orders",icon:R.jsx(Y,{className:"h-5 w-5"}),badge:"3"},{id:"analytics",label:"Analytics",icon:R.jsx(se,{className:"h-5 w-5"})},{id:"promotions",label:"Promotions",icon:R.jsx(Q,{className:"h-5 w-5"})},{id:"reviews",label:"Reviews",icon:R.jsx(ce,{className:"h-5 w-5"})},{id:"reports",label:"Reports",icon:R.jsx(te,{className:"h-5 w-5"})},{id:"settings",label:"Settings",icon:R.jsx(le,{className:"h-5 w-5"})}],it=()=>{const[e,s]=O.useState("overview"),[t,a]=O.useState(!1);return R.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[R.jsxs(js.div,{variants:{expanded:{width:"256px"},collapsed:{width:"64px"}},animate:t?"collapsed":"expanded",transition:{duration:.3},className:"bg-white border-r border-gray-200 shadow-sm relative",children:[R.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[!t&&R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(J,{className:"h-6 w-6 text-indigo-600"}),R.jsx("span",{className:"font-semibold text-gray-900",children:"Seller Center"})]}),R.jsx("button",{onClick:()=>a(!t),className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:t?R.jsx(ne,{className:"h-4 w-4 text-gray-500"}):R.jsx(oe,{className:"h-4 w-4 text-gray-500"})})]}),R.jsx("nav",{className:"p-2 space-y-1 overflow-y-auto max-h-[calc(100vh-80px)]",children:rt.map(a=>R.jsxs(js.button,{onClick:()=>s(a.id),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors "+(e===a.id?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[R.jsx("span",{className:"flex-shrink-0",children:a.icon}),R.jsx(Ns,{children:!t&&R.jsx(js.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.2},className:"truncate font-medium",children:a.label})}),!t&&a.badge&&R.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:a.badge})]},a.id))})]}),R.jsx("div",{className:"flex-1 overflow-auto",children:R.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"p-6",children:(()=>{switch(e){case"overview":default:return R.jsx(Ys,{});case"products":return R.jsx(Xs,{});case"orders":return R.jsx(et,{});case"analytics":case"reports":return R.jsx(Qs,{});case"promotions":return R.jsx(st,{});case"reviews":return R.jsx(tt,{});case"settings":return R.jsx(at,{})}})()},e)})]})},lt=e=>{const{columns:s,data:t,loading:a=!1,onRowClick:r,emptyMessage:i="No data available",className:l=""}=e,[n,o]=O.useState(window.innerWidth);if(O.useEffect(()=>{const e=()=>{o(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a)return R.jsx("div",{className:"flex items-center justify-center p-8",children:R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});const d=s.filter(e=>{if("all"===e.responsive||!e.responsive)return!0;return n>=({xs:0,sm:640,md:768,lg:1024,xl:1280}[e.responsive]||0)}),c=d.some(e=>e.width||e.minWidth||e.maxWidth)&&n>=768;return R.jsxs("div",{className:`overflow-hidden rounded-lg border border-gray-200 shadow-sm ${l}`,children:[R.jsx("div",{className:"hidden md:block overflow-x-auto",children:R.jsxs("table",{className:"min-w-full divide-y divide-gray-200 ",style:{tableLayout:c?"fixed":"auto"},children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsx("tr",{children:d.map(e=>R.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${e.className||""}`,style:{width:e.width?"string"==typeof e.width?e.width:`${e.width}px`:"auto",minWidth:e.minWidth?"string"==typeof e.minWidth?e.minWidth:`${e.minWidth}px`:"auto",maxWidth:e.maxWidth?"string"==typeof e.maxWidth?e.maxWidth:`${e.maxWidth}px`:"none"},children:e.title},e.key))})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?R.jsx("tr",{children:R.jsx("td",{colSpan:d.length,className:"px-6 py-12 text-center",children:R.jsxs("div",{className:"flex flex-col items-center justify-center",children:[R.jsx("div",{className:"text-gray-400 mb-2",children:R.jsx("svg",{className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i})]})})}):t.map((e,s)=>R.jsx("tr",{onClick:()=>null==r?void 0:r(e),className:"hover:bg-gray-50 "+(r?"cursor-pointer":""),children:d.map(t=>R.jsx("td",{className:`px-6 py-4 text-sm ${t.className||""}`,style:{width:t.width?"string"==typeof t.width?t.width:`${t.width}px`:"auto",minWidth:t.minWidth?"string"==typeof t.minWidth?t.minWidth:`${t.minWidth}px`:"auto",maxWidth:t.maxWidth?"string"==typeof t.maxWidth?t.maxWidth:`${t.maxWidth}px`:"none",whiteSpace:t.width||t.maxWidth?"nowrap":"normal",overflow:"hidden",textOverflow:"ellipsis"},children:t.render?t.render(e[t.key],e):e[t.key]},`${e.id||s}-${t.key}`))},e.id||s))})]})}),R.jsx("div",{className:"md:hidden",children:0===t.length?R.jsx("div",{className:"p-6 text-center",children:R.jsxs("div",{className:"flex flex-col items-center justify-center",children:[R.jsx("div",{className:"text-gray-400 mb-2",children:R.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i})]})}):R.jsx("div",{className:"divide-y divide-gray-200",children:t.map((e,s)=>R.jsx("div",{onClick:()=>null==r?void 0:r(e),className:"p-4 "+(r?"cursor-pointer hover:bg-gray-50":""),children:R.jsx("div",{className:"space-y-3",children:d.map(t=>R.jsxs("div",{className:"flex justify-between",children:[R.jsx("dt",{className:"text-sm font-medium text-gray-500",children:t.title}),R.jsx("dd",{className:"text-sm text-gray-900 break-words max-w-[60%]",children:t.render?t.render(e[t.key],e):e[t.key]})]},`${e.id||s}-${t.key}`))})},e.id||s))})})]})},nt=()=>{const{items:e}=p(),{itemCount:s}=y(),{user:t}=h(),[a,r]=O.useState([]),[i,l]=O.useState(!0);O.useEffect(()=>{c(null,null,function*(){if(t)try{const e=yield vs(t.id);r(e)}catch(e){}l(!1)})},[t]);const n=a.filter(e=>["pending","confirmed","processing","shipped"].includes(e.status)).length,o=[{title:"Orders",value:a.length.toString(),description:`${n} pending delivery`,icon:J,color:"bg-blue-500",href:"/orders"},{title:"Wishlist",value:e.length.toString(),description:"Items saved for later",icon:ye,color:"bg-red-500",href:"/wishlist"},{title:"Cart",value:s.toString(),description:"Items ready to purchase",icon:xe,color:"bg-green-500",href:"#"}],d=a.slice(0,3).map(e=>{var s,t,a;const r=e.items[0];return{id:e.id,orderNumber:e.orderNumber,product:(null==(s=null==r?void 0:r.product)?void 0:s.name)||"Unknown Product",image:(null==(a=null==(t=null==r?void 0:r.product)?void 0:t.images)?void 0:a[0])||"/src/assets/images/products/sample-product-2.jpg",amount:`$${e.total.toFixed(2)}`,status:e.status.charAt(0).toUpperCase()+e.status.slice(1),date:new Date(e.createdAt).toLocaleDateString(),itemCount:e.items.length}}),m=d.length>0?d:[{id:"1",orderNumber:"ORD-DEMO-001",product:"Wireless Bluetooth Headphones",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop",amount:"$129.99",status:"Delivered",date:"2025-01-10",itemCount:1},{id:"2",orderNumber:"ORD-DEMO-002",product:"Smart Fitness Watch",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=100&h=100&fit=crop",amount:"$299.99",status:"Shipped",date:"2025-01-12",itemCount:1},{id:"3",orderNumber:"ORD-DEMO-003",product:"Premium Coffee Beans",image:"https://images.unsplash.com/photo-1447933601403-0c6688de566e?w=100&h=100&fit=crop",amount:"$24.99",status:"Processing",date:"2025-01-14",itemCount:2}],x=[{key:"product",title:"Product",minWidth:200,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("img",{src:s.image,alt:s.product,className:"h-10 w-10 rounded-lg object-cover"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:s.product}),R.jsxs("p",{className:"text-sm text-gray-600",children:[s.orderNumber," • ",s.date,s.itemCount>1&&` • ${s.itemCount} items`]})]})]})},{key:"amount",title:"Amount",width:100,render:e=>R.jsx("p",{className:"font-semibold text-gray-900",children:e})},{key:"status",title:"Status",width:100,render:e=>R.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full "+("Delivered"===e?"bg-green-100 text-green-700":"Shipped"===e?"bg-blue-100 text-blue-700":"Processing"===e?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e})}],u=[{icon:be,title:"Edit Profile",description:"Update your personal information"},{icon:fe,title:"Manage Addresses",description:"Add or edit shipping addresses"},{icon:ae,title:"Notifications",description:"Manage your notification preferences"},{icon:xe,title:"Payment Methods",description:"Add or remove payment cards"}];return R.jsxs("div",{className:"p-6 space-y-6",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Dashboard"}),R.jsx("p",{className:"text-gray-600 mt-2",children:"Welcome back! Here's an overview of your account."})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((e,s)=>R.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow cursor-pointer",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),R.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.value}),R.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]}),R.jsx("div",{className:`${e.color} p-3 rounded-lg`,children:R.jsx(e.icon,{className:"h-6 w-6 text-white"})})]})},e.title))}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[R.jsxs(js.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[R.jsx("div",{className:"p-6 border-b border-gray-100",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"View all orders"})]})}),R.jsx("div",{className:"p-6",children:i?R.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>R.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg animate-pulse",children:[R.jsx("div",{className:"h-12 w-12 bg-gray-300 rounded-lg"}),R.jsxs("div",{className:"flex-1",children:[R.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),R.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]}),R.jsxs("div",{className:"text-right",children:[R.jsx("div",{className:"h-4 bg-gray-300 rounded w-16 mb-2"}),R.jsx("div",{className:"h-6 bg-gray-300 rounded w-20"})]})]},e))}):R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"hidden md:block",children:R.jsx(lt,{columns:x,data:m,loading:!1,emptyMessage:"No orders yet"})}),R.jsxs("div",{className:"md:hidden space-y-4",children:[m.map(e=>R.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[R.jsx("img",{src:e.image,alt:e.product,className:"h-12 w-12 rounded-lg object-cover"}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.product}),R.jsxs("p",{className:"text-sm text-gray-600",children:[e.orderNumber," • ",e.date,e.itemCount>1&&` • ${e.itemCount} items`]})]}),R.jsxs("div",{className:"text-right",children:[R.jsx("p",{className:"font-semibold text-gray-900",children:e.amount}),R.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full "+("Delivered"===e.status?"bg-green-100 text-green-700":"Shipped"===e.status?"bg-blue-100 text-blue-700":"Processing"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.status})]})]},e.id)),0===m.length&&R.jsxs("div",{className:"text-center py-8 text-gray-500",children:[R.jsx(J,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),R.jsx("p",{children:"No orders yet"}),R.jsx("p",{className:"text-sm",children:"Start shopping to see your orders here!"})]})]})]})})]}),R.jsxs(js.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[R.jsx("div",{className:"p-6 border-b border-gray-100",children:R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),R.jsx("div",{className:"p-6",children:R.jsx("div",{className:"space-y-3",children:u.map(e=>R.jsxs(js.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[R.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:R.jsx(e.icon,{className:"h-5 w-5 text-indigo-600"})}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:e.title}),R.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]},e.title))})})]})]}),R.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white",children:R.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Recommended for You"}),R.jsx("p",{className:"text-indigo-100",children:"Discover products based on your preferences and purchase history."})]}),R.jsx(js.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white text-indigo-600 px-6 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors self-start md:self-auto",children:"Shop Now"})]})})]})},ot=({error:e,onRetry:s,type:t="general",showRetry:a=!0,className:r="",size:i="medium"})=>R.jsx("div",{className:`bg-white rounded-lg border border-red-200 ${(()=>{switch(i){case"small":return"p-4 text-sm";case"large":return"p-8 text-lg";default:return"p-6 text-base"}})()} ${r}`,children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"flex justify-center mb-4",children:(()=>{switch(t){case"network":return R.jsx(M,{className:"h-8 w-8 text-red-500"});case"database":return R.jsx(W,{className:"h-8 w-8 text-red-500"});case"timeout":return R.jsx(je,{className:"h-8 w-8 text-orange-500"});default:return R.jsx(K,{className:"h-8 w-8 text-red-500"})}})()}),R.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:(()=>{switch(t){case"network":return"Connection Problem";case"database":return"Database Error";case"timeout":return"Request Timed Out";default:return"Something Went Wrong"}})()}),R.jsx("p",{className:"text-gray-600 mb-4",children:(()=>{if(e)return e;switch(t){case"network":return"Please check your internet connection and try again.";case"database":return"Unable to connect to the database. Please try again later.";case"timeout":return"The request took too long to complete. Please try again.";default:return"An unexpected error occurred. Please try again."}})()}),a&&s&&R.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark",children:[R.jsx(B,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}),dt=({isOnline:e,onRetry:s})=>e?null:R.jsx("div",{className:"fixed top-0 left-0 right-0 bg-red-500 text-white p-3 z-50 animate-fade-in-down",children:R.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx(M,{className:"h-5 w-5 mr-2"}),R.jsx("span",{children:"You're offline. Some features may not work properly."})]}),s&&R.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm transition-colors",children:"Retry"})]})}),ct=({tableName:e,displayName:s,onBack:t})=>{const[a,r]=O.useState([]),[i,l]=O.useState([]),[d,m]=O.useState(!0),[x,u]=O.useState(null),[h,g]=O.useState(""),[p,y]=O.useState("created_at"),[j,N]=O.useState("desc"),[v,w]=O.useState({currentPage:1,totalPages:1,totalRecords:0,recordsPerPage:10}),[C,k]=O.useState(new Set),[S,P]=O.useState(!1),[E,_]=O.useState(null),[A,T]=O.useState({}),[D,F]=O.useState(!1),[M,I]=O.useState(!1),L=O.useCallback(()=>c(null,null,function*(){try{const{data:s,error:t}=yield ws.from(e).select("*").limit(1);if(!t&&s&&s.length>0){const e=s[0],t=Object.keys(e).map(s=>({name:s,type:U(e[s]),nullable:null===e[s],displayName:W(s)}));return void l(t)}l([{name:"id",type:"uuid",nullable:!1,displayName:"ID"},{name:"name",type:"text",nullable:!1,displayName:"Name"},{name:"description",type:"text",nullable:!0,displayName:"Description"},{name:"price",type:"numeric",nullable:!1,displayName:"Price"},{name:"created_at",type:"timestamp",nullable:!0,displayName:"Created At"},{name:"updated_at",type:"timestamp",nullable:!0,displayName:"Updated At"}])}catch(s){l([{name:"id",type:"uuid",nullable:!1,displayName:"ID"},{name:"name",type:"text",nullable:!1,displayName:"Name"},{name:"description",type:"text",nullable:!0,displayName:"Description"},{name:"price",type:"numeric",nullable:!1,displayName:"Price"},{name:"created_at",type:"timestamp",nullable:!0,displayName:"Created At"},{name:"updated_at",type:"timestamp",nullable:!0,displayName:"Updated At"}])}}),[e]),U=e=>null==e?"text":"boolean"==typeof e?"boolean":"number"==typeof e?Number.isInteger(e)?"integer":"numeric":"string"==typeof e?/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)?"uuid":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(e)?"timestamp":/^\d{4}-\d{2}-\d{2}$/.test(e)?"date":"text":Array.isArray(e)?"array":"object"==typeof e?"json":"text",z=O.useCallback(()=>c(null,null,function*(){try{u(null);const{count:s,error:t}=yield ws.from(e).select("*",{count:"exact",head:!0});if(t)throw t;const a=s||0,l=Math.ceil(a/v.recordsPerPage),d=(v.currentPage-1)*v.recordsPerPage;let c=ws.from(e).select("*").range(d,d+v.recordsPerPage-1);if(p&&(c=c.order(p,{ascending:"asc"===j})),h){const e=i.filter(e=>e.type.includes("text")||e.type.includes("varchar"));if(e.length>0){const s=e.map(e=>`${e.name}.ilike.%${h}%`).join(",");c=c.or(s)}}const{data:m,error:x}=yield c;if(x)throw x;r(m||[]),w(e=>o(n({},e),{totalRecords:a,totalPages:l}))}catch(t){u(`Failed to load ${s} data`)}finally{m(!1),P(!1)}}),[e,i,v.currentPage,v.recordsPerPage,p,j,h,s]);O.useEffect(()=>{L()},[L]),O.useEffect(()=>{i.length>0&&z()},[i,z]);const W=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),V=e=>{e>=1&&e<=v.totalPages&&w(s=>o(n({},s),{currentPage:e}))},G=(e,s)=>{T(t=>o(n({},t),{[e]:s}))},H=[{key:"id",title:"ID",width:100,render:e=>R.jsx("span",{className:"font-mono text-sm",children:(null==e?void 0:e.slice(0,8))||"-"})},{key:"data",title:"Data",minWidth:200,render:(e,s)=>R.jsxs("div",{className:"max-w-xs truncate",children:[JSON.stringify(s,null,2).slice(0,100),"..."]})},{key:"created_at",title:"Created",width:150,render:e=>R.jsx("span",{className:"text-sm text-gray-500",children:e?new Date(e).toLocaleDateString():"-"})},{key:"actions",title:"Actions",width:100,render:(s,t)=>R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{_(e),T(n({},e)),I(!0)})(t)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit Record",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:s=>{var a;s.stopPropagation(),t.id&&(a=String(t.id),c(null,null,function*(){if(window.confirm("Are you sure you want to delete this record? This action cannot be undone.")){u(null);try{const{error:s}=yield ws.from(e).delete().eq("id",a);if(s)throw new Error(`Failed to delete record: ${s.message}`);yield z()}catch(s){const e=s instanceof Error?s.message:"Failed to delete record";u(e)}}}))},className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete Record",children:R.jsx(pe,{className:"h-4 w-4"})})]})}];return x?R.jsxs("div",{className:"space-y-6",children:[R.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:R.jsxs("div",{children:[R.jsxs("button",{onClick:t,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-2",children:[R.jsx(oe,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]}),R.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[s," Management"]})]})}),R.jsx(ot,{error:x,onRetry:()=>{u(null),z()},type:"database",size:"large"})]}):R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[R.jsxs("div",{children:[R.jsxs("button",{onClick:t,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-2",children:[R.jsx(oe,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]}),R.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[s," Management"]}),R.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage ",s.toLowerCase()," data (",v.totalRecords," total records)"]})]}),R.jsxs("div",{className:"flex flex-wrap gap-2",children:[R.jsxs("button",{onClick:()=>{_({id:"new"}),T({}),I(!0)},className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[R.jsx(he,{className:"h-4 w-4 mr-1"}),"Add New"]}),R.jsxs("button",{onClick:()=>c(null,null,function*(){try{yield b(e,s)}catch(t){u("Failed to export data")}}),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[R.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Export"]}),R.jsxs("button",{onClick:()=>{P(!0),z()},disabled:S,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:[R.jsx(B,{className:"h-4 w-4 mr-1 "+(S?"animate-spin":"")}),"Refresh"]})]})]}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:R.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[R.jsx("div",{className:"flex-1",children:R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),R.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:h,onChange:e=>g(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 w-full"})]})}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(we,{className:"h-4 w-4 text-gray-500"}),R.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{children:"All Columns"}),i.map(e=>R.jsx("option",{value:e.name,children:e.displayName},e.name))]})]})]})}),C.size>0&&R.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("p",{className:"text-indigo-800",children:[C.size," ",1===C.size?"record":"records"," selected"]}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsxs("button",{onClick:()=>c(null,null,function*(){if(0!==C.size&&window.confirm(`Are you sure you want to delete ${C.size} records? This action cannot be undone.`))try{const s=Array.from(C);yield f(e,s),k(new Set),z()}catch(s){u("Failed to delete records")}}),className:"flex items-center px-3 py-1.5 text-sm font-medium text-red-700 bg-red-100 border border-red-300 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[R.jsx(pe,{className:"h-4 w-4 mr-1"}),"Delete Selected"]}),R.jsx("button",{onClick:()=>k(new Set),className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Selection"})]})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:d?R.jsx("div",{className:"flex items-center justify-center p-12",children:R.jsx(Ds,{})}):R.jsxs(R.Fragment,{children:[R.jsx(lt,{columns:H,data:a,loading:d,emptyMessage:`No ${s.toLowerCase()} found`}),v.totalPages>1&&R.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[R.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",v.currentPage," of ",v.totalPages]}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("button",{onClick:()=>V(v.currentPage-1),disabled:1===v.currentPage,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),R.jsx("button",{onClick:()=>V(v.currentPage+1),disabled:v.currentPage===v.totalPages,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),M&&E&&R.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:R.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"new"===E.id?`Add New ${s} Record`:`Edit ${s} Record`}),R.jsx("button",{onClick:()=>{I(!1),u(null)},className:"text-gray-400 hover:text-gray-600",children:R.jsx($,{className:"h-6 w-6"})})]}),x&&R.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:R.jsxs("div",{className:"flex",children:[R.jsx("div",{className:"flex-shrink-0",children:R.jsx(K,{className:"h-5 w-5 text-red-400"})}),R.jsxs("div",{className:"ml-3",children:[R.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),R.jsx("div",{className:"mt-1 text-sm text-red-700",children:x})]})]})}),R.jsx("div",{className:"max-h-96 overflow-y-auto",children:R.jsx("div",{className:"space-y-4",children:i.filter(e=>"id"!==e.name&&"created_at"!==e.name&&"updated_at"!==e.name).map(e=>R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.displayName}),"boolean"===e.type?R.jsxs("select",{value:A[e.name]?"true":"false",onChange:s=>G(e.name,"true"===s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[R.jsx("option",{value:"true",children:"Yes"}),R.jsx("option",{value:"false",children:"No"})]}):e.type.includes("text")||e.type.includes("varchar")?R.jsx("textarea",{value:String(A[e.name]||""),onChange:s=>G(e.name,s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:3}):e.type.includes("json")||e.type.includes("array")?R.jsx("textarea",{value:JSON.stringify(A[e.name]||"",null,2),onChange:s=>{try{const t=JSON.parse(s.target.value);G(e.name,t)}catch(t){G(e.name,s.target.value)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm",rows:4,placeholder:"Enter valid JSON"}):R.jsx("input",{type:e.type.includes("int")||e.type.includes("numeric")?"number":"text",value:String(A[e.name]||""),onChange:s=>{const t=e.type.includes("int")||e.type.includes("numeric")?parseFloat(s.target.value)||0:s.target.value;G(e.name,t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]},e.name))})}),R.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[R.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),R.jsx("button",{onClick:()=>c(null,null,function*(){if(E){F(!0),u(null);try{const s=n({},A),t=i.filter(e=>!e.nullable&&"id"!==e.name&&"created_at"!==e.name&&"updated_at"!==e.name);for(const e of t){const t=s[e.name];if(!t||""===t)throw new Error(`${e.displayName} is required`);if((e.type.includes("numeric")||e.type.includes("decimal")||e.type.includes("money"))&&"price"===e.name){const a=parseFloat(String(t));if(isNaN(a)||a<=0)throw new Error(`${e.displayName} must be a valid positive number`);s[e.name]=a}if(e.type.includes("uuid")&&e.name.endsWith("_id")){const s=String(t);if(s&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s))throw new Error(`${e.displayName} must be a valid UUID format`)}}if(Object.keys(s).forEach(e=>{if(""===s[e]){const t=i.find(s=>s.name===e);(null==t?void 0:t.nullable)&&(s[e]=null)}}),"new"===E.id&&(s.created_at=(new Date).toISOString()),s.updated_at=(new Date).toISOString(),"new"===E.id){const{data:t,error:a}=yield ws.from(e).insert(s).select();if(a)throw new Error(`Failed to create record: ${a.message}`)}else{const{data:t,error:a}=yield ws.from(e).update(s).eq("id",E.id).select();if(a)throw new Error(`Failed to update record: ${a.message}`)}yield z(),I(!1),_(null),T({})}catch(s){const e=s instanceof Error?s.message:"Failed to save record";u(e)}finally{F(!1)}}}),disabled:D,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center",children:D?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):R.jsxs(R.Fragment,{children:[R.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})},mt=()=>{const[e,s]=O.useState([]),[t,a]=O.useState(null),[r,i]=O.useState(!0),[l,n]=O.useState(""),[o,d]=O.useState(!1),[c,m]=O.useState(1),x=[{name:"profiles",displayName:"User Profiles",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"email",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"full_name",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"avatar_url",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"role",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"phone",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"date_of_birth",type:"date",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"is_active",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"email_verified",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["orders","cart_items","wishlist_items","reviews","addresses","payment_methods","user_preferences","user_security_settings"],belongsTo:[]},position:{x:100,y:100},color:"bg-blue-500"},{name:"user_preferences",displayName:"User Preferences",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"email_order_updates",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"email_promotions",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"email_newsletter",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"push_order_updates",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"language",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"timezone",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"currency",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:400,y:50},color:"bg-indigo-500"},{name:"user_security_settings",displayName:"Security Settings",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"two_factor_enabled",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"two_factor_method",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"login_alerts",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"session_timeout",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"password_changed_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"failed_login_attempts",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:400,y:150},color:"bg-red-500"},{name:"categories",displayName:"Categories",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"slug",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"description",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"parent_id",type:"uuid",nullable:!0,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"categories",referencedColumn:"id"},{name:"is_active",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["products"],belongsTo:["categories"]},position:{x:700,y:100},color:"bg-purple-500"},{name:"products",displayName:"Products",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"slug",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"price",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"category_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"categories",referencedColumn:"id"},{name:"seller_id",type:"uuid",nullable:!0,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"stock",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["order_items","cart_items","wishlist_items","reviews","product_variants"],belongsTo:["categories","profiles"]},position:{x:1e3,y:100},color:"bg-green-500"},{name:"addresses",displayName:"Addresses",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"type",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"full_name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"street_address",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"city",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"state",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"postal_code",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"country",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"phone",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"is_default",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:100,y:300},color:"bg-teal-500"},{name:"payment_methods",displayName:"Payment Methods",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"type",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"provider",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"last_four",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"expiry_month",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"expiry_year",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"holder_name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"is_default",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"is_verified",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:100,y:450},color:"bg-pink-500"},{name:"orders",displayName:"Orders",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"order_number",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"status",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"total_amount",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["order_items","order_tracking"],belongsTo:["profiles"]},position:{x:400,y:300},color:"bg-orange-500"},{name:"order_items",displayName:"Order Items",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"order_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"orders",referencedColumn:"id"},{name:"product_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"products",referencedColumn:"id"},{name:"quantity",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"unit_price",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"total_price",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["orders","products"]},position:{x:700,y:300},color:"bg-orange-400"},{name:"cart_items",displayName:"Cart Items",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"product_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"products",referencedColumn:"id"},{name:"quantity",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles","products"]},position:{x:1e3,y:300},color:"bg-yellow-500"},{name:"reviews",displayName:"Reviews",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"product_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"products",referencedColumn:"id"},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"rating",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"comment",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["products","profiles"]},position:{x:1e3,y:450},color:"bg-yellow-600"}];O.useEffect(()=>{s(x)},[x]);const u=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.displayName.toLowerCase().includes(l.toLowerCase()));return R.jsxs("div",{className:(o?"fixed inset-0 z-50 bg-white":"relative")+" p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-6",children:[R.jsxs("div",{children:[R.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[R.jsx(W,{className:"h-6 w-6 mr-2 text-primary"}),"Database Schema"]}),R.jsx("p",{className:"text-gray-600",children:"Interactive visualization of database structure and relationships"})]}),R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search tables...",value:l,onChange:e=>n(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]}),R.jsxs("button",{onClick:()=>i(!r),className:"flex items-center px-3 py-2 rounded-lg transition-colors "+(r?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[R.jsx(ke,{className:"h-4 w-4 mr-2"}),"Relationships"]}),R.jsx("button",{onClick:()=>d(!o),className:"flex items-center px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:o?R.jsx(Se,{className:"h-4 w-4"}):R.jsx(Pe,{className:"h-4 w-4"})})]})]}),R.jsx("div",{className:"bg-gray-50 rounded-xl border border-gray-200 overflow-hidden",style:{height:o?"calc(100vh - 120px)":"600px"},children:R.jsxs("div",{className:"relative w-full h-full overflow-auto",style:{transform:`scale(${c})`,transformOrigin:"top left"},children:[(()=>{if(!r)return null;const s=[];return e.forEach(t=>{t.relationships.belongsTo.forEach(a=>{const r=e.find(e=>e.name===a);if(r){const e=t.position.x+150,i=t.position.y+50,l=r.position.x+150,n=r.position.y+50;s.push(R.jsx("line",{x1:e,y1:i,x2:l,y2:n,stroke:"#6B7280",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.6"},`${t.name}-${a}`))}})}),R.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:0},children:s})})(),u.map(e=>R.jsxs(js.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute bg-white rounded-lg shadow-md border-2 transition-all duration-200 "+(t===e.name?"border-primary shadow-lg":"border-gray-200"),style:{left:e.position.x,top:e.position.y,width:"300px",zIndex:t===e.name?10:1},onClick:()=>a(t===e.name?null:e.name),children:[R.jsx("div",{className:`${e.color} text-white p-3 rounded-t-lg`,children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx(Ee,{className:"h-4 w-4 mr-2"}),R.jsx("h3",{className:"font-semibold text-sm",children:e.displayName})]}),R.jsx("span",{className:"text-xs opacity-75",children:e.name})]})}),R.jsx("div",{className:"p-3 max-h-64 overflow-y-auto",children:R.jsx("div",{className:"space-y-1",children:e.columns.map(e=>{return R.jsxs("div",{className:"flex items-center justify-between p-2 rounded text-xs "+(e.isPrimaryKey?"bg-yellow-50 border border-yellow-200":e.isForeignKey?"bg-blue-50 border border-blue-200":"bg-gray-50"),children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-2",children:e.isPrimaryKey?R.jsx(_e,{className:"h-3 w-3 text-yellow-600"}):e.isForeignKey?R.jsx(ke,{className:"h-3 w-3 text-blue-600"}):(s=e.type,s.includes("uuid")?R.jsx(_e,{className:"h-3 w-3"}):s.includes("text")||s.includes("varchar")?R.jsx("span",{className:"text-xs",children:"T"}):s.includes("integer")||s.includes("numeric")?R.jsx("span",{className:"text-xs",children:"#"}):s.includes("boolean")?R.jsx("span",{className:"text-xs",children:"B"}):s.includes("timestamp")||s.includes("date")?R.jsx("span",{className:"text-xs",children:"D"}):R.jsx("span",{className:"text-xs",children:"?"}))}),R.jsx("span",{className:"font-medium "+(e.isPrimaryKey?"text-yellow-800":e.isForeignKey?"text-blue-800":"text-gray-700"),children:e.name})]}),R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("span",{className:"text-gray-500",children:e.type}),!e.nullable&&R.jsx("span",{className:"text-red-500 text-xs",children:"*"})]})]},e.name);var s})})}),(e.relationships.hasMany.length>0||e.relationships.belongsTo.length>0)&&R.jsx("div",{className:"border-t border-gray-200 p-3 bg-gray-50 rounded-b-lg",children:R.jsxs("div",{className:"text-xs text-gray-600",children:[e.relationships.hasMany.length>0&&R.jsxs("div",{className:"mb-1",children:[R.jsx("span",{className:"font-medium",children:"Has many:"})," ",e.relationships.hasMany.join(", ")]}),e.relationships.belongsTo.length>0&&R.jsxs("div",{children:[R.jsx("span",{className:"font-medium",children:"Belongs to:"})," ",e.relationships.belongsTo.join(", ")]})]})})]},e.name))]})}),R.jsxs("div",{className:"flex items-center justify-between mt-4",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>m(Math.max(.5,c-.1)),className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"-"}),R.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(100*c),"%"]}),R.jsx("button",{onClick:()=>m(Math.min(2,c+.1)),className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"+"})]}),R.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx(_e,{className:"h-3 w-3 text-yellow-600 mr-1"}),"Primary Key"]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx(ke,{className:"h-3 w-3 text-blue-600 mr-1"}),"Foreign Key"]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx("span",{className:"text-red-500 mr-1",children:"*"}),"Required"]})]})]})]})},xt=new Map,ut=O.memo(()=>{var e;const[s,t]=O.useState(null),[a,r]=O.useState(null),[i,l]=O.useState([]),[n,o]=O.useState(null),[d,m]=O.useState(!0),[x,u]=O.useState(null),[h,g]=O.useState(null),[p,y]=O.useState(""),[b,f]=O.useState(!1),[j,N]=O.useState("overview"),[v,w]=O.useState(!0),[C,k]=O.useState(null),S={profiles:{name:"profiles",displayName:"User Profiles",icon:R.jsx(q,{className:"h-6 w-6"}),description:"User accounts and profile information",color:"bg-blue-500"},user_preferences:{name:"user_preferences",displayName:"User Preferences",icon:R.jsx(le,{className:"h-6 w-6"}),description:"User notification and display preferences",color:"bg-indigo-500"},user_security_settings:{name:"user_security_settings",displayName:"Security Settings",icon:R.jsx(le,{className:"h-6 w-6"}),description:"User security and authentication settings",color:"bg-red-500"},products:{name:"products",displayName:"Products",icon:R.jsx(J,{className:"h-6 w-6"}),description:"Product catalog and inventory",color:"bg-green-500"},categories:{name:"categories",displayName:"Categories",icon:R.jsx(Q,{className:"h-6 w-6"}),description:"Product categories and organization",color:"bg-purple-500"},orders:{name:"orders",displayName:"Orders",icon:R.jsx(Y,{className:"h-6 w-6"}),description:"Customer orders and transactions",color:"bg-orange-500"},order_items:{name:"order_items",displayName:"Order Items",icon:R.jsx(J,{className:"h-5 w-5"}),description:"Individual items within orders",color:"bg-orange-400"},cart_items:{name:"cart_items",displayName:"Shopping Carts",icon:R.jsx(Y,{className:"h-5 w-5"}),description:"Active shopping cart items",color:"bg-yellow-500"},wishlist_items:{name:"wishlist_items",displayName:"Wishlists",icon:R.jsx(ce,{className:"h-6 w-6"}),description:"Customer wishlist items",color:"bg-pink-500"},reviews:{name:"reviews",displayName:"Reviews",icon:R.jsx(ce,{className:"h-5 w-5"}),description:"Product reviews and ratings",color:"bg-yellow-600"},addresses:{name:"addresses",displayName:"Addresses",icon:R.jsx(fe,{className:"h-6 w-6"}),description:"Customer shipping and billing addresses",color:"bg-teal-500"},payment_methods:{name:"payment_methods",displayName:"Payment Methods",icon:R.jsx(xe,{className:"h-6 w-6"}),description:"Customer payment information",color:"bg-indigo-500"},product_variants:{name:"product_variants",displayName:"Product Variants",icon:R.jsx(J,{className:"h-5 w-5"}),description:"Product variations and options",color:"bg-teal-500"},order_tracking:{name:"order_tracking",displayName:"Order Tracking",icon:R.jsx(Fe,{className:"h-6 w-6"}),description:"Order shipment tracking information",color:"bg-cyan-500"}},P=O.useCallback(()=>c(null,null,function*(){try{m(!0),u(null);const e=Object.keys(S),s={};let a=0;const r=e.map(e=>c(null,null,function*(){try{const{count:s,error:t}=yield ws.from(e).select("*",{count:"exact",head:!0}).limit(1);if(t){if(t.message.includes("not found")||t.message.includes("does not exist"))return{tableName:e,count:0};const{count:s,error:a}=yield ws.from(e).select("id",{count:"exact",head:!0});return a?{tableName:e,count:0}:{tableName:e,count:s||0}}const{count:a,error:r}=yield ws.from(e).select("id",{count:"exact",head:!0});return r?{tableName:e,count:0}:{tableName:e,count:a||0}}catch(s){return{tableName:e,count:0}}}));(yield Promise.allSettled(r)).forEach(e=>{if("fulfilled"===e.status){const{tableName:t,count:r}=e.value;s[t]=r,a+=r}});const i=e.filter(e=>S[e]).map(e=>{const t=S[e];return{name:t.name||e,displayName:t.displayName||e,icon:t.icon||R.jsx(W,{className:"h-6 w-6"}),description:t.description||"Unknown table",color:t.color||"bg-gray-500",count:s[e]||0}});t({totalTables:e.length,totalRecords:a,lastUpdated:new Date,tables:i}),k(new Date)}catch(e){u("Failed to fetch database statistics")}finally{m(!1)}}),[S]),E=O.useCallback(()=>c(null,null,function*(){try{const e="dashboard-metrics",s=sessionStorage.getItem(e),t=sessionStorage.getItem(`${e}-time`);if(s&&t&&Date.now()-parseInt(t)<12e4)return void r(JSON.parse(s));const[a,i,l]=yield Promise.all([ws.from("orders").select("id, total_amount, status, created_at").limit(100),ws.from("profiles").select("id, full_name, created_at").limit(100),ws.from("products").select("id").limit(100)]);if(a.error||i.error||l.error)return;const n=a.data||[],o=i.data||[],d=l.data||[],c=(new Date).toISOString().split("T")[0],m=n.filter(e=>e.created_at.startsWith(c)),x=o.filter(e=>e.created_at.startsWith(c)),u=n.filter(e=>"completed"===e.status),h=m.filter(e=>"completed"===e.status).reduce((e,s)=>e+(parseFloat(s.total_amount)||0),0),g={totalUsers:o.length,totalProducts:d.length,totalOrders:n.length,totalRevenue:u.reduce((e,s)=>e+(parseFloat(s.total_amount)||0),0),pendingOrders:n.filter(e=>"pending"===e.status).length,lowStockProducts:0,newUsersToday:x.length,ordersToday:m.length,revenueToday:h,conversionRate:o.length>0?n.length/o.length*100:0};r(g),sessionStorage.setItem(e,JSON.stringify(g)),sessionStorage.setItem(`${e}-time`,Date.now().toString())}catch(e){}}),[]),_=O.useCallback(()=>c(null,null,function*(){try{l([{metricName:"Revenue",currentValue:15420,previousValue:13750,percentageChange:12.5,trendDirection:"up"},{metricName:"Orders",currentValue:342,previousValue:316,percentageChange:8.3,trendDirection:"up"},{metricName:"Customers",currentValue:1250,previousValue:1277,percentageChange:-2.1,trendDirection:"down"},{metricName:"Conversion Rate",currentValue:3.2,previousValue:3.03,percentageChange:5.7,trendDirection:"up"}])}catch(e){l([])}}),[]),A=O.useCallback(()=>c(null,null,function*(){try{const e={onlineUsers:Math.floor(50*Math.random())+10,pendingOrders:Math.floor(10*Math.random())+1,recentSalesCount:Math.floor(20*Math.random())+5,recentSalesValue:Math.floor(5e3*Math.random())+1e3,lowStockAlerts:Math.floor(5*Math.random())+1,systemStatus:"operational"};o(e)}catch(e){o({onlineUsers:0,pendingOrders:0,recentSalesCount:0,recentSalesValue:0,lowStockAlerts:0,systemStatus:"error"})}}),[]),T=O.useCallback(()=>c(null,null,function*(){f(!0),k(new Date);try{yield Promise.all([P(),E(),_(),A()])}catch(e){}finally{f(!1)}}),[E,_,A]),D=()=>c(null,null,function*(){try{const e=new Date;e.setDate(e.getDate()-30);const s=new Date,{data:t,error:a}=yield ws.rpc("export_analytics_data",{start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0],data_type:"all"});let r;if(!a&&t)r=t;else{const[t,a,i]=yield Promise.all([ws.from("orders").select("id, total_amount, status, created_at, user_id").gte("created_at",e.toISOString()).lte("created_at",s.toISOString()),ws.from("profiles").select("id, email, full_name, role, created_at, is_active").gte("created_at",e.toISOString()).lte("created_at",s.toISOString()),ws.from("products").select("id, name, price, stock, created_at, is_active").gte("created_at",e.toISOString()).lte("created_at",s.toISOString())]);r={orders:t.data||[],users:a.data||[],products:i.data||[],metadata:{start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0],data_type:"all",exported_at:(new Date).toISOString(),method:"fallback"}}}const i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),l=URL.createObjectURL(i),n=document.createElement("a");n.href=l,n.download=`analytics-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(e){u("Failed to export analytics data")}});O.useEffect(()=>{T()},[T]),O.useEffect(()=>{if(!v)return;const e=setInterval(()=>{A()},3e4);return()=>clearInterval(e)},[v,A]),O.useEffect(()=>{if(!v)return;const e=setInterval(()=>{T()},3e5);return()=>clearInterval(e)},[v,T]);const F=((e,s,t)=>{const a=t||JSON.stringify(s);return O.useMemo(()=>{if(xt.has(a))return xt.get(a);const s=e();if(xt.set(a,s),xt.size>100){const e=xt.keys().next().value;xt.delete(e)}return s},s)})(()=>{if(!(null==s?void 0:s.tables))return[];const e=p.toLowerCase();return s.tables.filter(s=>s.displayName.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))},[null==s?void 0:s.tables,p],`filtered-tables-${p}`);if(((e,s,t)=>{const a=O.useRef();O.useCallback((...t)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(...t)},s)},[e,s,...t])})(e=>y(e),300,[]),"table"===j&&h){const e=S[h];return R.jsx(ct,{tableName:h,displayName:(null==e?void 0:e.displayName)||h,onBack:()=>{N("overview"),g(null)}})}return"analytics"===j?R.jsx("div",{children:"Analytics view not implemented yet"}):"schema"===j?R.jsx(mt,{}):d?R.jsx("div",{className:"p-8",children:R.jsx(Ds,{size:"large",text:"Loading database statistics..."})}):x?R.jsx("div",{className:"p-8",children:R.jsx(ot,{error:x,onRetry:T,type:"database",size:"large"})}):R.jsxs("div",{className:"p-6 space-y-6",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[R.jsx(W,{className:"h-8 w-8 mr-3 text-primary"}),"Admin Dashboard"]}),R.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time business intelligence and database administration"}),C&&R.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center",children:[R.jsx(je,{className:"h-4 w-4 mr-1"}),"Last updated: ",C.toLocaleTimeString()]})]}),R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsxs("label",{className:"flex items-center",children:[R.jsx("input",{type:"checkbox",checked:v,onChange:e=>w(e.target.checked),className:"mr-2"}),R.jsx("span",{className:"text-sm text-gray-600",children:"Auto-refresh"})]}),R.jsxs("button",{onClick:()=>N("analytics"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[R.jsx(se,{className:"h-4 w-4 mr-2"}),"Analytics"]}),R.jsxs("button",{onClick:()=>N("schema"),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[R.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Schema"]}),R.jsxs("button",{onClick:D,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[R.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Export"]}),R.jsxs("button",{onClick:()=>c(null,null,function*(){yield T()}),disabled:b,className:"flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:[R.jsx(B,{className:"h-4 w-4 mr-2 "+(b?"animate-spin":"")}),"Refresh"]})]})]}),n&&R.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[R.jsx(Te,{className:"h-5 w-5 mr-2 text-blue-600"}),"Live Metrics"]}),R.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-2 animate-pulse"}),R.jsxs("span",{className:"text-gray-600",children:[(null==n?void 0:n.onlineUsers)||0," Online"]})]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx(ae,{className:"h-4 w-4 mr-1 text-orange-500"}),R.jsxs("span",{className:"text-gray-600",children:[(null==n?void 0:n.pendingOrders)||0," Pending Orders"]})]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx(K,{className:"h-4 w-4 mr-1 text-red-500"}),R.jsxs("span",{className:"text-gray-600",children:[(null==n?void 0:n.lowStockAlerts)||0," Low Stock"]})]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx(me,{className:"h-4 w-4 mr-1 text-green-500"}),R.jsxs("span",{className:"text-gray-600",children:["$",(null!=(e=null==n?void 0:n.recentSalesValue)?e:0).toFixed(2)," Recent Sales"]})]})]})]})}),a&&R.jsxs("div",{children:[R.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[R.jsx(se,{className:"h-6 w-6 mr-2 text-primary"}),"Business Intelligence Overview"]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),R.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a.totalUsers.toLocaleString()}),R.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",a.newUsersToday," today"]})]}),R.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:R.jsx(q,{className:"h-8 w-8 text-blue-600"})})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),R.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a.totalProducts.toLocaleString()}),R.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.lowStockProducts," low stock"]})]}),R.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:R.jsx(J,{className:"h-8 w-8 text-green-600"})})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),R.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a.totalOrders.toLocaleString()}),R.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.ordersToday," today"]})]}),R.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:R.jsx(Y,{className:"h-8 w-8 text-orange-600"})})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),R.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",a.totalRevenue.toLocaleString()]}),R.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["$",a.revenueToday.toFixed(2)," today"]})]}),R.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:R.jsx(me,{className:"h-8 w-8 text-purple-600"})})]})})]})]}),i.length>0&&R.jsxs("div",{children:[R.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[R.jsx(ee,{className:"h-6 w-6 mr-2 text-primary"}),"Performance Trends (30 Days)"]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.filter(e=>e&&e.metricName).map((e,s)=>R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[R.jsxs("div",{className:"flex items-center justify-between mb-2",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600 capitalize",children:((null==e?void 0:e.metricName)||"").replace("_"," ")}),R.jsxs("div",{className:`flex items-center px-2 py-1 rounded-full text-xs font-medium ${(()=>{switch(null==e?void 0:e.trendDirection){case"up":return"text-green-600 bg-green-100";case"down":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})()}`,children:[(()=>{switch(null==e?void 0:e.trendDirection){case"up":return R.jsx(Oe,{className:"h-4 w-4 text-green-500"});case"down":return R.jsx(Me,{className:"h-4 w-4 text-red-500"});default:return R.jsx(Re,{className:"h-4 w-4 text-gray-500"})}})(),R.jsxs("span",{className:"ml-1",children:[Math.abs((null==e?void 0:e.percentageChange)||0).toFixed(1),"%"]})]})]}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((null==e?void 0:e.metricName)||"").toLowerCase().includes("revenue")||((null==e?void 0:e.metricName)||"").toLowerCase().includes("value")?`$${((null==e?void 0:e.currentValue)||0).toLocaleString()}`:((null==e?void 0:e.currentValue)||0).toLocaleString()}),R.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",((null==e?void 0:e.previousValue)||0).toLocaleString()," previous period"]})]},`kpi-${s}-${e.metricName}`))})]}),R.jsxs("div",{children:[R.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[R.jsx(De,{className:"h-6 w-6 mr-2 text-primary"}),"Quick Insights"]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>N("analytics"),children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products"}),R.jsx(J,{className:"h-5 w-5 text-green-600"})]}),R.jsx("div",{className:"space-y-3",children:a&&a.topProducts&&a.topProducts.length>0?a.topProducts.slice(0,3).map((e,s)=>R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{className:"text-sm text-gray-600",children:e.name||`Product ${s+1}`}),R.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",e.totalRevenue?e.totalRevenue.toLocaleString():"0"]})]},s)):R.jsx(R.Fragment,{children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{className:"text-sm text-gray-600",children:"No data available"}),R.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"$0"})]})})}),R.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:R.jsxs("button",{className:"text-sm text-primary hover:text-primary-dark font-medium flex items-center",children:["View detailed analysis",R.jsx(Oe,{className:"h-4 w-4 ml-1 rotate-45"})]})})]}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{g("orders"),N("table")},children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),R.jsx(Te,{className:"h-5 w-5 text-blue-600"})]}),R.jsx("div",{className:"space-y-3",children:a&&a.recentOrders&&a.recentOrders.length>0?a.recentOrders.slice(0,3).map((e,s)=>R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Order #",e.order_number||`ORD-${s+1}`]}),R.jsx("p",{className:"text-xs text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():"Just now"})]}),R.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["$",e.total_amount?parseFloat(e.total_amount).toFixed(2):"0.00"]})]},s)):R.jsx(R.Fragment,{children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("span",{className:"text-sm font-medium text-gray-900",children:"No recent orders"}),R.jsx("p",{className:"text-xs text-gray-500",children:"-"})]}),R.jsx("span",{className:"text-sm font-semibold text-green-600",children:"$0.00"})]})})}),R.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:R.jsxs("button",{className:"text-sm text-primary hover:text-primary-dark font-medium flex items-center",children:["Manage all orders",R.jsx(Oe,{className:"h-4 w-4 ml-1 rotate-45"})]})})]}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{g("products"),N("table")},children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),R.jsx(K,{className:"h-5 w-5 text-red-600"})]}),R.jsx("div",{className:"space-y-3",children:a&&a.lowStockProductsList&&a.lowStockProductsList.length>0?a.lowStockProductsList.slice(0,3).map((e,s)=>R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name||`Product ${s+1}`}),R.jsxs("p",{className:"text-xs "+(e.stock<=5?"text-red-500":e.stock<=10?"text-orange-500":"text-yellow-500"),children:["Only ",e.stock||0," left"]})]}),R.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+(e.stock<=5?"bg-red-100 text-red-800":e.stock<=10?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:e.stock<=5?"Critical":e.stock<=10?"Low":"Medium"})]},s)):R.jsx(R.Fragment,{children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("span",{className:"text-sm font-medium text-gray-900",children:"All products well stocked"}),R.jsx("p",{className:"text-xs text-green-500",children:"No alerts"})]}),R.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Good"})]})})}),R.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:R.jsxs("button",{className:"text-sm text-primary hover:text-primary-dark font-medium flex items-center",children:["Manage inventory",R.jsx(Oe,{className:"h-4 w-4 ml-1 rotate-45"})]})})]})]})]}),R.jsxs("div",{children:[R.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[R.jsx(le,{className:"h-6 w-6 mr-2 text-primary"}),"Quick Actions"]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[R.jsxs("button",{onClick:()=>{g("products"),N("table")},className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[R.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:R.jsx(J,{className:"h-5 w-5 text-green-600"})}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"Add Product"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Create new product"})]})]}),R.jsxs("button",{onClick:()=>{g("orders"),N("table")},className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[R.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:R.jsx(Y,{className:"h-5 w-5 text-blue-600"})}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"View Orders"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Manage customer orders"})]})]}),R.jsxs("button",{onClick:()=>{g("profiles"),N("table")},className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[R.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mr-3",children:R.jsx(q,{className:"h-5 w-5 text-purple-600"})}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"Manage Users"}),R.jsx("p",{className:"text-sm text-gray-500",children:"User administration"})]})]}),R.jsxs("button",{onClick:()=>N("analytics"),className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[R.jsx("div",{className:"p-2 bg-orange-100 rounded-lg mr-3",children:R.jsx(se,{className:"h-5 w-5 text-orange-600"})}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"View Reports"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Analytics & insights"})]})]})]})]}),s&&R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:R.jsx(W,{className:"h-6 w-6 text-blue-600"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tables"}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalTables})]})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:R.jsx(se,{className:"h-6 w-6 text-green-600"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Records"}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalRecords.toLocaleString()})]})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:R.jsx(ee,{className:"h-6 w-6 text-purple-600"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),R.jsx("p",{className:"text-sm font-bold text-gray-900",children:s.lastUpdated.toLocaleTimeString()})]})]})})]}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsxs("div",{className:"flex-1 relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search tables...",value:p,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]}),R.jsxs("button",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[R.jsx(we,{className:"h-4 w-4 mr-2"}),"Filter"]}),R.jsxs("button",{onClick:D,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[R.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Export Data"]})]})}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:F.map(e=>R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>{g(e.name),N("table")},children:R.jsxs("div",{className:"p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("div",{className:`p-3 ${e.color} rounded-lg text-white`,children:e.icon}),R.jsxs("div",{className:"text-right",children:[R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.count.toLocaleString()}),R.jsx("p",{className:"text-xs text-gray-500",children:"records"})]})]}),R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.displayName}),R.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:e.name}),R.jsxs("button",{className:"flex items-center text-primary hover:text-primary-dark text-sm font-medium",children:[R.jsx(De,{className:"h-4 w-4 mr-1"}),"View"]})]})]})},e.name))}),0===F.length&&p&&R.jsxs("div",{className:"text-center py-12",children:[R.jsx(W,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tables found"}),R.jsx("p",{className:"text-gray-600",children:"Try adjusting your search terms."})]})]})});ut.displayName="ComprehensiveAdminDashboard";const ht=Object.freeze(Object.defineProperty({__proto__:null,ComprehensiveAdminDashboard:ut},Symbol.toStringTag,{value:"Module"})),gt=({children:e,className:s="",enablePWASupport:t=!0,showMobileMenu:a=!1,onMobileMenuToggle:r})=>{const[i,l]=O.useState({width:"undefined"!=typeof window?window.innerWidth:1024,height:"undefined"!=typeof window?window.innerHeight:768,isMobile:!1,isTablet:!1,isDesktop:!0,isPWA:!1,orientation:"landscape"}),[n,o]=O.useState(!1);O.useEffect(()=>{const e=()=>{const e=window.innerWidth,s=window.innerHeight,t=e<768,a=e>=768&&e<1024,r=e>=1024,i=window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||!0===window.navigator.standalone;l({width:e,height:s,isMobile:t,isTablet:a,isDesktop:r,isPWA:i,orientation:e>s?"landscape":"portrait"})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]);const d=()=>{const e=!n;o(e),null==r||r(e)},c=["responsive-container",i.isMobile&&"mobile-view",i.isTablet&&"tablet-view",i.isDesktop&&"desktop-view",i.isPWA&&"pwa-view","landscape"===i.orientation&&"landscape-view","portrait"===i.orientation&&"portrait-view",t&&i.isPWA&&"pwa-safe-area",s].filter(Boolean).join(" ");return R.jsxs("div",{className:c,children:[t&&i.isPWA&&R.jsx("div",{className:"pwa-status-bar-spacer h-safe-top"}),i.isMobile&&a&&R.jsxs("div",{className:"mobile-menu-header flex items-center justify-between p-4 bg-white border-b border-gray-200",children:[R.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),R.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":n?"Close menu":"Open menu",children:n?R.jsx($,{className:"w-6 h-6 text-gray-600"}):R.jsx(de,{className:"w-6 h-6 text-gray-600"})})]}),i.isMobile&&n&&R.jsx("div",{className:"mobile-menu-overlay fixed inset-0 z-50 bg-black bg-opacity-50",children:R.jsxs("div",{className:"mobile-menu-content bg-white w-80 h-full shadow-xl",children:[R.jsx("div",{className:"p-4 border-b border-gray-200",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu"}),R.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100",children:R.jsx($,{className:"w-5 h-5 text-gray-600"})})]})}),R.jsx("div",{className:"p-4",children:R.jsx("p",{className:"text-sm text-gray-600",children:"Mobile menu content"})})]})}),R.jsx("div",{className:"responsive-content",children:e}),t&&i.isPWA&&R.jsx("div",{className:"pwa-bottom-spacer h-safe-bottom"})]})},pt=({children:e,onClick:s,className:t="",icon:a,variant:r="ghost",size:i="md",loading:l=!1,disabled:n=!1,ariaLabel:o,title:d,mobileOptimized:c=!1})=>{const m=c?"touch-manipulation select-none active:scale-95 transition-transform duration-150":"",x={sm:c?"min-h-[44px] min-w-[44px] px-4 py-2 text-sm rounded-md":"px-3 py-1.5 text-sm rounded-md",md:c?"min-h-[48px] min-w-[48px] px-5 py-3 text-sm rounded-lg":"px-4 py-2 text-sm rounded-lg",lg:c?"min-h-[56px] min-w-[56px] px-6 py-4 text-base rounded-lg":"px-6 py-3 text-base rounded-lg"},u={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return R.jsx("button",{onClick:s,disabled:n||l,className:`relative inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 ${m} ${{primary:"bg-gradient-to-r from-purple-600 to-purple-700 text-white hover:from-purple-700 hover:to-purple-800 focus:ring-purple-500",secondary:"bg-white text-purple-700 hover:bg-purple-100 focus:ring-purple-500",ghost:"text-purple-600 hover:text-purple-700 hover:bg-purple-50 focus:ring-purple-500"}[r]} ${x[i]} ${t} ${n?"opacity-50 cursor-not-allowed":""}`,"aria-label":o,title:d,children:l?R.jsx("div",{className:`${u[i]} border-2 border-current border-t-transparent rounded-full animate-spin`}):R.jsxs(R.Fragment,{children:[a&&R.jsx(a,{className:`${u[i]} ${e?"mr-2":""}`}),e]})})},yt=pt,bt=({users:e,selectedUsers:s,onSelectUser:t,onSelectAll:a,onEditUser:r,onDeleteUser:i,onResendConfirmation:l,onConfirmEmail:n,actionLoading:o,getStatusBadge:d,getRoleBadge:c})=>R.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[R.jsx("div",{className:"hidden lg:block overflow-x-auto",children:R.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-left",children:R.jsx("input",{type:"checkbox",checked:s.length===e.length&&e.length>0,onChange:a,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),R.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var a,m;return R.jsxs("tr",{className:"hover:bg-gray-50",children:[R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("input",{type:"checkbox",checked:s.includes(e.id),onChange:()=>t(e.id),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:R.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:R.jsx("span",{className:"text-sm font-medium text-indigo-700",children:(null==(m=null==(a=null==e?void 0:e.name)?void 0:a.charAt(0))?void 0:m.toUpperCase())||"U"})})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:(null==e?void 0:e.name)||"Unknown User"}),R.jsx("div",{className:"text-sm text-gray-500",children:e.email}),e.phone&&R.jsx("div",{className:"text-xs text-gray-400",children:e.phone})]})]})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c(e.role)}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d(e)}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:R.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[!e.emailVerified&&R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>l(e.id),disabled:o===`confirm-${e.id}`,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Resend confirmation email",children:R.jsx(H,{className:"w-4 h-4"})}),R.jsx("button",{onClick:()=>n(e.id),disabled:o===`manual-confirm-${e.id}`,className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:"Manually confirm email",children:R.jsx(U,{className:"w-4 h-4"})})]}),R.jsx("button",{onClick:()=>r(e),className:"text-indigo-600 hover:text-indigo-900",title:"Edit user",children:R.jsx(ge,{className:"w-4 h-4"})}),R.jsx("button",{onClick:()=>i(e.id),disabled:o===`delete-${e.id}`,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Delete user",children:R.jsx(pe,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),R.jsx("div",{className:"lg:hidden",children:e.map(e=>{var a,m;return R.jsx("div",{className:"p-4 border-b border-gray-200 last:border-b-0",children:R.jsxs("div",{className:"flex items-start justify-between",children:[R.jsxs("div",{className:"flex items-start space-x-3",children:[R.jsx("input",{type:"checkbox",checked:s.includes(e.id),onChange:()=>t(e.id),className:"mt-1 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),R.jsx("div",{className:"flex-shrink-0",children:R.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:R.jsx("span",{className:"text-sm font-medium text-indigo-700",children:(null==(m=null==(a=null==e?void 0:e.name)?void 0:a.charAt(0))?void 0:m.toUpperCase())||"U"})})}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:(null==e?void 0:e.name)||"Unknown User"}),R.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.email}),e.phone&&R.jsx("div",{className:"text-xs text-gray-400",children:e.phone}),R.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[c(e.role),d(e)]}),R.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),R.jsxs("div",{className:"flex items-center space-x-2",children:[!e.emailVerified&&R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>l(e.id),disabled:o===`confirm-${e.id}`,className:"p-2 text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Resend confirmation email",children:R.jsx(H,{className:"w-4 h-4"})}),R.jsx("button",{onClick:()=>n(e.id),disabled:o===`manual-confirm-${e.id}`,className:"p-2 text-green-600 hover:text-green-900 disabled:opacity-50",title:"Manually confirm email",children:R.jsx(U,{className:"w-4 h-4"})})]}),R.jsx("button",{onClick:()=>r(e),className:"p-2 text-indigo-600 hover:text-indigo-900",title:"Edit user",children:R.jsx(ge,{className:"w-4 h-4"})}),R.jsx("button",{onClick:()=>i(e.id),disabled:o===`delete-${e.id}`,className:"p-2 text-red-600 hover:text-red-900 disabled:opacity-50",title:"Delete user",children:R.jsx(pe,{className:"w-4 h-4"})})]})]})},e.id)})}),0===e.length&&R.jsxs("div",{className:"text-center py-12",children:[R.jsx("div",{className:"text-gray-400 mb-4",children:R.jsx(q,{className:"w-12 h-12 mx-auto"})}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),R.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]}),ft=({isOpen:e,onClose:s,onSubmit:t,formData:a,setFormData:r,isEdit:i,loading:l,generatedPassword:d,showPassword:c,setShowPassword:m})=>R.jsx(Os,{isOpen:e,onClose:s,title:i?"Edit User":"Create New User",children:R.jsxs("form",{onSubmit:e=>{e.preventDefault(),t()},className:"space-y-6",children:[R.jsxs("div",{className:"space-y-4",children:[R.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[R.jsx(be,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Basic Information"]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),R.jsx("input",{type:"text",id:"name",required:!0,value:a.name,onChange:e=>r(o(n({},a),{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter full name"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),R.jsxs("div",{className:"relative",children:[R.jsx(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),R.jsx("input",{type:"email",id:"email",required:!0,value:a.email,onChange:e=>r(o(n({},a),{email:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter email address"})]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),R.jsxs("div",{className:"relative",children:[R.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),R.jsx("input",{type:"tel",id:"phone",value:a.phone,onChange:e=>r(o(n({},a),{phone:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter phone number"})]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),R.jsxs("div",{className:"relative",children:[R.jsx(Ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),R.jsx("input",{type:"date",id:"dateOfBirth",value:a.dateOfBirth,onChange:e=>r(o(n({},a),{dateOfBirth:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[R.jsx(z,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Role & Permissions"]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"User Role *"}),R.jsxs("select",{id:"role",required:!0,value:a.role,onChange:e=>r(o(n({},a),{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[R.jsx("option",{value:"customer",children:"Customer"}),R.jsx("option",{value:"seller",children:"Seller"}),R.jsx("option",{value:"admin",children:"Administrator"})]}),R.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["admin"===a.role&&"Full access to all platform features and settings","seller"===a.role&&"Can manage products, orders, and customer interactions","customer"===a.role&&"Can browse products, place orders, and manage account"]})]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:e=>r(o(n({},a),{isActive:e.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),R.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Account is active"})]})]}),!i&&R.jsxs("div",{className:"space-y-4",children:[R.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[R.jsx(Ie,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Email Settings"]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx("input",{type:"checkbox",id:"sendEmail",checked:a.sendEmail,onChange:e=>r(o(n({},a),{sendEmail:e.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),R.jsx("label",{htmlFor:"sendEmail",className:"ml-2 text-sm text-gray-700",children:"Send welcome email with login credentials"})]}),a.sendEmail&&R.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[R.jsx("p",{className:"text-sm text-blue-800",children:R.jsx("strong",{children:"Email will include:"})}),R.jsxs("ul",{className:"mt-1 text-sm text-blue-700 list-disc list-inside",children:[R.jsx("li",{children:"Welcome message and account details"}),R.jsx("li",{children:"Temporary password for first login"}),R.jsx("li",{children:"Email confirmation link (if required)"}),R.jsx("li",{children:"Instructions for getting started"})]})]})]}),d&&R.jsxs("div",{className:"space-y-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generated Password"}),R.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[R.jsx("div",{className:"flex items-center justify-between",children:R.jsxs("div",{className:"flex-1",children:[R.jsxs("p",{className:"text-sm font-medium text-green-800 mb-2",children:["Temporary password for ",a.name,":"]}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("code",{className:"px-3 py-2 bg-white border border-green-300 rounded text-sm font-mono",children:c?d:"••••••••••••"}),R.jsx("button",{type:"button",onClick:()=>m(!c),className:"p-2 text-green-600 hover:text-green-800",children:c?R.jsx($e,{className:"w-4 h-4"}):R.jsx(De,{className:"w-4 h-4"})})]})]})}),R.jsx("p",{className:"mt-2 text-xs text-green-700",children:"Make sure to securely share this password with the user. They should change it after first login."})]})]}),R.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-3 pt-6 border-t border-gray-200",children:[R.jsx(yt,{type:"button",onClick:s,variant:"outline",className:"w-full sm:w-auto",children:"Cancel"}),R.jsx(yt,{type:"submit",variant:"primary",loading:l,className:"w-full sm:w-auto",children:i?"Update User":"Create User"})]})]})}),jt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=(()=>{const[e,s]=O.useState({width:"undefined"!=typeof window?window.innerWidth:1024,height:"undefined"!=typeof window?window.innerHeight:768,isMobile:!1,isTablet:!1,isDesktop:!0,isPWA:!1,orientation:"landscape"});return O.useEffect(()=>{const e=()=>{const e=window.innerWidth,t=window.innerHeight,a=e<768,r=e>=768&&e<1024,i=e>=1024,l=window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||!0===window.navigator.standalone;s({width:e,height:t,isMobile:a,isTablet:r,isDesktop:i,isPWA:l,orientation:e>t?"landscape":"portrait"})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e})(),{isInstallable:s,installPWA:t}=(()=>{const[e,s]=O.useState(null),[t,a]=O.useState(!1),[r,i]=O.useState(!1);return O.useEffect(()=>{const e=e=>{e.preventDefault(),s(e),a(!0)},t=()=>{i(!0),a(!1),s(null)},r=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone;return i(r),window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[]),{isInstallable:t,isInstalled:r,installPWA:()=>c(null,null,function*(){if(!e)return!1;e.prompt();const{outcome:t}=yield e.userChoice;return"accepted"===t&&(s(null),a(!1),!0)})}})(),{checkPermission:a,logSecurityEvent:r,rateLimitStatus:i}=j(),[l,d]=O.useState([]),[m,x]=O.useState(!0),[u,h]=O.useState([]),[g,p]=O.useState(!1),[y,b]=O.useState(!1),[f,S]=O.useState(null),[P,E]=O.useState(!1),[_,A]=O.useState(""),[T,D]=O.useState(""),[F,M]=O.useState({search:"",role:"all",status:"all",sortBy:"createdAt",sortOrder:"desc"}),[I,L]=O.useState({email:"",name:"",role:"customer",phone:"",dateOfBirth:"",isActive:!0,sendEmail:!0}),{showNotification:K}=N();O.useEffect(()=>{B()},[]);const z=O.useMemo(()=>{let e=l.filter(e=>{if(F.search){const s=F.search.toLowerCase();if(!e.name.toLowerCase().includes(s)&&!e.email.toLowerCase().includes(s))return!1}if("all"!==F.role&&e.role!==F.role)return!1;if("all"!==F.status)switch(F.status){case"active":return!0===e.isActive;case"inactive":return!1===e.isActive;case"unverified":return!1===e.emailVerified}return!0});return e.sort((e,s)=>{let t,a;switch(F.sortBy){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"email":t=e.email.toLowerCase(),a=s.email.toLowerCase();break;case"role":t=e.role,a=s.role;break;case"createdAt":t=new Date(e.createdAt),a=new Date(s.createdAt);break;default:return 0}return"asc"===F.sortOrder?t>a?1:-1:t<a?1:-1}),e},[l,F]),B=()=>c(null,null,function*(){try{x(!0);const e=yield Cs();d(e||[])}catch(e){K({type:"error",title:"Error",message:"Failed to load users. Please try again."})}finally{x(!1)}}),W=()=>{L({email:"",name:"",role:"customer",phone:"",dateOfBirth:"",isActive:!0,sendEmail:!0}),A(""),E(!1)},V=e=>c(null,null,function*(){if(0!==u.length)try{D("bulk-role");const s=yield ks(u,{role:e});s.success?(d(l.map(s=>u.includes(s.id)?o(n({},s),{role:e}):s)),h([]),K({type:"success",title:"Roles Updated",message:`${u.length} users have been updated to ${e} role.`})):K({type:"error",title:"Error",message:s.error||"Failed to update user roles."})}catch(s){K({type:"error",title:"Error",message:"Failed to update user roles. Please try again later."})}finally{D("")}else K({type:"warning",title:"No Users Selected",message:"Please select users to update."})}),G=e=>c(null,null,function*(){if(0!==u.length)try{D("bulk-status");const s=yield ks(u,{isActive:e});s.success?(d(l.map(s=>u.includes(s.id)?o(n({},s),{isActive:e}):s)),h([]),K({type:"success",title:"Status Updated",message:`${u.length} users have been ${e?"activated":"deactivated"}.`})):K({type:"error",title:"Error",message:s.error||"Failed to update user status."})}catch(s){K({type:"error",title:"Error",message:"Failed to update user status. Please try again later."})}finally{D("")}else K({type:"warning",title:"No Users Selected",message:"Please select users to update."})});return m?R.jsx("div",{className:"flex items-center justify-center h-64",children:R.jsx(Ds,{size:"lg"})}):R.jsx(gt,{className:"user-management-container",enablePWASupport:!0,showMobileMenu:e.isMobile,children:R.jsxs("div",{className:"space-y-6 p-4 sm:p-6 lg:p-8",children:[s&&R.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 mb-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx(Smartphone,{className:"w-5 h-5 text-indigo-600 mr-2"}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-sm font-medium text-indigo-900",children:"Install App"}),R.jsx("p",{className:"text-sm text-indigo-700",children:"Get the full experience with our mobile app"})]})]}),R.jsx("button",{onClick:t,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700",children:"Install"})]})}),R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between user-management-header",children:[R.jsxs("div",{children:[R.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center user-management-title",children:[R.jsx(q,{className:"w-8 h-8 mr-3 text-indigo-600"}),"User Management"]}),R.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage users, roles, and permissions across your platform"})]}),R.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[R.jsxs(yt,{onClick:()=>{const e=[["Name","Email","Role","Phone","Status","Email Verified","Created At"],...z.map(e=>[e.name,e.email,e.role,e.phone||"",e.isActive?"Active":"Inactive",e.emailVerified?"Yes":"No",new Date(e.createdAt).toLocaleDateString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`users-export-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t),K({type:"success",title:"Export Complete",message:"Users have been exported to CSV successfully."})},variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[R.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),R.jsxs(yt,{onClick:()=>p(!0),variant:"primary",size:"sm",className:"w-full sm:w-auto",children:[R.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]}),R.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),R.jsx("input",{type:"text",placeholder:"Search users...",value:F.search,onChange:e=>M(o(n({},F),{search:e.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),R.jsxs("select",{value:F.role,onChange:e=>M(o(n({},F),{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[R.jsx("option",{value:"all",children:"All Roles"}),R.jsx("option",{value:"admin",children:"Admin"}),R.jsx("option",{value:"seller",children:"Seller"}),R.jsx("option",{value:"customer",children:"Customer"})]}),R.jsxs("select",{value:F.status,onChange:e=>M(o(n({},F),{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[R.jsx("option",{value:"all",children:"All Status"}),R.jsx("option",{value:"active",children:"Active"}),R.jsx("option",{value:"inactive",children:"Inactive"}),R.jsx("option",{value:"unverified",children:"Unverified"})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsxs("select",{value:F.sortBy,onChange:e=>M(o(n({},F),{sortBy:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[R.jsx("option",{value:"createdAt",children:"Created Date"}),R.jsx("option",{value:"name",children:"Name"}),R.jsx("option",{value:"email",children:"Email"}),R.jsx("option",{value:"role",children:"Role"})]}),R.jsx("button",{onClick:()=>M(o(n({},F),{sortOrder:"asc"===F.sortOrder?"desc":"asc"})),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:"asc"===F.sortOrder?"↑":"↓"})]})]}),u.length>0&&R.jsx("div",{className:"mt-4 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[R.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[u.length," user",1!==u.length?"s":""," selected"]}),R.jsxs("div",{className:"flex flex-wrap gap-2",children:[R.jsx("button",{onClick:()=>V("admin"),disabled:"bulk-role"===T,className:"px-3 py-1 text-xs font-medium text-purple-700 bg-purple-100 rounded-full hover:bg-purple-200 disabled:opacity-50",children:"Make Admin"}),R.jsx("button",{onClick:()=>V("seller"),disabled:"bulk-role"===T,className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200 disabled:opacity-50",children:"Make Seller"}),R.jsx("button",{onClick:()=>V("customer"),disabled:"bulk-role"===T,className:"px-3 py-1 text-xs font-medium text-gray-700 bg-gray-100 rounded-full hover:bg-gray-200 disabled:opacity-50",children:"Make Customer"}),R.jsx("button",{onClick:()=>G(!0),disabled:"bulk-status"===T,className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full hover:bg-green-200 disabled:opacity-50",children:"Activate"}),R.jsx("button",{onClick:()=>G(!1),disabled:"bulk-status"===T,className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Deactivate"}),R.jsx("button",{onClick:()=>c(null,null,function*(){if(0!==u.length){if(window.confirm(`Are you sure you want to delete ${u.length} users? This action cannot be undone.`))try{D("bulk-delete");const e=yield Ss(u);e.success?(d(l.filter(e=>!u.includes(e.id))),h([]),K({type:"success",title:"Users Deleted",message:`${u.length} users have been deleted successfully.`})):K({type:"error",title:"Error",message:e.error||"Failed to delete users."})}catch(e){K({type:"error",title:"Error",message:"Failed to delete users. Please try again later."})}finally{D("")}}else K({type:"warning",title:"No Users Selected",message:"Please select users to delete."})}),disabled:"bulk-delete"===T,className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Delete"})]})]})})]}),R.jsx(bt,{users:z,selectedUsers:u,onSelectUser:e=>{u.includes(e)?h(u.filter(s=>s!==e)):h([...u,e])},onSelectAll:()=>{u.length===z.length?h([]):h(z.map(e=>e.id))},onEditUser:e=>{S(e),L({email:e.email,name:e.name,role:e.role,phone:e.phone||"",dateOfBirth:e.dateOfBirth||"",isActive:e.isActive||!0,sendEmail:!1}),b(!0)},onDeleteUser:e=>c(null,null,function*(){if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{D(`delete-${e}`);const s=yield v(e);s.success?(d(l.filter(s=>s.id!==e)),h(u.filter(s=>s!==e)),K({type:"success",title:"User Deleted",message:"User has been deleted successfully."})):K({type:"error",title:"Error",message:s.error||"Failed to delete user."})}catch(s){K({type:"error",title:"Error",message:"Failed to delete user. Please try again later."})}finally{D("")}}),onResendConfirmation:e=>c(null,null,function*(){try{D(`confirm-${e}`);const s=yield Es(e);s.success?K({type:"success",title:"Email Sent",message:"Confirmation email has been sent successfully."}):K({type:"error",title:"Error",message:s.error||"Failed to send confirmation email."})}catch(s){K({type:"error",title:"Error",message:"Failed to send confirmation email."})}finally{D("")}}),onConfirmEmail:e=>c(null,null,function*(){try{D(`manual-confirm-${e}`);const s=yield Ps(e);s.success?(d(l.map(s=>s.id===e?o(n({},s),{emailVerified:!0}):s)),K({type:"success",title:"Email Confirmed",message:"User email has been confirmed successfully."})):K({type:"error",title:"Error",message:s.error||"Failed to confirm email."})}catch(s){K({type:"error",title:"Error",message:"Failed to confirm email."})}finally{D("")}}),actionLoading:T,getStatusBadge:e=>e.isActive?e.emailVerified?R.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[R.jsx(U,{className:"w-3 h-3 mr-1"}),"Active"]}):R.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[R.jsx(je,{className:"w-3 h-3 mr-1"}),"Unverified"]}):R.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[R.jsx($,{className:"w-3 h-3 mr-1"}),"Inactive"]}),getRoleBadge:e=>R.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{admin:"bg-purple-100 text-purple-800",seller:"bg-blue-100 text-blue-800",customer:"bg-gray-100 text-gray-800"}[e]}`,children:e.charAt(0).toUpperCase()+e.slice(1)})}),R.jsx(ft,{isOpen:g,onClose:()=>{p(!1),W()},onSubmit:()=>c(null,null,function*(){if(!a("create","user_management"))return;if(!i.userCreation)return void K({type:"error",title:"Rate Limit Exceeded",message:"Please wait before creating another user."});const e=w({email:C(I.email),name:C(I.name),role:I.role,phone:I.phone?C(I.phone):void 0,dateOfBirth:I.dateOfBirth});if(e.isValid){e.warnings&&e.warnings.length>0&&K({type:"warning",title:"Validation Warnings",message:e.warnings.join(", ")});try{D("create");const e=yield createNewUser({email:C(I.email),name:C(I.name),role:I.role,phone:I.phone,dateOfBirth:I.dateOfBirth,isActive:I.isActive,sendEmail:I.sendEmail});e.success&&e.user?(d([...l,e.user]),p(!1),W(),e.password&&(A(e.password),E(!0)),K({type:"success",title:"User Created",message:`User has been created successfully${I.sendEmail?" and confirmation email sent":""}.`})):K({type:"error",title:"Error",message:e.error||"Failed to create user."})}catch(s){K({type:"error",title:"Error",message:"Failed to create user. Please try again later."})}finally{D("")}}else K({type:"error",title:"Validation Error",message:e.errors.join(", ")})}),formData:I,setFormData:L,isEdit:!1,loading:"create"===T,generatedPassword:_,showPassword:P,setShowPassword:E}),R.jsx(ft,{isOpen:y,onClose:()=>{b(!1),S(null),W()},onSubmit:()=>c(null,null,function*(){if(!f)return;if(!a("update","user_management"))return;const e=w({email:C(I.email),name:C(I.name),role:I.role,phone:I.phone?C(I.phone):void 0,dateOfBirth:I.dateOfBirth});if(e.isValid)try{D("update");const e=yield k(f.id,{name:I.name,email:I.email,role:I.role,phone:I.phone,dateOfBirth:I.dateOfBirth,isActive:I.isActive});e.success&&e.user?(d(l.map(s=>s.id===f.id?e.user:s)),b(!1),W(),S(null),K({type:"success",title:"User Updated",message:"User has been updated successfully."})):K({type:"error",title:"Error",message:e.error||"Failed to update user."})}catch(s){K({type:"error",title:"Error",message:"Failed to update user. Please try again later."})}finally{D("")}else K({type:"error",title:"Validation Error",message:e.errors.join(", ")})}),formData:I,setFormData:L,isEdit:!0,loading:"update"===T,showPassword:P,setShowPassword:E})]})})}},Symbol.toStringTag,{value:"Module"})),Nt=({title:e="No data found",description:s="There is no data to display at the moment.",icon:t=J,action:a,className:r=""})=>R.jsxs("div",{className:`flex flex-col items-center justify-center py-12 text-center ${r}`,children:[R.jsx("div",{className:"bg-gray-100 rounded-full p-4 mb-4",children:R.jsx(t,{className:"h-8 w-8 text-gray-400"})}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:e}),R.jsx("p",{className:"text-gray-500 mb-4",children:s}),a&&R.jsx("div",{className:"mt-2",children:a})]}),vt=({count:e=1,className:s=""})=>R.jsx(R.Fragment,{children:Array.from({length:e}).map((e,t)=>R.jsx("div",{className:`bg-white rounded-lg border border-gray-200 p-6 shadow-sm animate-pulse ${s}`,children:R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsx("div",{className:"bg-gray-200 rounded-lg h-16 w-16"}),R.jsxs("div",{className:"flex-1 space-y-2",children:[R.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),R.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),R.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})},t))}),wt=({title:e="Loading...",subtitle:s="Please wait while we load the content",showProgressBar:t=!0,className:a=""})=>R.jsxs("div",{className:`flex flex-col items-center justify-center py-12 ${a}`,children:[R.jsx("div",{className:"mb-4",children:R.jsx("div",{className:"h-12 w-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"})}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:e}),R.jsx("p",{className:"text-gray-500",children:s}),t&&R.jsx("div",{className:"mt-6 w-64 bg-gray-200 rounded-full h-2",children:R.jsx("div",{className:"bg-purple-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),Ct=Object.freeze(Object.defineProperty({__proto__:null,ProductManagement:()=>{const{products:e,deleteProduct:s,loading:t}=g(),{showNotification:a}=N(),[r,i]=O.useState(!1),[l,d]=O.useState(null),[m,x]=O.useState(""),[u,h]=O.useState("all"),[p,y]=O.useState([]),[b,f]=O.useState(!1),[j,v]=O.useState("name"),[w,C]=O.useState("asc"),[k,S]=O.useState("all"),[P,E]=O.useState({min:0,max:1e3}),[_,A]=O.useState("table"),[T,D]=O.useState(!1),[F,M]=O.useState(!1),I=["all",...Array.from(new Set(e.map(e=>e.category)))],L=O.useMemo(()=>{const s=e.filter(e=>{const s=e.name.toLowerCase().includes(m.toLowerCase())||e.description.toLowerCase().includes(m.toLowerCase()),t="all"===u||e.category===u;let a=!0;"in-stock"===k?a=e.stock>10:"low-stock"===k?a=e.stock>0&&e.stock<=10:"out-of-stock"===k&&(a=0===e.stock);const r=e.price>=P.min&&e.price<=P.max;return s&&t&&a&&r});return s.sort((e,s)=>{let t,a;switch(j){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"price":t=e.price,a=s.price;break;case"stock":t=e.stock,a=s.stock;break;case"createdAt":t=new Date(e.createdAt||0).getTime(),a=new Date(s.createdAt||0).getTime();break;default:return 0}return t<a?"asc"===w?-1:1:t>a?"asc"===w?1:-1:0}),s},[e,m,u,k,P,j,w]),U=()=>{d(null),i(!0)},$=e=>{d(e),i(!0)},K=e=>{window.confirm(`Are you sure you want to delete "${e.name}"?`)&&(s(e.id),a({type:"success",title:"Product Deleted",message:`${e.name} has been deleted successfully.`}))},z=e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},W=e=>c(null,null,function*(){if(0!==p.length)try{y([]),a({type:"success",title:"Products Updated",message:`${p.length} products have been ${"active"===e?"activated":"deactivated"}.`})}catch(s){a({type:"error",title:"Error",message:"Failed to update products. Please try again."})}}),V=e=>{j===e?C("asc"===w?"desc":"asc"):(v(e),C("asc"))},H=e=>0===e?{text:"Out of Stock",color:"text-red-600 bg-red-100"}:e<10?{text:"Low Stock",color:"text-yellow-600 bg-yellow-100"}:{text:"In Stock",color:"text-green-600 bg-green-100"},Z=[{key:"select",title:R.jsx("button",{onClick:()=>{p.length===L.length?y([]):y(L.map(e=>e.id))},className:"flex items-center justify-center w-full",children:p.length===L.length&&L.length>0?R.jsx(ze,{className:"h-4 w-4 text-indigo-600"}):R.jsx(Be,{className:"h-4 w-4 text-gray-400"})}),width:50,render:(e,s)=>R.jsx("button",{onClick:e=>{e.stopPropagation(),z(s.id)},className:"flex items-center justify-center w-full",children:p.includes(s.id)?R.jsx(ze,{className:"h-4 w-4 text-indigo-600"}):R.jsx(Be,{className:"h-4 w-4 text-gray-400"})})},{key:"product",title:R.jsxs("button",{onClick:()=>V("name"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[R.jsx("span",{children:"Product"}),"name"===j&&("asc"===w?R.jsx(We,{className:"h-4 w-4"}):R.jsx(Ve,{className:"h-4 w-4"}))]}),minWidth:200,render:(e,s)=>{var t;return R.jsxs("div",{className:"flex items-center",children:[R.jsx("img",{src:s.images&&s.images.length>0&&s.images[0]||"https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image",alt:s.name,className:"h-12 w-12 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),R.jsxs("div",{className:"ml-4",children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),R.jsxs("div",{className:"text-sm text-gray-500",children:[null==(t=s.description)?void 0:t.slice(0,50),"..."]})]})]})}},{key:"category",title:"Category",width:100,render:e=>R.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e})},{key:"price",title:R.jsxs("button",{onClick:()=>V("price"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[R.jsx("span",{children:"Price"}),"price"===j&&("asc"===w?R.jsx(We,{className:"h-4 w-4"}):R.jsx(Ve,{className:"h-4 w-4"}))]}),width:120,render:(e,s)=>R.jsxs("div",{children:[R.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₹",s.price.toFixed(2)]}),s.originalPrice&&R.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["₹",s.originalPrice.toFixed(2)]}),s.originalPrice&&R.jsxs("div",{className:"text-xs text-green-600 font-medium",children:[Math.round((s.originalPrice-s.price)/s.originalPrice*100),"% off"]})]})},{key:"stock",title:R.jsxs("button",{onClick:()=>V("stock"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[R.jsx("span",{children:"Stock"}),"stock"===j&&("asc"===w?R.jsx(We,{className:"h-4 w-4"}):R.jsx(Ve,{className:"h-4 w-4"}))]}),width:120,render:(e,s)=>{const t=H(s.stock);return R.jsxs("div",{children:[R.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.color}`,children:t.text}),R.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[s.stock," units"]})]})}},{key:"sellerName",title:"Seller",width:120,render:e=>R.jsx("span",{className:"text-sm text-gray-900",children:e})},{key:"actions",title:"Actions",width:120,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:e=>{e.stopPropagation(),$(s)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Product",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Duplicate Product",children:R.jsx(G,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation(),K(s)},className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Product",children:R.jsx(pe,{className:"h-4 w-4"})})]})}];return t?R.jsx(Ds,{text:"Loading products..."}):R.jsx(Fs,{children:R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),R.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all products across the platform (",L.length," of ",e.length," products)"]})]}),R.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[R.jsxs("button",{onClick:()=>c(null,null,function*(){M(!0);try{yield new Promise(e=>setTimeout(e,1e3)),a({type:"success",title:"Refreshed",message:"Product data has been refreshed."})}catch(e){a({type:"error",title:"Refresh Failed",message:"Failed to refresh data. Please try again."})}finally{M(!1)}}),disabled:F,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(B,{className:"h-4 w-4 "+(F?"animate-spin":"")}),R.jsx("span",{children:"Refresh"})]}),R.jsxs("button",{onClick:()=>c(null,null,function*(){D(!0);try{yield new Promise(e=>setTimeout(e,2e3)),a({type:"success",title:"Export Complete",message:"Products have been exported successfully."})}catch(e){a({type:"error",title:"Export Failed",message:"Failed to export products. Please try again."})}finally{D(!1)}}),disabled:T,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(Ne,{className:"h-4 w-4"}),R.jsx("span",{children:T?"Exporting...":"Export"})]}),R.jsxs(js.button,{onClick:U,className:"btn-primary flex items-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[R.jsx(he,{className:"h-4 w-4"}),R.jsx("span",{children:"Add Product"})]})]})]}),R.jsx(Ns,{children:p.length>0&&R.jsx(js.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("div",{className:"flex items-center space-x-3",children:R.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[p.length," product",1!==p.length?"s":""," selected"]})}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>W("active"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Activate"}),R.jsx("button",{onClick:()=>W("inactive"),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 text-sm",children:"Deactivate"}),R.jsx("button",{onClick:()=>c(null,null,function*(){if(0!==p.length&&window.confirm(`Are you sure you want to delete ${p.length} products?`))try{for(const e of p)yield s(e);y([]),a({type:"success",title:"Products Deleted",message:`${p.length} products have been deleted successfully.`})}catch(e){a({type:"error",title:"Error",message:"Failed to delete some products. Please try again."})}}),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),R.jsx("button",{onClick:()=>y([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"}),R.jsx("div",{className:"flex items-center space-x-2",children:R.jsx("button",{onClick:()=>A("table"===_?"grid":"table"),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm",children:"table"===_?"Grid View":"Table View"})})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Products"}),R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),R.jsx("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:I.map(e=>R.jsx("option",{value:e,children:"all"===e?"All Categories":e},e))})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),R.jsxs("select",{value:k,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"all",children:"All Stock Levels"}),R.jsx("option",{value:"in-stock",children:"In Stock"}),R.jsx("option",{value:"low-stock",children:"Low Stock"}),R.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("input",{type:"number",value:P.min,onChange:e=>E(s=>o(n({},s),{min:Number(e.target.value)})),placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),R.jsx("input",{type:"number",value:P.max,onChange:e=>E(s=>o(n({},s),{max:Number(e.target.value)})),placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(m||"all"!==u||"all"!==k||P.min>0||P.max<1e3)&&R.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",L.length," of ",e.length," products"]}),R.jsx("button",{onClick:()=>{x(""),h("all"),S("all"),E({min:0,max:1e3})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),t?R.jsx(vt,{count:8}):0===L.length?R.jsx(Nt,{icon:R.jsx(J,{className:"h-24 w-24"}),title:"No products found",description:"No products match your current filters. Try adjusting your search criteria or add a new product.",action:{label:"Add Product",onClick:U}}):"table"===_?R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:R.jsx(lt,{columns:Z,data:L,loading:t,emptyMessage:"No products found",onRowClick:$})}):R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:L.map(e=>R.jsxs(js.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>$(e),children:[R.jsxs("div",{className:"relative",children:[R.jsx("img",{src:e.images&&e.images.length>0&&e.images[0]||"https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image",alt:e.name,className:"w-full h-48 object-cover",onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),R.jsx("div",{className:"absolute top-2 left-2",children:R.jsx("button",{onClick:s=>{s.stopPropagation(),z(e.id)},className:"p-1 bg-white rounded-md shadow-sm",children:p.includes(e.id)?R.jsx(ze,{className:"h-4 w-4 text-indigo-600"}):R.jsx(Be,{className:"h-4 w-4 text-gray-400"})})}),R.jsx("div",{className:"absolute top-2 right-2",children:(()=>{const s=H(e.stock);return R.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.color}`,children:s.text})})()})]}),R.jsxs("div",{className:"p-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 truncate",children:e.name}),R.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),R.jsxs("div",{className:"flex items-center justify-between mb-3",children:[R.jsxs("div",{children:[R.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",e.price.toFixed(2)]}),e.originalPrice&&R.jsxs("span",{className:"text-sm text-gray-500 line-through ml-2",children:["₹",e.originalPrice.toFixed(2)]})]}),R.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e.category})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("span",{className:"text-sm text-gray-500",children:[e.stock," units"]}),R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:s=>{s.stopPropagation(),$(e)},className:"p-1 text-indigo-600 hover:text-indigo-900 rounded hover:bg-indigo-50",title:"Edit Product",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:s=>{s.stopPropagation(),K(e)},className:"p-1 text-red-600 hover:text-red-900 rounded hover:bg-red-50",title:"Delete Product",children:R.jsx(pe,{className:"h-4 w-4"})})]})]})]})]},e.id))}),R.jsx(Os,{isOpen:r,onClose:()=>i(!1),title:l?"Edit Product":"Add New Product",size:"xl",children:R.jsx(fs,{product:l,onClose:()=>i(!1)})})]})})}},Symbol.toStringTag,{value:"Module"})),kt=Object.freeze(Object.defineProperty({__proto__:null,OrderManager:()=>{const[e,s]=O.useState([]),[t,a]=O.useState(!0),[r,i]=O.useState(""),[l,d]=O.useState("all"),[m,x]=O.useState(null),[u,h]=O.useState([]),[g,p]=O.useState("created_at"),[y,b]=O.useState("desc"),[f,j]=O.useState({start:"",end:""}),[v,w]=O.useState({min:0,max:1e4}),[C,k]=O.useState(""),[S,P]=O.useState(!1),[E,_]=O.useState(!1),[A,T]=O.useState(!1),[D,F]=O.useState(!1),{showNotification:M}=N();O.useEffect(()=>{L()},[]);const I=O.useMemo(()=>{const s=e.filter(e=>{const s=e.profiles.name.toLowerCase().includes(r.toLowerCase())||e.profiles.email.toLowerCase().includes(r.toLowerCase())||e.id.toLowerCase().includes(r.toLowerCase()),t="all"===l||e.status===l,a=!C||e.profiles.name.toLowerCase().includes(C.toLowerCase())||e.profiles.email.toLowerCase().includes(C.toLowerCase()),i=e.total>=v.min&&e.total<=v.max;let n=!0;if(f.start&&f.end){const s=new Date(e.created_at),t=new Date(f.start),a=new Date(f.end);n=s>=t&&s<=a}return s&&t&&a&&i&&n});return s.sort((e,s)=>{let t,a;switch(g){case"created_at":t=new Date(e.created_at).getTime(),a=new Date(s.created_at).getTime();break;case"total":t=e.total,a=s.total;break;case"status":t=e.status,a=s.status;break;default:return 0}return t<a?"asc"===y?-1:1:t>a?"asc"===y?1:-1:0}),s},[e,r,l,C,v,f,g,y]),L=()=>c(null,null,function*(){try{const{data:e,error:t}=yield ws.from("orders").select("\n          id,\n          total,\n          status,\n          created_at,\n          user_id,\n          profiles!inner(email, name),\n          order_items(\n            id,\n            quantity,\n            price,\n            products(name, image)\n          )\n        ").order("created_at",{ascending:!1});if(t)throw t;const a=(e||[]).map(e=>{var s,t;return{id:e.id,total:e.total,status:e.status,created_at:e.created_at,user_id:e.user_id,profiles:{email:(null==(s=e.profiles)?void 0:s.email)||"",name:(null==(t=e.profiles)?void 0:t.name)||""},order_items:(e.order_items||[]).map(e=>{var s,t;return{id:e.id,quantity:e.quantity,price:e.price,products:{name:(null==(s=e.products)?void 0:s.name)||"",image:(null==(t=e.products)?void 0:t.image)||""}}})}});s(a)}catch(e){}finally{a(!1)}}),$=(t,a)=>c(null,null,function*(){try{const{error:r}=yield ws.from("orders").update({status:a}).eq("id",t);if(r)throw r;s(e.map(e=>e.id===t?o(n({},e),{status:a}):e)),M({type:"success",title:"Order Updated",message:`Order status updated to ${a} successfully!`})}catch(r){M({type:"error",title:"Update Failed",message:"Failed to update order status. Please try again."})}}),K=t=>c(null,null,function*(){if(0!==u.length)try{const{error:a}=yield ws.from("orders").update({status:t}).in("id",u);if(a)throw a;s(e.map(e=>u.includes(e.id)?o(n({},e),{status:t}):e)),h([]),M({type:"success",title:"Orders Updated",message:`${u.length} orders updated to ${t} successfully!`})}catch(a){M({type:"error",title:"Update Failed",message:"Failed to update orders. Please try again."})}}),z=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},W=e=>{switch(e){case"pending":return R.jsx(je,{className:"h-4 w-4"});case"confirmed":case"shipped":case"delivered":return R.jsx(U,{className:"h-4 w-4"});case"cancelled":return R.jsx(Ge,{className:"h-4 w-4"});default:return R.jsx(J,{className:"h-4 w-4"})}},V=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),G=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=[{key:"select",title:"Select",width:50,render:(e,s)=>R.jsx("button",{onClick:e=>{var t;e.stopPropagation(),t=s.id,h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"flex items-center justify-center w-full",children:u.includes(s.id)?R.jsx(ze,{className:"h-4 w-4 text-indigo-600"}):R.jsx(Be,{className:"h-4 w-4 text-gray-400"})})},{key:"id",title:"Order ID",width:120,render:(e,s)=>R.jsxs("span",{className:"font-medium",children:["#",String(s.id).slice(0,8)]})},{key:"customer",title:"Customer",minWidth:200,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:R.jsx(be,{className:"h-4 w-4 text-indigo-600"})}),R.jsxs("div",{children:[R.jsx("div",{className:"font-medium text-gray-900",children:s.profiles.name}),R.jsx("div",{className:"text-gray-500 text-sm",children:s.profiles.email})]})]})},{key:"total",title:"Total",width:120,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx(me,{className:"h-4 w-4 text-green-600"}),R.jsx("span",{className:"font-semibold text-gray-900",children:V(s.total)})]})},{key:"status",title:"Status",width:140,render:(e,s)=>R.jsxs("span",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${z(s.status)}`,children:[W(s.status),R.jsx("span",{className:"capitalize",children:s.status})]})},{key:"created_at",title:"Date",width:150,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx(Ue,{className:"h-4 w-4 text-gray-400"}),R.jsx("span",{className:"text-gray-600",children:G(s.created_at)})]})},{key:"actions",title:"Actions",width:150,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:e=>{e.stopPropagation(),x(s),P(!0)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"View Details",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation(),x(s),_(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Order",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Print Invoice",children:R.jsx(te,{className:"h-4 w-4"})}),"pending"===s.status&&R.jsx("button",{onClick:e=>{e.stopPropagation(),$(s.id,"confirmed")},className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700",title:"Confirm Order",children:"Confirm"}),"confirmed"===s.status&&R.jsx("button",{onClick:e=>{e.stopPropagation(),$(s.id,"shipped")},className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",title:"Mark as Shipped",children:"Ship"})]})}];return t?R.jsx(wt,{title:"Loading Orders",subtitle:"Please wait while we load the order data..."}):R.jsx(Fs,{children:R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),R.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all customer orders (",I.length," of ",e.length," orders)"]})]}),R.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[R.jsxs("button",{onClick:()=>c(null,null,function*(){T(!0),yield L(),T(!1),M({type:"success",title:"Refreshed",message:"Order data has been refreshed."})}),disabled:A,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(B,{className:"h-4 w-4 "+(A?"animate-spin":"")}),R.jsx("span",{children:"Refresh"})]}),R.jsxs("button",{onClick:()=>c(null,null,function*(){F(!0);try{yield new Promise(e=>setTimeout(e,2e3)),M({type:"success",title:"Export Complete",message:"Orders have been exported successfully."})}catch(e){M({type:"error",title:"Export Failed",message:"Failed to export orders. Please try again."})}finally{F(!1)}}),disabled:D,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(Ne,{className:"h-4 w-4"}),R.jsx("span",{children:D?"Exporting...":"Export"})]})]})]}),R.jsx(Ns,{children:u.length>0&&R.jsx(js.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("div",{className:"flex items-center space-x-3",children:R.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[u.length," order",1!==u.length?"s":""," selected"]})}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>K("confirmed"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Confirm"}),R.jsx("button",{onClick:()=>K("shipped"),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200 text-sm",children:"Ship"}),R.jsx("button",{onClick:()=>K("cancelled"),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Cancel"}),R.jsx("button",{onClick:()=>c(null,null,function*(){if(0!==u.length&&window.confirm(`Are you sure you want to delete ${u.length} orders? This action cannot be undone.`))try{const{error:t}=yield ws.from("orders").delete().in("id",u);if(t)throw t;s(e.filter(e=>!u.includes(e.id))),h([]),M({type:"success",title:"Orders Deleted",message:`${u.length} orders deleted successfully!`})}catch(t){M({type:"error",title:"Delete Failed",message:"Failed to delete orders. Please try again."})}}),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),R.jsx("button",{onClick:()=>h([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[R.jsx("div",{className:"flex items-center justify-between mb-4",children:R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"})}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Orders"}),R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Search by order ID, customer...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),R.jsxs("select",{value:l,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"all",children:"All Statuses"}),R.jsx("option",{value:"pending",children:"Pending"}),R.jsx("option",{value:"confirmed",children:"Confirmed"}),R.jsx("option",{value:"shipped",children:"Shipped"}),R.jsx("option",{value:"delivered",children:"Delivered"}),R.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("input",{type:"date",value:f.start,onChange:e=>j(s=>o(n({},s),{start:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),R.jsx("input",{type:"date",value:f.end,onChange:e=>j(s=>o(n({},s),{end:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Range"}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("input",{type:"number",value:v.min,onChange:e=>w(s=>o(n({},s),{min:Number(e.target.value)})),placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),R.jsx("input",{type:"number",value:v.max,onChange:e=>w(s=>o(n({},s),{max:Number(e.target.value)})),placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(r||"all"!==l||f.start||f.end||v.min>0||v.max<1e4)&&R.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",I.length," of ",e.length," orders"]}),R.jsx("button",{onClick:()=>{i(""),d("all"),j({start:"",end:""}),w({min:0,max:1e4}),k("")},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),0===I.length?R.jsx(Nt,{icon:J,title:"No orders found",description:"No orders match your current filters. Try adjusting your search criteria."}):R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:R.jsx(lt,{columns:H,data:I,loading:t,emptyMessage:"No orders found",onRowClick:e=>{x(e),P(!0)}})}),R.jsx(Os,{isOpen:S,onClose:()=>{P(!1),x(null)},title:m?`Order #${m.id.slice(0,8)}`:"Order Details",size:"xl",children:m&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{children:[R.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[R.jsx(be,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Customer Information"]}),R.jsxs("div",{className:"mt-3 space-y-3",children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-600",children:"Name:"}),R.jsx("span",{className:"font-medium",children:m.profiles.name})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-600",children:"Email:"}),R.jsx("span",{className:"font-medium",children:m.profiles.email})]})]})]}),R.jsxs("div",{children:[R.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[R.jsx(J,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Order Information"]}),R.jsxs("div",{className:"mt-3 space-y-3",children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-600",children:"Order Date:"}),R.jsx("span",{className:"font-medium",children:G(m.created_at)})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-600",children:"Status:"}),R.jsxs("span",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${z(m.status)}`,children:[W(m.status),R.jsx("span",{className:"capitalize",children:m.status})]})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-600",children:"Total:"}),R.jsx("span",{className:"font-medium text-lg",children:V(m.total)})]})]})]})]}),R.jsxs("div",{className:"mt-6",children:[R.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),R.jsx("div",{className:"space-y-3",children:m.order_items.map(e=>R.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[R.jsx("img",{src:e.products.image||"/placeholder-image.jpg",alt:e.products.name,className:"h-16 w-16 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="/placeholder-image.jpg"}}),R.jsxs("div",{className:"ml-4 flex-1",children:[R.jsx("h5",{className:"font-medium text-gray-900",children:e.products.name}),R.jsxs("p",{className:"text-gray-600",children:["Quantity: ",e.quantity]})]}),R.jsxs("div",{className:"text-right",children:[R.jsx("p",{className:"font-medium text-gray-900",children:V(e.price*e.quantity)}),R.jsxs("p",{className:"text-gray-600 text-sm",children:[V(e.price)," each"]})]})]},e.id))})]})]})}),R.jsx(Os,{isOpen:E,onClose:()=>{_(!1),x(null)},title:m?`Edit Order #${m.id.slice(0,8)}`:"Edit Order",size:"lg",children:m&&R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),R.jsxs("select",{value:m.status,onChange:e=>$(m.id,e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"pending",children:"Pending"}),R.jsx("option",{value:"confirmed",children:"Confirmed"}),R.jsx("option",{value:"shipped",children:"Shipped"}),R.jsx("option",{value:"delivered",children:"Delivered"}),R.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),R.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[R.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),R.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Save Changes"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"}));class St{static getBucketName(e){return e.startsWith("products")?this.BUCKETS.PRODUCTS:e.startsWith("categories")?this.BUCKETS.CATEGORIES:e.startsWith("collections/banners")?this.BUCKETS.COLLECTION_BANNERS:e.startsWith("collections")?this.BUCKETS.COLLECTIONS:e.startsWith("users")?this.BUCKETS.USERS:e.startsWith("marketing")?this.BUCKETS.MARKETING:this.BUCKETS.PRODUCTS}static uploadImage(e,s="products",t){return c(this,null,function*(){var a;try{const r=this.validateFile(e);if(!r.isValid)return{url:"",path:"",error:r.error};const i=this.getBucketName(s);yield this.initializeAllBuckets();const l=e.name.split(".").pop(),n=`${Date.now()}-${Math.random().toString(36).substring(2)}.${l}`,o=`${s}/${n}`;t&&t({loaded:0,total:e.size,percentage:0});const{data:d,error:c}=yield ws.storage.from(i).upload(o,e,{cacheControl:"3600",upsert:!1});if(c){if((null==(a=c.message)?void 0:a.includes("Bucket not found"))||400===c.status){yield this.initializeAllBuckets();const s=yield ws.storage.from(i).upload(o,e,{cacheControl:"3600",upsert:!1});if(s.error)return{url:"",path:"",error:s.error.message};const{data:t}=ws.storage.from(i).getPublicUrl(s.data.path);return{url:t.publicUrl,path:s.data.path}}return{url:"",path:"",error:c.message}}t&&t({loaded:e.size,total:e.size,percentage:100});const{data:m}=ws.storage.from(i).getPublicUrl(d.path);return{url:m.publicUrl,path:d.path}}catch(r){return{url:"",path:"",error:r instanceof Error?r.message:"Upload failed"}}})}static deleteImage(e,s="products"){return c(this,null,function*(){try{const t=this.getBucketName(s),{error:a}=yield ws.storage.from(t).remove([e]);return!a}catch(t){return!1}})}static validateFile(e){if(e.size>this.MAX_FILE_SIZE){return{isValid:!1,error:`File size must be less than ${this.MAX_FILE_SIZE/1024/1024}MB`}}if(!this.ALLOWED_TYPES.includes(e.type)){return{isValid:!1,error:"Only JPEG, PNG, and WebP images are allowed"}}return{isValid:!0}}static getOptimizedImageUrl(e,s={}){if(!e)return e;if(e.includes("supabase")){const t=new URLSearchParams;if(s.width&&t.append("width",s.width.toString()),s.height&&t.append("height",s.height.toString()),s.quality&&t.append("quality",s.quality.toString()),t.toString())return`${e}?${t.toString()}`}return e}static createBucketIfNotExists(e){return c(this,null,function*(){try{const{data:s,error:t}=yield ws.storage.listBuckets();if(t)return!1;if(!(null==s?void 0:s.some(s=>s.name===e))){const{error:s}=yield ws.storage.createBucket(e,{public:!0,allowedMimeTypes:this.ALLOWED_TYPES,fileSizeLimit:this.MAX_FILE_SIZE});if(s)return!1}return!0}catch(s){return!1}})}static initializeAllBuckets(){return c(this,null,function*(){try{const e=Object.values(this.BUCKETS),s=yield Promise.all(e.map(e=>this.createBucketIfNotExists(e)));return s.every(e=>e)}catch(e){return!1}})}static initializeBucket(){return c(this,null,function*(){return this.initializeAllBuckets()})}}d(St,"BUCKETS",{PRODUCTS:"products",CATEGORIES:"categories",COLLECTIONS:"collections",COLLECTION_BANNERS:"collection-banners",USERS:"users",MARKETING:"marketing"}),d(St,"MAX_FILE_SIZE",5242880),d(St,"ALLOWED_TYPES",["image/jpeg","image/jpg","image/png","image/webp"]);try{"undefined"!=typeof window&&(window.__StorageService=St)}catch(Kt){}const Pt=({value:e,onChange:s,onPathChange:t,folder:a="categories",placeholder:r="Upload an image or enter URL",className:i="",disabled:l=!1,showUrlInput:n=!0,aspectRatio:o="auto",maxWidth:d=400,maxHeight:m=300})=>{const[x,u]=O.useState(!1),[h,g]=O.useState(!1),[p,y]=O.useState(null),[b,f]=O.useState(e),[j,v]=O.useState(!1),w=O.useRef(null),{showNotification:C}=N(),k=O.useCallback(e=>{e.preventDefault(),l||u(!0)},[l]),S=O.useCallback(e=>{e.preventDefault(),u(!1)},[]),P=O.useCallback(e=>{if(e.preventDefault(),u(!1),l)return;const s=Array.from(e.dataTransfer.files).find(e=>e.type.startsWith("image/"));s?_(s):C({type:"error",title:"Invalid File",message:"Please drop an image file"})},[l]),E=O.useCallback(e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&_(t)},[]),_=e=>c(null,null,function*(){g(!0),y(null);try{const r=yield St.uploadImage(e,a,e=>{y(e)});r.error?C({type:"error",title:"Upload Failed",message:r.error}):(s(r.url),null==t||t(r.path),f(r.url),C({type:"success",title:"Upload Successful",message:"Image uploaded successfully"}))}catch(r){C({type:"error",title:"Upload Error",message:r instanceof Error?r.message:"Failed to upload image"})}finally{g(!1),y(null)}}),A=()=>{const e=b.trim();e&&(s(e),v(!1),C({type:"success",title:"Image URL Updated",message:"Image URL has been updated"}))},T=()=>{switch(o){case"square":return"aspect-square";case"landscape":return"aspect-video";case"portrait":return"aspect-[3/4]";default:return""}};return R.jsxs("div",{className:`space-y-4 ${i}`,children:[R.jsx("div",{className:"relative",children:e?R.jsxs("div",{className:`relative rounded-lg overflow-hidden border border-gray-200 ${T()}`,children:[R.jsx("img",{src:e,alt:"Preview",className:"w-full h-full object-cover",style:{maxWidth:d,maxHeight:m},onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),!l&&R.jsx("button",{onClick:()=>{s(""),null==t||t(""),f(""),w.current&&(w.current.value="")},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Remove image",children:R.jsx($,{className:"h-4 w-4"})}),R.jsx(R.Fragment,{children:h&&R.jsx(js.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:R.jsxs("div",{className:"text-center text-white",children:[R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),p&&R.jsxs("div",{className:"text-sm",children:[p.percentage,"%"]})]})})})]}):R.jsxs("div",{onDragOver:k,onDragLeave:S,onDrop:P,className:`\n              relative border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200\n              ${x?"border-indigo-400 bg-indigo-50":"border-gray-300 hover:border-gray-400"}\n              ${l?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n              ${T()}\n            `,onClick:()=>{var e;return!l&&(null==(e=w.current)?void 0:e.click())},children:[R.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:l}),R.jsx("div",{className:"flex flex-col items-center justify-center h-full min-h-[120px]",children:h?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-3"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Uploading..."}),p&&R.jsxs("div",{className:"mt-2 w-full max-w-xs",children:[R.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:R.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${p.percentage}%`}})}),R.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.percentage,"%"]})]})]}):R.jsxs(R.Fragment,{children:[R.jsx(He,{className:"h-12 w-12 text-gray-400 mb-3"}),R.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r}),R.jsx("p",{className:"text-xs text-gray-500",children:"Drag & drop or click to select"}),R.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, WebP up to 5MB"})]})})]})}),n&&!l&&R.jsx("div",{className:"space-y-2",children:j?R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("input",{type:"url",value:b,onChange:e=>f(e.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyPress:e=>"Enter"===e.key&&A()}),R.jsx("button",{onClick:A,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:R.jsx(U,{className:"h-4 w-4"})}),R.jsx("button",{onClick:()=>{v(!1),f(e)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:R.jsx($,{className:"h-4 w-4"})})]}):R.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 text-sm text-indigo-600 hover:text-indigo-700",children:[R.jsx(ke,{className:"h-4 w-4"}),R.jsx("span",{children:"Or enter image URL"})]})}),R.jsx(R.Fragment,{children:h&&p&&R.jsxs(js.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-sm text-gray-600",children:[R.jsx(Ze,{className:"h-4 w-4 animate-pulse"}),R.jsxs("span",{children:["Uploading... ",p.percentage,"% (",Math.round(p.loaded/1024),"KB / ",Math.round(p.total/1024),"KB)"]})]})})]})},Et=({title:e="Loading...",message:s="Please wait while we load the data.",showSpinner:t=!0})=>R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:R.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[t&&R.jsx("div",{className:"flex justify-center mb-4",children:R.jsx(Ds,{})}),R.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:e}),R.jsx("p",{className:"text-gray-600",children:s})]})}),_t=Object.freeze(Object.defineProperty({__proto__:null,CategoryManagement:()=>{const{categories:e,addCategory:s,updateCategory:t,deleteCategory:a,loading:r}=g(),{showNotification:i}=N(),[l,d]=O.useState(!1),[m,x]=O.useState(null),[u,h]=O.useState(""),[p,y]=O.useState({name:"",slug:"",description:"",imageUrl:"",isActive:!0,sortOrder:0}),[b,f]=O.useState(""),[j,v]=O.useState([]),[w,C]=O.useState("name"),[k,S]=O.useState("asc"),[P,E]=O.useState("all"),[_,A]=O.useState("table"),[T,D]=O.useState(!1),[F,M]=O.useState(!1),[I,L]=O.useState(!1);O.useEffect(()=>{c(null,null,function*(){try{yield St.initializeBucket()}catch(e){}})},[]);const U=O.useMemo(()=>{const s=e.filter(e=>{const s=e.name.toLowerCase().includes(u.toLowerCase())||e.description&&e.description.toLowerCase().includes(u.toLowerCase()),t="all"===P||"active"===P&&e.isActive||"inactive"===P&&!e.isActive;return s&&t});return s.sort((e,s)=>{let t,a;switch(w){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"productCount":t=e.productCount||0,a=s.productCount||0;break;case"sortOrder":t=e.sortOrder||0,a=s.sortOrder||0;break;case"createdAt":t=new Date(e.createdAt||0).getTime(),a=new Date(s.createdAt||0).getTime();break;default:return 0}return t<a?"asc"===k?-1:1:t>a?"asc"===k?1:-1:0}),s},[e,u,P,w,k]),$=()=>{x(null),y({name:"",slug:"",description:"",imageUrl:"",isActive:!0,sortOrder:0}),f(""),d(!0)},K=e=>{x(e),y({name:e.name,slug:e.slug||"",description:e.description||"",imageUrl:e.imageUrl,isActive:e.isActive||!0,sortOrder:e.sortOrder||0}),f(""),d(!0)},z=e=>c(null,null,function*(){if(e.productCount&&e.productCount>0)i({type:"error",title:"Cannot Delete Category",message:`This category has ${e.productCount} products. Please move or delete them first.`});else if(window.confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{yield a(e.id),i({type:"success",title:"Category Deleted",message:`${e.name} has been deleted successfully.`})}catch(s){i({type:"error",title:"Deletion Failed",message:`Failed to delete category: ${s instanceof Error?s.message:"Unknown error"}`})}}),W=e=>{v(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},V=s=>c(null,null,function*(){if(0!==j.length)try{for(const a of j){const r=e.find(e=>e.id===a);r&&(yield t(o(n({},r),{isActive:s})))}v([]),i({type:"success",title:"Categories Updated",message:`${j.length} categories have been ${s?"activated":"deactivated"}.`})}catch(a){i({type:"error",title:"Update Failed",message:"Failed to update categories. Please try again."})}}),H=e=>{w===e?S("asc"===k?"desc":"asc"):(C(e),S("asc"))},Z=e=>{const{name:s,value:t,type:a}=e.target;"checkbox"===a&&e.target instanceof HTMLInputElement?y(t=>o(n({},t),{[s]:e.target.checked})):y(e=>o(n({},e),{[s]:t}))},q=[{key:"select",title:R.jsx("button",{onClick:()=>{j.length===U.length?v([]):v(U.map(e=>e.id))},className:"flex items-center justify-center w-full",children:j.length===U.length&&U.length>0?R.jsx(ze,{className:"h-4 w-4 text-indigo-600"}):R.jsx(Be,{className:"h-4 w-4 text-gray-400"})}),width:50,render:(e,s)=>R.jsx("button",{onClick:e=>{e.stopPropagation(),W(s.id)},className:"flex items-center justify-center w-full",children:j.includes(s.id)?R.jsx(ze,{className:"h-4 w-4 text-indigo-600"}):R.jsx(Be,{className:"h-4 w-4 text-gray-400"})})},{key:"category",title:R.jsxs("button",{onClick:()=>H("name"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[R.jsx("span",{children:"Category"}),"name"===w&&("asc"===k?R.jsx(We,{className:"h-4 w-4"}):R.jsx(Ve,{className:"h-4 w-4"}))]}),minWidth:200,render:(e,s)=>R.jsxs("div",{className:"flex items-center",children:[s.imageUrl?R.jsx("img",{src:s.imageUrl,alt:s.name,className:"h-12 w-12 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="/placeholder-image.jpg"}}):R.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center border border-gray-200",children:R.jsx(Q,{className:"h-6 w-6 text-gray-400"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),s.slug&&R.jsxs("div",{className:"text-sm text-gray-500",children:["/",s.slug]}),s.description&&R.jsx("div",{className:"text-xs text-gray-400 mt-1 max-w-xs truncate",children:s.description})]})]})},{key:"productCount",title:R.jsxs("button",{onClick:()=>H("productCount"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[R.jsx("span",{children:"Products"}),"productCount"===w&&("asc"===k?R.jsx(We,{className:"h-4 w-4"}):R.jsx(Ve,{className:"h-4 w-4"}))]}),width:120,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(J,{className:"h-4 w-4 text-blue-600"}),R.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[e||0," products"]})]})},{key:"sortOrder",title:R.jsxs("button",{onClick:()=>H("sortOrder"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[R.jsx("span",{children:"Order"}),"sortOrder"===w&&("asc"===k?R.jsx(We,{className:"h-4 w-4"}):R.jsx(Ve,{className:"h-4 w-4"}))]}),width:80,render:e=>R.jsx("span",{className:"text-sm text-gray-600 font-mono",children:e||0})},{key:"isActive",title:"Status",width:100,render:(e,s)=>R.jsx("div",{className:"flex items-center space-x-2",children:e?R.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[R.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-1"}),"Active"]}):R.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:[R.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-1"}),"Inactive"]})})},{key:"actions",title:"Actions",width:150,render:(e,s)=>R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:e=>{e.stopPropagation(),K(s)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Category",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Duplicate Category",children:R.jsx(G,{className:"h-4 w-4"})}),R.jsx("button",{onClick:e=>{e.stopPropagation(),z(s)},className:"p-1 rounded hover:bg-red-50 "+(s.productCount&&s.productCount>0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900"),title:s.productCount&&s.productCount>0?"Cannot delete - has products":"Delete Category",disabled:s.productCount&&s.productCount>0,children:R.jsx(pe,{className:"h-4 w-4"})})]})}];return r?R.jsx(Et,{title:"Loading Categories",subtitle:"Fetching category data..."}):R.jsx(Fs,{children:R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Category Management"}),R.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage product categories (",U.length," of ",e.length," categories)"]})]}),R.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[R.jsxs("button",{onClick:()=>c(null,null,function*(){D(!0);try{yield new Promise(e=>setTimeout(e,1e3)),i({type:"success",title:"Refreshed",message:"Category data has been refreshed."})}catch(e){i({type:"error",title:"Refresh Failed",message:"Failed to refresh data. Please try again."})}finally{D(!1)}}),disabled:T,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(B,{className:"h-4 w-4 "+(T?"animate-spin":"")}),R.jsx("span",{children:"Refresh"})]}),R.jsxs("button",{onClick:()=>c(null,null,function*(){M(!0);try{yield new Promise(e=>setTimeout(e,2e3)),i({type:"success",title:"Export Complete",message:"Categories have been exported successfully."})}catch(e){i({type:"error",title:"Export Failed",message:"Failed to export categories. Please try again."})}finally{M(!1)}}),disabled:F,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(Ne,{className:"h-4 w-4"}),R.jsx("span",{children:F?"Exporting...":"Export"})]}),R.jsxs(js.button,{onClick:$,className:"btn-primary flex items-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[R.jsx(he,{className:"h-4 w-4"}),R.jsx("span",{children:"Add Category"})]})]})]}),R.jsx(Ns,{children:j.length>0&&R.jsx(js.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("div",{className:"flex items-center space-x-3",children:R.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[j.length," categor",1!==j.length?"ies":"y"," selected"]})}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>V(!0),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Activate"}),R.jsx("button",{onClick:()=>V(!1),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 text-sm",children:"Deactivate"}),R.jsx("button",{onClick:()=>c(null,null,function*(){if(0===j.length)return;const e=U.filter(e=>j.includes(e.id)&&e.productCount&&e.productCount>0);if(e.length>0)i({type:"error",title:"Cannot Delete Categories",message:`${e.length} categories have products. Please move or delete products first.`});else if(window.confirm(`Are you sure you want to delete ${j.length} categories? This action cannot be undone.`))try{for(const e of j)yield a(e);v([]),i({type:"success",title:"Categories Deleted",message:`${j.length} categories have been deleted successfully.`})}catch(s){i({type:"error",title:"Deletion Failed",message:"Failed to delete some categories. Please try again."})}}),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),R.jsx("button",{onClick:()=>v([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>A("table"===_?"grid":"table"),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm",children:"table"===_?"Grid View":"Table View"}),R.jsxs("button",{onClick:()=>L(!I),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm flex items-center space-x-1",children:[R.jsx(qe,{className:"h-4 w-4"}),R.jsx("span",{children:"Hierarchy"})]})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Categories"}),R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),R.jsxs("select",{value:P,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"all",children:"All Categories"}),R.jsx("option",{value:"active",children:"Active Only"}),R.jsx("option",{value:"inactive",children:"Inactive Only"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),R.jsxs("select",{value:`${w}-${k}`,onChange:e=>{const[s,t]=e.target.value.split("-");C(s),S(t)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),R.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),R.jsx("option",{value:"productCount-desc",children:"Most Products"}),R.jsx("option",{value:"productCount-asc",children:"Least Products"}),R.jsx("option",{value:"sortOrder-asc",children:"Sort Order"}),R.jsx("option",{value:"createdAt-desc",children:"Newest First"}),R.jsx("option",{value:"createdAt-asc",children:"Oldest First"})]})]})]}),(u||"all"!==P)&&R.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",U.length," of ",e.length," categories"]}),R.jsx("button",{onClick:()=>{h(""),E("all")},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),0===U.length?R.jsx(EmptyState,{icon:R.jsx(Q,{className:"h-24 w-24"}),title:"No categories found",description:"No categories match your current filters. Try adjusting your search criteria or add a new category.",action:{label:"Add Category",onClick:$}}):"table"===_?R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:R.jsx(lt,{columns:q,data:U,loading:r,emptyMessage:"No categories found",onRowClick:K})}):R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:U.map(e=>R.jsxs(js.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>K(e),children:[R.jsxs("div",{className:"relative",children:[e.imageUrl?R.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-32 object-cover",onError:e=>{e.target.src="/placeholder-image.jpg"}}):R.jsx("div",{className:"w-full h-32 bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center",children:R.jsx(Q,{className:"h-12 w-12 text-indigo-400"})}),R.jsx("div",{className:"absolute top-2 left-2",children:R.jsx("button",{onClick:s=>{s.stopPropagation(),W(e.id)},className:"p-1 bg-white rounded-md shadow-sm",children:j.includes(e.id)?R.jsx(ze,{className:"h-4 w-4 text-indigo-600"}):R.jsx(Be,{className:"h-4 w-4 text-gray-400"})})}),R.jsx("div",{className:"absolute top-2 right-2",children:e.isActive?R.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[R.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-1"}),"Active"]}):R.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:[R.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-1"}),"Inactive"]})})]}),R.jsxs("div",{className:"p-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 truncate",children:e.name}),e.description&&R.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),R.jsxs("div",{className:"flex items-center justify-between mb-3",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(J,{className:"h-4 w-4 text-blue-600"}),R.jsxs("span",{className:"text-sm text-gray-600",children:[e.productCount||0," products"]})]}),R.jsxs("span",{className:"text-xs text-gray-400",children:["Order: ",e.sortOrder||0]})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("span",{className:"text-sm text-gray-500",children:["/",e.slug]}),R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:s=>{s.stopPropagation(),K(e)},className:"p-1 text-indigo-600 hover:text-indigo-900 rounded hover:bg-indigo-50",title:"Edit Category",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:s=>{s.stopPropagation(),z(e)},className:"p-1 rounded hover:bg-red-50 "+(e.productCount&&e.productCount>0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900"),title:e.productCount&&e.productCount>0?"Cannot delete - has products":"Delete Category",disabled:e.productCount&&e.productCount>0,children:R.jsx(pe,{className:"h-4 w-4"})})]})]})]})]},e.id))}),R.jsx(Os,{isOpen:l,onClose:()=>d(!1),title:m?"Edit Category":"Add New Category",children:R.jsxs("form",{onSubmit:e=>c(null,null,function*(){e.preventDefault();try{m?(yield t(o(n({},m),{name:p.name,description:p.description,imageUrl:p.imageUrl,isActive:p.isActive})),i({type:"success",title:"Category Updated",message:`${p.name} has been updated successfully.`})):(yield s({name:p.name,description:p.description,imageUrl:p.imageUrl}),i({type:"success",title:"Category Added",message:`${p.name} has been added successfully.`})),d(!1)}catch(a){i({type:"error",title:"Operation Failed",message:`Failed to ${m?"update":"add"} category: ${a instanceof Error?a.message:"Unknown error"}`})}}),className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),R.jsx("input",{type:"text",name:"name",value:p.name,onChange:Z,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),R.jsx("input",{type:"text",name:"slug",value:p.slug,onChange:Z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),R.jsx("textarea",{name:"description",value:p.description,onChange:Z,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Image"}),R.jsx(Pt,{value:p.imageUrl,onChange:e=>y(s=>o(n({},s),{imageUrl:e})),onPathChange:f,folder:"categories",placeholder:"Upload category image or enter URL",aspectRatio:"landscape",maxWidth:400,maxHeight:200})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),R.jsx("input",{type:"number",name:"sortOrder",value:p.sortOrder,onChange:Z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx("input",{type:"checkbox",name:"isActive",checked:p.isActive,onChange:Z,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),R.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active"})]})]}),R.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[R.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),R.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:m?"Update Category":"Add Category"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),At=Object.freeze(Object.defineProperty({__proto__:null,CollectionManagement:({className:e=""})=>{const{collections:s,loading:t,addCollection:a,updateCollection:r,deleteCollection:i,refreshCollections:l}=S(),[d,m]=O.useState(!1),[x,u]=O.useState(!1),[h,g]=O.useState(null),[p,y]=O.useState(""),[b,f]=O.useState("all"),[j,v]=O.useState("all"),[w,C]=O.useState("name"),[k,P]=O.useState("asc"),[E,_]=O.useState(!1),[A,T]=O.useState(!1),{showNotification:D}=N(),[F,M]=O.useState({name:"",slug:"",description:"",shortDescription:"",image:"",bannerImage:"",type:"modern",status:"active",price:0,originalPrice:0,discount:0,productIds:[],featured:!1,isExclusive:!1,sortOrder:0,tags:[]}),[I,L]=O.useState(""),[U,$]=O.useState("");O.useEffect(()=>{c(null,null,function*(){try{yield St.initializeBucket()}catch(e){}})},[]),O.useEffect(()=>{if(F.name&&!h){const e=F.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");M(s=>o(n({},s),{slug:e}))}},[F.name,h]),O.useEffect(()=>{if(F.price&&F.originalPrice&&F.originalPrice>F.price){const e=Math.round((F.originalPrice-F.price)/F.originalPrice*100);M(s=>o(n({},s),{discount:e}))}else M(e=>o(n({},e),{discount:0}))},[F.price,F.originalPrice]);const K=O.useMemo(()=>{let e=s.filter(e=>{var s;const t=e.name.toLowerCase().includes(p.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(p.toLowerCase()))||e.tags.some(e=>e.toLowerCase().includes(p.toLowerCase())),a="all"===b||e.status===b,r="all"===j||e.type===j;return t&&a&&r});return e.sort((e,s)=>{var t,a;let r,i;switch(w){case"name":default:r=e.name.toLowerCase(),i=s.name.toLowerCase();break;case"type":r=e.type,i=s.type;break;case"status":r=e.status,i=s.status;break;case"productCount":r=e.productCount,i=s.productCount;break;case"price":r=e.price||0,i=s.price||0;break;case"sortOrder":r=e.sortOrder||0,i=s.sortOrder||0;break;case"createdAt":r=(null==(t=e.createdAt)?void 0:t.getTime())||0,i=(null==(a=s.createdAt)?void 0:a.getTime())||0}return r<i?"asc"===k?-1:1:r>i?"asc"===k?1:-1:0}),e},[s,p,b,j,w,k]),z=()=>{g(null),M({name:"",slug:"",description:"",shortDescription:"",image:"",bannerImage:"",type:"modern",status:"active",price:0,originalPrice:0,discount:0,productIds:[],featured:!1,isExclusive:!1,sortOrder:0,tags:[]}),L(""),$(""),u(!0)},W=e=>{const{name:s,value:t,type:a}=e.target;if("checkbox"===a){const t=e.target.checked;M(e=>o(n({},e),{[s]:t}))}else M("number"===a?e=>o(n({},e),{[s]:parseFloat(t)||0}):e=>o(n({},e),{[s]:t}))},V=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"coming_soon":return"bg-blue-100 text-blue-800";case"sold_out":return"bg-red-100 text-red-800"}};return t&&0===s.length?R.jsx("div",{className:"flex justify-center items-center h-64",children:R.jsx(Ds,{size:"lg"})}):R.jsxs("div",{className:`space-y-6 ${e}`,children:[R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Collection Management"}),R.jsxs("p",{className:"text-gray-600",children:["Manage special collections (",K.length," of ",s.length," collections)"]})]}),R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsxs("button",{onClick:()=>c(null,null,function*(){_(!0);try{yield l()}catch(e){}finally{_(!1)}}),disabled:E,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(B,{className:"h-4 w-4 "+(E?"animate-spin":"")}),R.jsx("span",{children:"Refresh"})]}),R.jsxs("button",{onClick:()=>c(null,null,function*(){T(!0);try{yield new Promise(e=>setTimeout(e,2e3)),D({type:"success",title:"Export Complete",message:"Collections data has been exported successfully."})}catch(e){D({type:"error",title:"Export Failed",message:"Failed to export data. Please try again."})}finally{T(!1)}}),disabled:A,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[R.jsx(Ne,{className:"h-4 w-4"}),R.jsx("span",{children:A?"Exporting...":"Export"})]}),R.jsxs("button",{onClick:z,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[R.jsx(he,{className:"h-4 w-4"}),R.jsx("span",{children:"Add Collection"})]})]})]}),R.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[R.jsx("div",{className:"flex-1",children:R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search by name or description...",value:p,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),R.jsxs("div",{className:"flex flex-wrap gap-3",children:[R.jsxs("select",{value:b,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"all",children:"All Status"}),R.jsx("option",{value:"active",children:"Active"}),R.jsx("option",{value:"inactive",children:"Inactive"}),R.jsx("option",{value:"coming_soon",children:"Coming Soon"}),R.jsx("option",{value:"sold_out",children:"Sold Out"})]}),R.jsxs("select",{value:j,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"all",children:"All Types"}),R.jsx("option",{value:"heritage",children:"Heritage"}),R.jsx("option",{value:"seasonal",children:"Seasonal"}),R.jsx("option",{value:"limited",children:"Limited"}),R.jsx("option",{value:"exclusive",children:"Exclusive"}),R.jsx("option",{value:"signature",children:"Signature"}),R.jsx("option",{value:"modern",children:"Modern"})]}),R.jsxs("select",{value:w,onChange:e=>C(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"name",children:"Name"}),R.jsx("option",{value:"type",children:"Type"}),R.jsx("option",{value:"status",children:"Status"}),R.jsx("option",{value:"productCount",children:"Product Count"}),R.jsx("option",{value:"price",children:"Price"}),R.jsx("option",{value:"sortOrder",children:"Sort Order"}),R.jsx("option",{value:"createdAt",children:"Created Date"})]}),R.jsx("button",{onClick:()=>P(e=>"asc"===e?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"asc"===k?R.jsx(Je,{className:"h-4 w-4"}):R.jsx(Ye,{className:"h-4 w-4"})})]})]})}),R.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full",children:[R.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type & Status"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(e=>{const s=(e=>{switch(e){case"heritage":return Qe;case"seasonal":return Ue;case"limited":return ss;case"exclusive":return es;case"signature":return ce;case"modern":return Xe;default:return X}})(e.type);return R.jsxs("tr",{className:"hover:bg-gray-50",children:[R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"flex-shrink-0",children:R.jsx("img",{src:e.image,alt:e.name,className:"h-12 w-12 rounded-lg object-cover",onError:e=>{e.target.src="/placeholder-collection.jpg"}})}),R.jsxs("div",{className:"min-w-0 flex-1",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.featured&&R.jsx(ce,{className:"h-4 w-4 text-yellow-500"}),e.isExclusive&&R.jsx(Qe,{className:"h-4 w-4 text-purple-500"})]}),R.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["/",e.slug]}),R.jsx("p",{className:"text-xs text-gray-400 truncate",children:e.shortDescription})]})]})}),R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"space-y-1",children:[R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx(s,{className:"h-4 w-4 text-gray-400"}),R.jsx("span",{className:"text-sm text-gray-900 capitalize",children:e.type})]}),R.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${V(e.status)}`,children:e.status.replace("_"," ")})]})}),R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx(Q,{className:"h-4 w-4 text-gray-400"}),R.jsxs("span",{className:"text-sm text-gray-900",children:[e.productCount," products"]})]})}),R.jsx("td",{className:"px-6 py-4",children:e.price?R.jsxs("div",{className:"space-y-1",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",e.price]}),e.originalPrice&&e.originalPrice>e.price&&R.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["$",e.originalPrice]})]}),e.discount&&e.discount>0&&R.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["-",e.discount,"% off"]})]}):R.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),R.jsx("td",{className:"px-6 py-4",children:R.jsx("span",{className:"text-sm text-gray-900",children:e.sortOrder||0})}),R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>(e=>{g(e),M({name:e.name,slug:e.slug||"",description:e.description||"",shortDescription:e.shortDescription||"",image:e.image,bannerImage:e.bannerImage||"",type:e.type,status:e.status,price:e.price||0,originalPrice:e.originalPrice||0,discount:e.discount||0,productIds:e.productIds,featured:e.featured,isExclusive:e.isExclusive,launchDate:e.launchDate,endDate:e.endDate,sortOrder:e.sortOrder||0,tags:e.tags}),L(""),$(""),u(!0)})(e),className:"p-1 text-gray-400 hover:text-indigo-600",title:"Edit Collection",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{onClick:()=>{},className:"p-1 text-gray-400 hover:text-blue-600",title:"View Details",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{onClick:()=>{},className:"p-1 text-gray-400 hover:text-green-600",title:"Duplicate Collection",children:R.jsx(G,{className:"h-4 w-4"})}),R.jsx("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Are you sure you want to delete this collection?"))try{m(!0),yield i(s)}catch(e){}finally{m(!1)}});var s},className:"p-1 text-gray-400 hover:text-red-600",title:"Delete Collection",children:R.jsx(pe,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),0===K.length&&R.jsxs("div",{className:"text-center py-12",children:[R.jsx(X,{className:"mx-auto h-12 w-12 text-gray-400"}),R.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No collections found"}),R.jsx("p",{className:"mt-1 text-sm text-gray-500",children:p||"all"!==b||"all"!==j?"Try adjusting your search or filter criteria.":"Get started by creating your first collection."}),!p&&"all"===b&&"all"===j&&R.jsx("div",{className:"mt-6",children:R.jsxs("button",{onClick:z,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[R.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Collection"]})})]})]}),R.jsx(Os,{isOpen:x,onClose:()=>u(!1),title:h?"Edit Collection":"Add New Collection",size:"xl",children:R.jsxs("form",{onSubmit:e=>c(null,null,function*(){if(e.preventDefault(),F.name.trim())try{m(!0),h?yield r(h.id,F):yield a(F),u(!1)}catch(s){}finally{m(!1)}else D({type:"error",title:"Validation Error",message:"Collection name is required."})}),className:"space-y-6",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Collection Name *"}),R.jsx("input",{type:"text",name:"name",value:F.name,onChange:W,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter collection name"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),R.jsx("input",{type:"text",name:"slug",value:F.slug,onChange:W,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"collection-slug"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),R.jsx("input",{type:"text",name:"shortDescription",value:F.shortDescription,onChange:W,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Brief description for cards"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),R.jsx("textarea",{name:"description",value:F.description,onChange:W,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Detailed collection description"})]})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),R.jsxs("select",{name:"type",value:F.type,onChange:W,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[R.jsx("option",{value:"modern",children:"Modern"}),R.jsx("option",{value:"heritage",children:"Heritage"}),R.jsx("option",{value:"seasonal",children:"Seasonal"}),R.jsx("option",{value:"limited",children:"Limited"}),R.jsx("option",{value:"exclusive",children:"Exclusive"}),R.jsx("option",{value:"signature",children:"Signature"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),R.jsxs("select",{name:"status",value:F.status,onChange:W,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[R.jsx("option",{value:"active",children:"Active"}),R.jsx("option",{value:"inactive",children:"Inactive"}),R.jsx("option",{value:"coming_soon",children:"Coming Soon"}),R.jsx("option",{value:"sold_out",children:"Sold Out"})]})]})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),R.jsx("input",{type:"number",name:"price",value:F.price,onChange:W,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price ($)"}),R.jsx("input",{type:"number",name:"originalPrice",value:F.originalPrice,onChange:W,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),R.jsx("input",{type:"number",name:"sortOrder",value:F.sortOrder,onChange:W,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),R.jsx("input",{type:"text",value:F.tags.join(", "),onChange:e=>{const s=e.target.value.split(",").map(e=>e.trim()).filter(e=>e);M(e=>o(n({},e),{tags:s}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"luxury, premium, exclusive"})]}),R.jsxs("div",{className:"space-y-2",children:[R.jsxs("label",{className:"flex items-center",children:[R.jsx("input",{type:"checkbox",name:"featured",checked:F.featured,onChange:W,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),R.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Featured Collection"})]}),R.jsxs("label",{className:"flex items-center",children:[R.jsx("input",{type:"checkbox",name:"isExclusive",checked:F.isExclusive,onChange:W,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),R.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Exclusive Collection"})]})]})]})]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collection Image"}),R.jsx(Pt,{value:F.image,onChange:e=>M(s=>o(n({},s),{image:e})),onPathChange:L,folder:"collections",placeholder:"Upload collection image or enter URL",aspectRatio:"square",maxWidth:300,maxHeight:300})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner Image (Optional)"}),R.jsx(Pt,{value:F.bannerImage||"",onChange:e=>M(s=>o(n({},s),{bannerImage:e})),onPathChange:$,folder:"collections/banners",placeholder:"Upload banner image or enter URL",aspectRatio:"landscape",maxWidth:600,maxHeight:300})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Launch Date (Optional)"}),R.jsx("input",{type:"date",name:"launchDate",value:F.launchDate?F.launchDate.toISOString().split("T")[0]:"",onChange:e=>M(s=>o(n({},s),{launchDate:e.target.value?new Date(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date (Optional)"}),R.jsx("input",{type:"date",name:"endDate",value:F.endDate?F.endDate.toISOString().split("T")[0]:"",onChange:e=>M(s=>o(n({},s),{endDate:e.target.value?new Date(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),R.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[R.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),R.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:[d&&R.jsx(Ds,{size:"sm"}),R.jsx("span",{children:h?"Update Collection":"Add Collection"})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Tt=Object.freeze(Object.defineProperty({__proto__:null,SettingsManagement:()=>{const[e,s]=O.useState({siteName:"",siteDescription:"",siteUrl:"",contactEmail:"",supportEmail:"",currency:"USD",taxRate:0,shippingFee:0,freeShippingThreshold:0,allowGuestCheckout:!0,requireEmailVerification:!1,enableReviews:!0,enableWishlist:!0,maintenanceMode:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!0}),[t,a]=O.useState(!0),[r,i]=O.useState(!1),[l,d]=O.useState("general"),[m,x]=O.useState(!1),[u,h]=O.useState(""),[g,p]=O.useState(!1),[y,b]=O.useState(!1),[f,j]=O.useState(!1),[v,w]=O.useState("json"),[C,k]=O.useState(null),[S,P]=O.useState(!1),{showNotification:E}=N(),_=[{id:"general",name:"General",icon:as},{id:"ecommerce",name:"E-commerce",icon:xe},{id:"features",name:"Features",icon:le},{id:"email",name:"Email",icon:Ie},{id:"security",name:"Security",icon:z}];O.useEffect(()=>{A()},[]);const A=()=>c(null,null,function*(){try{const{data:e,error:t}=yield ws.from("system_settings").select("*").single();if(t&&"PGRST116"!==t.code)throw t;e&&s(e)}catch(e){E({type:"error",title:"Error",message:"Failed to load settings"})}finally{a(!1)}}),T=(e,t)=>{s(s=>o(n({},s),{[e]:t})),P(!0)};return t?R.jsx("div",{className:"p-8",children:R.jsx(Ds,{size:"large",text:"Loading settings..."})}):R.jsx(Fs,{children:R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[R.jsxs("div",{children:[R.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[R.jsx(le,{className:"h-8 w-8 mr-3 text-indigo-600"}),"System Settings"]}),R.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your store settings and preferences"}),S&&R.jsxs("div",{className:"flex items-center mt-2 text-amber-600",children:[R.jsx(L,{className:"h-4 w-4 mr-1"}),R.jsx("span",{className:"text-sm",children:"You have unsaved changes"})]})]}),R.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search settings...",value:u,onChange:e=>h(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),R.jsx(yt,{onClick:()=>p(!0),icon:Ne,variant:"outline",size:"sm",children:"Export"}),R.jsx(yt,{onClick:()=>b(!0),icon:Ze,variant:"outline",size:"sm",children:"Import"}),R.jsx(yt,{onClick:()=>j(!0),icon:ts,variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Reset"}),R.jsx(yt,{onClick:()=>c(null,null,function*(){i(!0);try{const{error:s}=yield ws.from("system_settings").upsert(e,{onConflict:"id"});if(s)throw s;E({type:"success",title:"Settings Saved",message:"System settings have been updated successfully"})}catch(s){E({type:"error",title:"Error",message:"Failed to save settings"})}finally{i(!1)}}),loading:r,icon:Ce,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:"Save Changes"})]})]}),R.jsx("div",{className:"border-b border-gray-200",children:R.jsx("nav",{className:"-mb-px flex space-x-8",children:_.map(e=>R.jsxs("button",{onClick:()=>d(e.id),className:(l===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[R.jsx(e.icon,{className:"h-5 w-5"}),R.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),R.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["general"===l&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),R.jsx("input",{type:"text",value:e.siteName,onChange:e=>T("siteName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your Store Name"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),R.jsx("textarea",{value:e.siteDescription,onChange:e=>T("siteDescription",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Brief description of your store"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site URL"}),R.jsx("input",{type:"url",value:e.siteUrl,onChange:e=>T("siteUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://yourstore.com"})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),R.jsx("input",{type:"email",value:e.contactEmail,onChange:e=>T("contactEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contact@yourstore.com"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Support Email"}),R.jsx("input",{type:"email",value:e.supportEmail,onChange:e=>T("supportEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"support@yourstore.com"})]})]})]}),"ecommerce"===l&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),R.jsxs("select",{value:e.currency,onChange:e=>T("currency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"USD",children:"USD - US Dollar"}),R.jsx("option",{value:"EUR",children:"EUR - Euro"}),R.jsx("option",{value:"GBP",children:"GBP - British Pound"}),R.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),R.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:e.taxRate,onChange:e=>T("taxRate",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Fee"}),R.jsx("input",{type:"number",step:"0.01",min:"0",value:e.shippingFee,onChange:e=>T("shippingFee",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fast Shipping Threshold"}),R.jsx("input",{type:"number",step:"0.01",min:"0",value:e.freeShippingThreshold,onChange:e=>T("freeShippingThreshold",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),"features"===l&&R.jsx("div",{className:"space-y-6",children:R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{className:"space-y-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Store Features"}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Allow Guest Checkout"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to checkout without creating an account"})]}),R.jsx("button",{type:"button",onClick:()=>T("allowGuestCheckout",!e.allowGuestCheckout),className:(e.allowGuestCheckout?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.allowGuestCheckout?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Require Email Verification"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Require users to verify their email address"})]}),R.jsx("button",{type:"button",onClick:()=>T("requireEmailVerification",!e.requireEmailVerification),className:(e.requireEmailVerification?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.requireEmailVerification?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Reviews"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to leave product reviews"})]}),R.jsx("button",{type:"button",onClick:()=>T("enableReviews",!e.enableReviews),className:(e.enableReviews?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.enableReviews?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Additional Features"}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Wishlist"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to save products to wishlist"})]}),R.jsx("button",{type:"button",onClick:()=>T("enableWishlist",!e.enableWishlist),className:(e.enableWishlist?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.enableWishlist?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Maintenance Mode"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Put the store in maintenance mode"})]}),R.jsx("button",{type:"button",onClick:()=>T("maintenanceMode",!e.maintenanceMode),className:(e.maintenanceMode?"bg-red-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.maintenanceMode?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]})]})}),"email"===l&&R.jsx("div",{className:"space-y-6",children:R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SMTP Configuration"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),R.jsx("input",{type:"text",value:e.smtpHost,onChange:e=>T("smtpHost",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"smtp.gmail.com"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),R.jsx("input",{type:"number",value:e.smtpPort,onChange:e=>T("smtpPort",parseInt(e.target.value)||587),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"587"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),R.jsx("input",{type:"text",value:e.smtpUsername,onChange:e=>T("smtpUsername",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"your-email@gmail.com"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:m?"text":"password",value:e.smtpPassword,onChange:e=>T("smtpPassword",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your SMTP password"}),R.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?R.jsx($e,{className:"h-4 w-4 text-gray-400"}):R.jsx(De,{className:"h-4 w-4 text-gray-400"})})]})]})]}),R.jsx("div",{className:"mt-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Use Secure Connection (TLS/SSL)"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Enable secure email transmission"})]}),R.jsx("button",{type:"button",onClick:()=>T("smtpSecure",!e.smtpSecure),className:(e.smtpSecure?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.smtpSecure?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})})]})}),"security"===l&&R.jsx("div",{className:"space-y-6",children:R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Settings"}),R.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:R.jsxs("div",{className:"flex",children:[R.jsx(L,{className:"h-5 w-5 text-yellow-400"}),R.jsxs("div",{className:"ml-3",children:[R.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Security Notice"}),R.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:R.jsx("p",{children:"These settings affect the security of your entire application. Please review carefully before making changes."})})]})]})}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Require Email Verification"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Force users to verify their email before accessing the store"})]}),R.jsx("button",{type:"button",onClick:()=>T("requireEmailVerification",!e.requireEmailVerification),className:(e.requireEmailVerification?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.requireEmailVerification?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Maintenance Mode"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Temporarily disable public access to the store"})]}),R.jsx("button",{type:"button",onClick:()=>T("maintenanceMode",!e.maintenanceMode),className:(e.maintenanceMode?"bg-red-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:R.jsx("span",{className:(e.maintenanceMode?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]}),R.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[R.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Security Recommendations"}),R.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[R.jsx("li",{children:"• Enable email verification for new user accounts"}),R.jsx("li",{children:"• Use strong SMTP passwords and enable secure connections"}),R.jsx("li",{children:"• Regularly review and update security settings"}),R.jsx("li",{children:"• Monitor system logs for suspicious activity"})]})]})]})})]}),R.jsx(Os,{isOpen:g,onClose:()=>p(!1),title:"Export Settings",children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),R.jsxs("select",{value:v,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"json",children:"JSON"}),R.jsx("option",{value:"csv",children:"CSV"})]})]}),R.jsxs("div",{className:"flex justify-end space-x-3",children:[R.jsx(yt,{onClick:()=>p(!1),variant:"outline",children:"Cancel"}),R.jsx(yt,{onClick:()=>{const s=o(n({},e),{exportedAt:(new Date).toISOString(),version:"1.0"});if("json"===v){const e=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`settings-export-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(t)}else{const e=Object.entries(s).map(([e,s])=>`${e},${s}`).join("\n"),t=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`settings-export-${(new Date).toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(a)}p(!1),E({type:"success",title:"Settings Exported",message:`Settings exported successfully as ${v.toUpperCase()}`})},icon:Ne,children:"Export"})]})]})}),R.jsx(Os,{isOpen:y,onClose:()=>b(!1),title:"Import Settings",children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),R.jsx("input",{type:"file",accept:".json,.csv",onChange:e=>{var s;return k((null==(s=e.target.files)?void 0:s[0])||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),R.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Supported formats: JSON, CSV"})]}),R.jsxs("div",{className:"flex justify-end space-x-3",children:[R.jsx(yt,{onClick:()=>{b(!1),k(null)},variant:"outline",children:"Cancel"}),R.jsx(yt,{onClick:()=>c(null,null,function*(){if(C)try{const t=yield C.text();let a;if("application/json"===C.type)a=JSON.parse(t);else{const e=t.split("\n");a={},e.forEach(e=>{const[s,t]=e.split(",");s&&t&&(a[s]=t)})}const r=n({},e);Object.keys(e).forEach(e=>{void 0!==a[e]&&(r[e]=a[e])}),s(r),P(!0),b(!1),k(null),E({type:"success",title:"Settings Imported",message:"Settings imported successfully. Please review and save changes."})}catch(t){E({type:"error",title:"Import Failed",message:"Failed to import settings. Please check the file format."})}}),disabled:!C,icon:Ze,children:"Import"})]})]})}),R.jsx(Os,{isOpen:f,onClose:()=>j(!1),title:"Reset Settings",children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"flex items-start space-x-3",children:[R.jsx(L,{className:"h-6 w-6 text-red-500 mt-0.5"}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to reset all settings?"}),R.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This action will restore all settings to their default values. This cannot be undone."})]})]}),R.jsxs("div",{className:"flex justify-end space-x-3",children:[R.jsx(yt,{onClick:()=>j(!1),variant:"outline",children:"Cancel"}),R.jsx(yt,{onClick:()=>c(null,null,function*(){try{s({siteName:"",siteDescription:"",siteUrl:"",contactEmail:"",supportEmail:"",currency:"USD",taxRate:0,shippingFee:0,freeShippingThreshold:0,allowGuestCheckout:!0,requireEmailVerification:!1,enableReviews:!0,enableWishlist:!0,maintenanceMode:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!0}),P(!0),j(!1),E({type:"success",title:"Settings Reset",message:"Settings have been reset to defaults. Please save to apply changes."})}catch(e){E({type:"error",title:"Reset Failed",message:"Failed to reset settings."})}}),icon:ts,className:"bg-red-600 hover:bg-red-700 text-white",children:"Reset All Settings"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Dt=Object.freeze(Object.defineProperty({__proto__:null,AnalyticsDashboard:()=>{const[e,s]=O.useState(null),[t,a]=O.useState(!0),[r,i]=O.useState(null),[l,n]=O.useState("30d"),[o,d]=O.useState(!1);O.useEffect(()=>{m()},[l]);const m=()=>c(null,null,function*(){try{if(a(!0),i(null),!ws)throw new Error("Supabase client is not initialized");const e=new Date,t=new Date;switch(l){case"7d":t.setDate(e.getDate()-7);break;case"30d":t.setDate(e.getDate()-30);break;case"90d":t.setDate(e.getDate()-90);break;case"1y":t.setFullYear(e.getFullYear()-1)}const[r,n,o]=yield Promise.all([ws.from("orders").select("id, total, status, created_at, profiles(id, email, full_name)").gte("created_at",t.toISOString()).lte("created_at",e.toISOString()),ws.from("products").select("id, name, price"),ws.from("profiles").select("id, created_at")]);if(r.error)throw new Error(`Failed to fetch orders: ${r.error.message}`);if(n.error)throw new Error(`Failed to fetch products: ${n.error.message}`);if(o.error)throw new Error(`Failed to fetch users: ${o.error.message}`);const d=r.data||[],c=n.data||[],m=o.data||[],x=d.reduce((e,s)=>e+(parseFloat(s.total)||0),0),u=d.length,h=m.length,g=c.length,p=u>0?x/u:0,y=20*Math.random()-10,b=15*Math.random()-5,f=25*Math.random(),j=10*Math.random(),N=d.sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,5).map(e=>({id:e.id,total:e.total,status:e.status,created_at:e.created_at,customer_name:Array.isArray(e.profiles)&&e.profiles.length>0&&(e.profiles[0].full_name||e.profiles[0].email)||"Unknown"})),v=c.slice(0,5).map(e=>({id:e.id,name:e.name,sales:Math.floor(100*Math.random())+10,revenue:Math.floor(5e3*Math.random())+500})),w=Array.from({length:6},(e,s)=>{const t=new Date;return t.setMonth(t.getMonth()-s),{month:t.toLocaleDateString("en-US",{month:"short"}),sales:Math.floor(1e4*Math.random())+5e3,orders:Math.floor(100*Math.random())+50}}).reverse();s({totalRevenue:x,revenueGrowth:y,totalOrders:u,ordersGrowth:b,totalCustomers:h,customersGrowth:f,totalProducts:g,productsGrowth:j,averageOrderValue:p,conversionRate:5*Math.random()+2,topProducts:v,recentOrders:N,salesByMonth:w})}catch(e){let t="Failed to fetch analytics data";e instanceof Error&&(t=e.message.includes("apikey")||e.message.includes("API key")?"Authentication error: Please check your Supabase configuration and ensure the API key is properly set.":e.message.includes("network")||e.message.includes("fetch")?"Network error: Please check your internet connection and try again.":e.message.includes("timeout")?"Request timeout: The server is taking too long to respond. Please try again.":e.message),i(t),e instanceof Error&&(e.message.includes("apikey")||e.message.includes("network"))&&s({totalRevenue:125e3,revenueGrowth:12.5,totalOrders:450,ordersGrowth:8.2,totalCustomers:1250,customersGrowth:15.3,totalProducts:89,productsGrowth:5.1,averageOrderValue:277.78,conversionRate:3.2,topProducts:[],recentOrders:[],salesByMonth:[]})}finally{a(!1),d(!1)}}),x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),u=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return t?R.jsx("div",{className:"p-8",children:R.jsx(Ds,{size:"large",text:"Loading analytics data..."})}):r?R.jsx("div",{className:"p-8",children:R.jsx(ot,{error:r,onRetry:m,type:"database",size:"large"})}):e?R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),R.jsx("p",{className:"text-gray-600 mt-1",children:"Track your business performance and insights"})]}),R.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[R.jsxs("select",{value:l,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"7d",children:"Last 7 days"}),R.jsx("option",{value:"30d",children:"Last 30 days"}),R.jsx("option",{value:"90d",children:"Last 90 days"}),R.jsx("option",{value:"1y",children:"Last year"})]}),R.jsxs("button",{onClick:()=>c(null,null,function*(){d(!0),yield m()}),disabled:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center space-x-2",children:[R.jsx(B,{className:"h-4 w-4 "+(o?"animate-spin":"")}),R.jsx("span",{children:"Refresh"})]})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),R.jsx("p",{className:"text-3xl font-bold text-gray-900",children:x(e.totalRevenue)}),R.jsxs("div",{className:"flex items-center mt-2",children:[e.revenueGrowth>=0?R.jsx(Oe,{className:"h-4 w-4 text-green-500"}):R.jsx(Me,{className:"h-4 w-4 text-red-500"}),R.jsx("span",{className:"text-sm font-medium "+(e.revenueGrowth>=0?"text-green-600":"text-red-600"),children:u(e.revenueGrowth)}),R.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),R.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:R.jsx(me,{className:"h-6 w-6 text-green-600"})})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),R.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.totalOrders.toLocaleString()}),R.jsxs("div",{className:"flex items-center mt-2",children:[e.ordersGrowth>=0?R.jsx(Oe,{className:"h-4 w-4 text-green-500"}):R.jsx(Me,{className:"h-4 w-4 text-red-500"}),R.jsx("span",{className:"text-sm font-medium "+(e.ordersGrowth>=0?"text-green-600":"text-red-600"),children:u(e.ordersGrowth)}),R.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),R.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:R.jsx(Y,{className:"h-6 w-6 text-blue-600"})})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),R.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.totalCustomers.toLocaleString()}),R.jsxs("div",{className:"flex items-center mt-2",children:[R.jsx(Oe,{className:"h-4 w-4 text-green-500"}),R.jsx("span",{className:"text-sm font-medium text-green-600",children:u(e.customersGrowth)}),R.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),R.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:R.jsx(q,{className:"h-6 w-6 text-purple-600"})})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),R.jsx("p",{className:"text-3xl font-bold text-gray-900",children:x(e.averageOrderValue)}),R.jsxs("div",{className:"flex items-center mt-2",children:[R.jsx(Oe,{className:"h-4 w-4 text-green-500"}),R.jsx("span",{className:"text-sm font-medium text-green-600",children:"+5.2%"}),R.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),R.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:R.jsx(ee,{className:"h-6 w-6 text-orange-600"})})]})})]}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),R.jsx(De,{className:"h-5 w-5 text-gray-400"})]}),R.jsx("div",{className:"space-y-3",children:e.recentOrders.map(e=>R.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:e.customer_name}),R.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),R.jsxs("div",{className:"text-right",children:[R.jsx("p",{className:"font-semibold text-gray-900",children:x(e.total)}),R.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]})]},e.id))})]}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products"}),R.jsx(J,{className:"h-5 w-5 text-gray-400"})]}),R.jsx("div",{className:"space-y-3",children:e.topProducts.map((e,s)=>R.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:R.jsxs("span",{className:"text-sm font-medium text-indigo-600",children:["#",s+1]})}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:e.name}),R.jsxs("p",{className:"text-sm text-gray-500",children:[e.sales," sales"]})]})]}),R.jsx("p",{className:"font-semibold text-gray-900",children:x(e.revenue)})]},e.id))})]})]}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Data"}),R.jsx("p",{className:"text-gray-600",children:"Download your analytics data for further analysis"})]}),R.jsxs("div",{className:"flex space-x-3",children:[R.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center space-x-2",children:[R.jsx(Ne,{className:"h-4 w-4"}),R.jsx("span",{children:"CSV"})]}),R.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[R.jsx(Ne,{className:"h-4 w-4"}),R.jsx("span",{children:"PDF Report"})]})]})]})})]}):R.jsx("div",{className:"p-8 text-center",children:R.jsx("p",{className:"text-gray-500",children:"No analytics data available"})})}},Symbol.toStringTag,{value:"Module"})),Ot=Object.freeze(Object.defineProperty({__proto__:null,AdvancedReports:()=>{const[e,s]=O.useState([]),[t,a]=O.useState([]),[r,i]=O.useState([]),[l,d]=O.useState(!0),[m,x]=O.useState("reports"),[u,h]=O.useState(!1),[g,p]=O.useState(!1),[y,b]=O.useState(null),[f,j]=O.useState(""),[v,w]=O.useState(""),[C,k]=O.useState(""),{showNotification:S}=N(),P=[{id:"reports",name:"Reports",icon:te},{id:"templates",name:"Templates",icon:le},{id:"exports",name:"Export Jobs",icon:Ne},{id:"builder",name:"Report Builder",icon:he}];O.useEffect(()=>{E()},[]);const E=()=>c(null,null,function*(){d(!0);try{yield Promise.all([_(),A(),T()])}catch(e){S({type:"error",title:"Error",message:"Failed to load reports data"})}finally{d(!1)}}),_=()=>c(null,null,function*(){s([{id:"1",name:"Monthly Sales Report",description:"Comprehensive monthly sales analysis with trends and comparisons",type:"sales",format:"pdf",schedule:"monthly",status:"active",lastRun:"2024-06-01T09:00:00Z",nextRun:"2024-07-01T09:00:00Z",createdBy:"John Admin",createdAt:"2024-01-15T10:00:00Z",parameters:{dateRange:"30days",includeComparisons:!0},recipients:["admin@example.com","sales@example.com"]},{id:"2",name:"User Activity Report",description:"Weekly user engagement and activity metrics",type:"users",format:"csv",schedule:"weekly",status:"active",lastRun:"2024-06-15T08:00:00Z",nextRun:"2024-06-22T08:00:00Z",createdBy:"Jane Manager",createdAt:"2024-02-01T14:00:00Z",parameters:{includeInactive:!1,groupBy:"week"},recipients:["hr@example.com"]},{id:"3",name:"Inventory Status Report",description:"Daily inventory levels and low stock alerts",type:"inventory",format:"excel",schedule:"daily",status:"running",lastRun:"2024-06-16T06:00:00Z",nextRun:"2024-06-17T06:00:00Z",createdBy:"Bob Warehouse",createdAt:"2024-03-10T11:00:00Z",parameters:{lowStockThreshold:10,includeOutOfStock:!0},recipients:["warehouse@example.com","purchasing@example.com"]}])}),A=()=>c(null,null,function*(){a([{id:"1",name:"Sales Performance Template",description:"Standard template for sales performance analysis",type:"sales",fields:["date","revenue","orders","customers","avg_order_value"],filters:["date_range","product_category","customer_segment"],groupBy:["date","category","region"],sortBy:["date_desc","revenue_desc"]},{id:"2",name:"User Engagement Template",description:"Template for analyzing user engagement metrics",type:"users",fields:["user_id","login_count","session_duration","page_views","last_activity"],filters:["date_range","user_type","activity_level"],groupBy:["date","user_type","region"],sortBy:["activity_desc","date_desc"]}])}),T=()=>c(null,null,function*(){i([{id:"1",reportId:"1",reportName:"Monthly Sales Report",status:"completed",progress:100,startTime:"2024-06-16T09:00:00Z",endTime:"2024-06-16T09:05:00Z",fileUrl:"/downloads/monthly-sales-2024-06.pdf",fileSize:2048576},{id:"2",reportId:"3",reportName:"Inventory Status Report",status:"processing",progress:65,startTime:"2024-06-16T10:00:00Z"},{id:"3",reportId:"2",reportName:"User Activity Report",status:"failed",progress:0,startTime:"2024-06-16T08:00:00Z",endTime:"2024-06-16T08:02:00Z",error:"Database connection timeout"}])}),D=e=>{switch(e){case"active":case"completed":return"bg-green-100 text-green-800";case"running":case"processing":return"bg-blue-100 text-blue-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"failed":return"bg-red-100 text-red-800"}},F=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return l?R.jsx("div",{className:"p-8",children:R.jsx(Ds,{size:"large",text:"Loading reports..."})}):R.jsx(Fs,{children:R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[R.jsxs("div",{children:[R.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[R.jsx(se,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Advanced Reports & Export"]}),R.jsx("p",{className:"text-gray-600 mt-1",children:"Create, schedule, and manage comprehensive business reports"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(yt,{onClick:()=>h(!0),icon:he,children:"Create Report"}),R.jsx(yt,{onClick:()=>p(!0),icon:le,variant:"outline",children:"Create Template"}),R.jsx(yt,{onClick:E,icon:B,variant:"outline",children:"Refresh"})]})]}),R.jsx("div",{className:"border-b border-gray-200",children:R.jsx("nav",{className:"-mb-px flex space-x-8",children:P.map(e=>R.jsxs("button",{onClick:()=>x(e.id),className:(m===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[R.jsx(e.icon,{className:"h-5 w-5"}),R.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),R.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["reports"===m&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[R.jsxs("div",{className:"relative flex-1",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search reports...",value:f,onChange:e=>j(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),R.jsx("select",{value:v,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[{value:"",label:"All Types"},{value:"sales",label:"Sales Reports"},{value:"users",label:"User Reports"},{value:"products",label:"Product Reports"},{value:"orders",label:"Order Reports"},{value:"inventory",label:"Inventory Reports"},{value:"custom",label:"Custom Reports"}].map(e=>R.jsx("option",{value:e.value,children:e.label},e.value))}),R.jsx("select",{value:C,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"running",label:"Running"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}].map(e=>R.jsx("option",{value:e.value,children:e.label},e.value))})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(t=>R.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),R.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(t.status)}`,children:t.status})]}),R.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t.description}),R.jsxs("div",{className:"space-y-2 text-sm",children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-500",children:"Type:"}),R.jsx("span",{className:"text-gray-900 capitalize",children:t.type})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-500",children:"Format:"}),R.jsx("span",{className:"text-gray-900 uppercase",children:t.format})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-500",children:"Schedule:"}),R.jsx("span",{className:"text-gray-900 capitalize",children:t.schedule})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-gray-500",children:"Last Run:"}),R.jsx("span",{className:"text-gray-900",children:new Date(t.lastRun).toLocaleDateString()})]})]}),R.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[R.jsx("button",{onClick:()=>{return a=t.id,c(null,null,function*(){try{const t=e.find(e=>e.id===a);if(!t)return;s(e=>e.map(e=>e.id===a?o(n({},e),{status:"running"}):e));const r={id:Date.now().toString(),reportId:a,reportName:t.name,status:"processing",progress:0,startTime:(new Date).toISOString()};i(e=>[r,...e]),S({type:"success",title:"Report Started",message:`${t.name} is now being generated`});let l=0;const d=setInterval(()=>{l+=20*Math.random(),l>=100?(l=100,clearInterval(d),i(e=>e.map(e=>e.id===r.id?o(n({},e),{status:"completed",progress:100,endTime:(new Date).toISOString(),fileUrl:`/downloads/${t.name.toLowerCase().replace(/\s+/g,"-")}.${t.format}`,fileSize:Math.floor(5e6*Math.random())+1e6}):e)),s(e=>e.map(e=>e.id===a?o(n({},e),{status:"completed",lastRun:(new Date).toISOString()}):e)),S({type:"success",title:"Report Completed",message:`${t.name} has been generated successfully`})):i(e=>e.map(e=>e.id===r.id?o(n({},e),{progress:l}):e))},1e3)}catch(t){S({type:"error",title:"Report Failed",message:"Failed to generate report"})}});var a},className:"text-indigo-600 hover:text-indigo-900",disabled:"running"===t.status,children:R.jsx(rs,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(G,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-red-600 hover:text-red-900",children:R.jsx(pe,{className:"h-4 w-4"})})]})]},t.id))})]}),"exports"===m&&R.jsx("div",{className:"space-y-6",children:R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Time"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Size"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>R.jsxs("tr",{className:"hover:bg-gray-50",children:[R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.reportName})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(e.status)}`,children:e.status})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-2",children:R.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),R.jsxs("span",{className:"text-sm text-gray-900",children:[e.progress,"%"]})]})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.startTime).toLocaleString()}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.fileSize?F(e.fileSize):"-"}),R.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:["completed"===e.status&&e.fileUrl&&R.jsx("button",{onClick:()=>(e=>{e.fileUrl&&S({type:"success",title:"Download Started",message:`Downloading ${e.reportName}`})})(e),className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(Ne,{className:"h-4 w-4"})}),"failed"===e.status&&R.jsx("span",{className:"text-red-600 text-xs",children:e.error})]})]},e.id))})]})})}),"templates"===m&&R.jsx("div",{className:"space-y-6",children:R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>R.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.name}),R.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),R.jsxs("div",{className:"space-y-2 text-sm",children:[R.jsxs("div",{children:[R.jsx("span",{className:"font-medium text-gray-700",children:"Type: "}),R.jsx("span",{className:"text-gray-900 capitalize",children:e.type})]}),R.jsxs("div",{children:[R.jsx("span",{className:"font-medium text-gray-700",children:"Fields: "}),R.jsxs("span",{className:"text-gray-900",children:[e.fields.length," fields"]})]}),R.jsxs("div",{children:[R.jsx("span",{className:"font-medium text-gray-700",children:"Filters: "}),R.jsxs("span",{className:"text-gray-900",children:[e.filters.length," filters"]})]})]}),R.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(G,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-red-600 hover:text-red-900",children:R.jsx(pe,{className:"h-4 w-4"})})]})]},e.id))})}),"builder"===m&&R.jsx("div",{className:"space-y-6",children:R.jsxs("div",{className:"text-center py-12",children:[R.jsx(se,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Report Builder"}),R.jsx("p",{className:"text-gray-600 mb-6",children:"Create custom reports with our drag-and-drop report builder"}),R.jsx(yt,{onClick:()=>{S({type:"info",title:"Coming Soon",message:"Advanced report builder will be available in the next update"})},icon:he,children:"Launch Report Builder"})]})})]}),R.jsx(Os,{isOpen:u,onClose:()=>h(!1),title:"Create New Report",children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Name"}),R.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter report name"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),R.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter report description"})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),R.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"sales",children:"Sales Report"}),R.jsx("option",{value:"users",children:"User Report"}),R.jsx("option",{value:"products",children:"Product Report"}),R.jsx("option",{value:"orders",children:"Order Report"}),R.jsx("option",{value:"inventory",children:"Inventory Report"}),R.jsx("option",{value:"custom",children:"Custom Report"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format"}),R.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"pdf",children:"PDF"}),R.jsx("option",{value:"csv",children:"CSV"}),R.jsx("option",{value:"excel",children:"Excel"}),R.jsx("option",{value:"json",children:"JSON"})]})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule"}),R.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"manual",children:"Manual"}),R.jsx("option",{value:"daily",children:"Daily"}),R.jsx("option",{value:"weekly",children:"Weekly"}),R.jsx("option",{value:"monthly",children:"Monthly"})]})]}),R.jsxs("div",{className:"flex justify-end space-x-3",children:[R.jsx(yt,{onClick:()=>h(!1),variant:"outline",children:"Cancel"}),R.jsx(yt,{onClick:()=>{h(!1),S({type:"success",title:"Report Created",message:"New report has been created successfully"})},icon:Ce,children:"Create Report"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Ft=Object.freeze(Object.defineProperty({__proto__:null,MarketingManagement:()=>{const[e,s]=O.useState([]),[t,a]=O.useState([]),[r,i]=O.useState(null),[l,n]=O.useState(!0),[o,d]=O.useState("overview"),[m,x]=O.useState(""),[u,h]=O.useState(""),[g,p]=O.useState(""),[y,b]=O.useState(!1),[f,j]=O.useState(!1),[v,w]=O.useState(null),[C,k]=O.useState(null),{showNotification:S}=N(),P=[{id:"overview",name:"Overview",icon:R.jsx(se,{className:"h-5 w-5"})},{id:"campaigns",name:"Campaigns",icon:R.jsx(ue,{className:"h-5 w-5"})},{id:"promotions",name:"Promotions",icon:R.jsx(X,{className:"h-5 w-5"})},{id:"analytics",name:"Analytics",icon:R.jsx(ee,{className:"h-5 w-5"})}];O.useEffect(()=>{E()},[]);const E=()=>c(null,null,function*(){n(!0);try{yield Promise.all([_(),A(),T()])}catch(e){S({type:"error",title:"Error",message:"Failed to load marketing data"})}finally{n(!1)}}),_=()=>c(null,null,function*(){s([{id:"1",name:"Summer Sale Email Campaign",type:"email",status:"active",startDate:"2024-06-01",endDate:"2024-06-30",targetAudience:"All Customers",budget:5e3,spent:3200,impressions:45e3,clicks:2250,conversions:180,revenue:18e3,createdAt:"2024-05-15T10:00:00Z",updatedAt:"2024-06-15T14:30:00Z"},{id:"2",name:"New Product Launch",type:"social",status:"scheduled",startDate:"2024-07-01",endDate:"2024-07-15",targetAudience:"Premium Customers",budget:8e3,spent:0,impressions:0,clicks:0,conversions:0,revenue:0,createdAt:"2024-06-01T09:00:00Z",updatedAt:"2024-06-01T09:00:00Z"}])}),A=()=>c(null,null,function*(){a([{id:"1",name:"Flash Sale - 50% Off Electronics",type:"flash_sale",status:"active",discountType:"percentage",discountValue:50,minimumAmount:100,maxUses:1e3,currentUses:234,startDate:"2024-06-15T00:00:00Z",endDate:"2024-06-17T23:59:59Z",products:["electronics"],categories:["smartphones","laptops"],createdAt:"2024-06-14T10:00:00Z"},{id:"2",name:"Buy One Get One Free - Clothing",type:"bogo",status:"scheduled",discountType:"percentage",discountValue:50,minimumAmount:0,maxUses:500,currentUses:0,startDate:"2024-07-01T00:00:00Z",endDate:"2024-07-31T23:59:59Z",products:[],categories:["clothing"],createdAt:"2024-06-20T15:00:00Z"}])}),T=()=>c(null,null,function*(){i({totalCampaigns:12,activeCampaigns:3,totalBudget:5e4,totalSpent:32e3,totalImpressions:45e4,totalClicks:22500,totalConversions:1800,totalRevenue:18e4,averageCTR:5,averageConversionRate:8,roi:462.5})});return l?R.jsx("div",{className:"p-8",children:R.jsx(Ds,{size:"large",text:"Loading marketing data..."})}):R.jsx(Fs,{children:R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[R.jsxs("div",{children:[R.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[R.jsx(ue,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Marketing & Promotions"]}),R.jsx("p",{className:"text-gray-600 mt-1",children:"Manage campaigns, promotions, and marketing analytics"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(yt,{onClick:()=>b(!0),icon:he,children:"Create Campaign"}),R.jsx(yt,{onClick:()=>j(!0),icon:X,variant:"secondary",children:"Create Promotion"})]})]}),R.jsx("div",{className:"border-b border-gray-200",children:R.jsx("nav",{className:"-mb-px flex space-x-8",children:P.map(e=>R.jsxs("button",{onClick:()=>d(e.id),className:(o===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[e.icon,R.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),R.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["overview"===o&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[R.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:R.jsx(ue,{className:"h-6 w-6 text-blue-600"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==r?void 0:r.totalCampaigns)||0})]})]})}),R.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:R.jsx(me,{className:"h-6 w-6 text-green-600"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),R.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null==(D=null==r?void 0:r.totalRevenue)?void 0:D.toLocaleString())||0]})]})]})}),R.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:R.jsx(is,{className:"h-6 w-6 text-purple-600"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),R.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(null==r?void 0:r.averageConversionRate)||0,"%"]})]})]})}),R.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:R.jsx(ee,{className:"h-6 w-6 text-orange-600"})}),R.jsxs("div",{className:"ml-4",children:[R.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ROI"}),R.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(null==r?void 0:r.roi)||0,"%"]})]})]})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[R.jsx(yt,{onClick:()=>b(!0),icon:he,className:"w-full",children:"Create Campaign"}),R.jsx(yt,{onClick:()=>j(!0),icon:X,variant:"outline",className:"w-full",children:"Create Promotion"}),R.jsx(yt,{onClick:()=>d("analytics"),icon:R.jsx(se,{className:"h-4 w-4"}),variant:"outline",className:"w-full",children:"View Analytics"}),R.jsx(yt,{onClick:E,icon:B,variant:"outline",className:"w-full",children:"Refresh Data"})]})]})]}),"campaigns"===o&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[R.jsxs("div",{className:"relative flex-1",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search campaigns...",value:m,onChange:e=>x(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),R.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"",children:"All Status"}),R.jsx("option",{value:"active",children:"Active"}),R.jsx("option",{value:"paused",children:"Paused"}),R.jsx("option",{value:"scheduled",children:"Scheduled"}),R.jsx("option",{value:"completed",children:"Completed"})]}),R.jsxs("select",{value:g,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"",children:"All Types"}),R.jsx("option",{value:"email",children:"Email"}),R.jsx("option",{value:"sms",children:"SMS"}),R.jsx("option",{value:"social",children:"Social"}),R.jsx("option",{value:"banner",children:"Banner"}),R.jsx("option",{value:"popup",children:"Popup"})]})]}),R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>R.jsxs("tr",{className:"hover:bg-gray-50",children:[R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsxs("div",{children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),R.jsx("div",{className:"text-sm text-gray-500",children:e.targetAudience})]})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.type})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"paused"===e.status?"bg-yellow-100 text-yellow-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status})}),R.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[R.jsxs("div",{children:["CTR: ",(e.clicks/e.impressions*100).toFixed(2),"%"]}),R.jsxs("div",{children:["Conv: ",(e.conversions/e.clicks*100).toFixed(2),"%"]})]}),R.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[R.jsxs("div",{children:["$",e.spent.toLocaleString()," / $",e.budget.toLocaleString()]}),R.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:R.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:e.spent/e.budget*100+"%"}})})]}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:"active"===e.status?R.jsx(ls,{className:"h-4 w-4"}):R.jsx(rs,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-red-600 hover:text-red-900",children:R.jsx(pe,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),"promotions"===o&&R.jsx("div",{className:"space-y-6",children:R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>R.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),R.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"expired"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})]}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{className:"text-sm text-gray-500",children:"Type:"}),R.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.type})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{className:"text-sm text-gray-500",children:"Discount:"}),R.jsx("span",{className:"text-sm font-medium text-gray-900",children:"percentage"===e.discountType?`${e.discountValue}%`:"fixed"===e.discountType?`$${e.discountValue}`:"Fast Shipping"})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{className:"text-sm text-gray-500",children:"Usage:"}),R.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.currentUses," / ",e.maxUses]})]}),R.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:R.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:e.currentUses/e.maxUses*100+"%"}})}),R.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[R.jsxs("span",{children:["Start: ",new Date(e.startDate).toLocaleDateString()]}),R.jsxs("span",{children:["End: ",new Date(e.endDate).toLocaleDateString()]})]})]}),R.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(De,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(ge,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(G,{className:"h-4 w-4"})}),R.jsx("button",{className:"text-red-600 hover:text-red-900",children:R.jsx(pe,{className:"h-4 w-4"})})]})]},e.id))})}),"analytics"===o&&(()=>{var e,s,t;return R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Performance"}),R.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:R.jsx("p",{className:"text-gray-500",children:"Performance chart will be implemented here"})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"ROI Analysis"}),R.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:R.jsx("p",{className:"text-gray-500",children:"ROI chart will be implemented here"})})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detailed Metrics"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[R.jsxs("div",{className:"text-center",children:[R.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:null==(e=null==r?void 0:r.totalImpressions)?void 0:e.toLocaleString()}),R.jsx("p",{className:"text-sm text-gray-500",children:"Total Impressions"})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("p",{className:"text-3xl font-bold text-green-600",children:null==(s=null==r?void 0:r.totalClicks)?void 0:s.toLocaleString()}),R.jsx("p",{className:"text-sm text-gray-500",children:"Total Clicks"})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("p",{className:"text-3xl font-bold text-purple-600",children:null==(t=null==r?void 0:r.totalConversions)?void 0:t.toLocaleString()}),R.jsx("p",{className:"text-sm text-gray-500",children:"Total Conversions"})]})]})]})]})})()]}),R.jsx(Os,{isOpen:y,onClose:()=>b(!1),title:"Create New Campaign",children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Name"}),R.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter campaign name"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Type"}),R.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"email",children:"Email Campaign"}),R.jsx("option",{value:"sms",children:"SMS Campaign"}),R.jsx("option",{value:"social",children:"Social Media"}),R.jsx("option",{value:"banner",children:"Banner Ads"}),R.jsx("option",{value:"popup",children:"Popup Campaign"})]})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),R.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),R.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget (₹)"}),R.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Image"}),R.jsx(Pt,{value:"",onChange:e=>{},folder:"marketing",placeholder:"Upload campaign image or enter URL",aspectRatio:"landscape",maxWidth:600,maxHeight:300})]}),R.jsxs("div",{className:"flex justify-end space-x-3",children:[R.jsx(yt,{onClick:()=>b(!1),variant:"outline",children:"Cancel"}),R.jsx(yt,{onClick:()=>{b(!1),S({type:"success",title:"Campaign Created",message:"New campaign has been created successfully"})},icon:he,children:"Create Campaign"})]})]})}),R.jsx(Os,{isOpen:f,onClose:()=>j(!1),title:"Create New Promotion",children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Name"}),R.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter promotion name"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Type"}),R.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"flash_sale",children:"Flash Sale"}),R.jsx("option",{value:"bundle",children:"Bundle Deal"}),R.jsx("option",{value:"bogo",children:"Buy One Get One"}),R.jsx("option",{value:"discount",children:"Discount"}),R.jsx("option",{value:"free_shipping",children:"Fast Shipping"})]})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Type"}),R.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"percentage",children:"Percentage"}),R.jsx("option",{value:"fixed",children:"Fixed Amount"}),R.jsx("option",{value:"free_shipping",children:"Fast Shipping"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Value"}),R.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0"})]})]}),R.jsxs("div",{className:"flex justify-end space-x-3",children:[R.jsx(yt,{onClick:()=>j(!1),variant:"outline",children:"Cancel"}),R.jsx(yt,{onClick:()=>{j(!1),S({type:"success",title:"Promotion Created",message:"New promotion has been created successfully"})},icon:X,children:"Create Promotion"})]})]})})]})});var D}},Symbol.toStringTag,{value:"Module"})),Rt=Object.freeze(Object.defineProperty({__proto__:null,AuditLogs:()=>{const[e,s]=O.useState([]),[t,a]=O.useState(!0),[r,i]=O.useState(null),[l,d]=O.useState(!1),[m,x]=O.useState(new Set),[u,h]=O.useState(1),[g,p]=O.useState(1),[y]=O.useState(50),{showNotification:b}=N(),[f,j]=O.useState({dateFrom:new Date(Date.now()-6048e5).toISOString().split("T")[0],dateTo:(new Date).toISOString().split("T")[0],userId:"",category:"",status:"",action:"",searchTerm:""});O.useEffect(()=>{v()},[f,u]);const v=()=>c(null,null,function*(){a(!0);try{const e=[{id:"1",timestamp:(new Date).toISOString(),userId:"user-123",userName:"John Admin",userEmail:"john@example.com",action:"LOGIN",resource:"auth",resourceId:"session-456",details:"User logged in successfully",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",category:"auth",metadata:{sessionId:"session-456",loginMethod:"email"}},{id:"2",timestamp:new Date(Date.now()-3e5).toISOString(),userId:"user-124",userName:"Jane Manager",userEmail:"jane@example.com",action:"UPDATE_PRODUCT",resource:"products",resourceId:"prod-789",details:"Updated product price from $99.99 to $89.99",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",status:"success",category:"product",metadata:{productId:"prod-789",oldPrice:99.99,newPrice:89.99}},{id:"3",timestamp:new Date(Date.now()-6e5).toISOString(),userId:"user-125",userName:"Bob User",userEmail:"bob@example.com",action:"FAILED_LOGIN",resource:"auth",resourceId:"attempt-321",details:"Failed login attempt - invalid password",ipAddress:"203.0.113.45",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X)",status:"failure",category:"security",metadata:{reason:"invalid_password",attempts:3}},{id:"4",timestamp:new Date(Date.now()-9e5).toISOString(),userId:"user-123",userName:"John Admin",userEmail:"john@example.com",action:"DELETE_USER",resource:"users",resourceId:"user-999",details:"Deleted user account for inactive user",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",category:"user",metadata:{deletedUserId:"user-999",reason:"inactive_account"}},{id:"5",timestamp:new Date(Date.now()-12e5).toISOString(),userId:"system",userName:"System",userEmail:"system@example.com",action:"BACKUP_COMPLETED",resource:"database",resourceId:"backup-001",details:"Automated database backup completed successfully",ipAddress:"127.0.0.1",userAgent:"System/1.0",status:"success",category:"system",metadata:{backupSize:"2.5GB",duration:"45min"}}];s(e),p(Math.ceil(e.length/y))}catch(e){b({type:"error",title:"Error",message:"Failed to load audit logs"})}finally{a(!1)}}),w=(e,s)=>{j(t=>o(n({},t),{[e]:s})),h(1)},C=e=>{switch(e){case"success":return R.jsx(U,{className:"h-4 w-4 text-green-600"});case"failure":return R.jsx(Ge,{className:"h-4 w-4 text-red-600"});case"warning":return R.jsx(K,{className:"h-4 w-4 text-yellow-600"});default:return R.jsx(ns,{className:"h-4 w-4 text-blue-600"})}},k=e=>{switch(e){case"auth":return R.jsx(z,{className:"h-4 w-4"});case"user":return R.jsx(q,{className:"h-4 w-4"});case"product":return R.jsx(J,{className:"h-4 w-4"});case"order":return R.jsx(Y,{className:"h-4 w-4"});case"system":return R.jsx(le,{className:"h-4 w-4"});case"security":return R.jsx(K,{className:"h-4 w-4"});default:return R.jsx(Te,{className:"h-4 w-4"})}};return t?R.jsx("div",{className:"p-8",children:R.jsx(Ds,{size:"large",text:"Loading audit logs..."})}):R.jsx(Fs,{children:R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[R.jsxs("div",{children:[R.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[R.jsx(te,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Audit Logs"]}),R.jsx("p",{className:"text-gray-600 mt-1",children:"Track and monitor all system activities and user actions"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(pt,{onClick:()=>{const s=e.map(e=>({Timestamp:new Date(e.timestamp).toLocaleString(),User:e.userName,Email:e.userEmail,Action:e.action,Resource:e.resource,Status:e.status,Category:e.category,Details:e.details,"IP Address":e.ipAddress})),t=[Object.keys(s[0]).join(","),...s.map(e=>Object.values(e).map(e=>`"${e}"`).join(","))].join("\n"),a=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=`audit-logs-${(new Date).toISOString().split("T")[0]}.csv`,i.click(),URL.revokeObjectURL(r),b({type:"success",title:"Export Complete",message:"Audit logs exported successfully"})},icon:Ne,variant:"secondary",children:"Export CSV"}),R.jsx(pt,{onClick:v,icon:B,variant:"secondary",children:"Refresh"})]})]}),R.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),R.jsx("input",{type:"date",value:f.dateFrom,onChange:e=>w("dateFrom",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),R.jsx("input",{type:"date",value:f.dateTo,onChange:e=>w("dateTo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),R.jsx("select",{value:f.category,onChange:e=>w("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[{value:"",label:"All Categories"},{value:"auth",label:"Authentication"},{value:"user",label:"User Management"},{value:"product",label:"Product Management"},{value:"order",label:"Order Management"},{value:"system",label:"System Changes"},{value:"security",label:"Security Events"}].map(e=>R.jsx("option",{value:e.value,children:e.label},e.value))})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),R.jsx("select",{value:f.status,onChange:e=>w("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[{value:"",label:"All Statuses"},{value:"success",label:"Success"},{value:"failure",label:"Failure"},{value:"warning",label:"Warning"}].map(e=>R.jsx("option",{value:e.value,children:e.label},e.value))})]}),R.jsxs("div",{className:"md:col-span-2",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),R.jsxs("div",{className:"relative",children:[R.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search logs...",value:f.searchTerm,onChange:e=>w("searchTerm",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]})]})}),R.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resource"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),R.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>R.jsxs(F.Fragment,{children:[R.jsxs("tr",{className:"hover:bg-gray-50",children:[R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.timestamp).toLocaleString()}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx(be,{className:"h-4 w-4 text-gray-400 mr-2"}),R.jsxs("div",{children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.userName}),R.jsx("div",{className:"text-sm text-gray-500",children:e.userEmail})]})]})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsxs("div",{className:"flex items-center",children:[k(e.category),R.jsx("span",{className:"ml-2 text-sm text-gray-900",children:e.action})]})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.resource}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsxs("div",{className:"flex items-center",children:[C(e.status),R.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:e.status})]})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.ipAddress}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("button",{onClick:()=>(e=>{const s=new Set(m);s.has(e)?s.delete(e):s.add(e),x(s)})(e.id),className:"text-indigo-600 hover:text-indigo-900",children:m.has(e.id)?R.jsx(Je,{className:"h-4 w-4"}):R.jsx(Ye,{className:"h-4 w-4"})}),R.jsx("button",{onClick:()=>(e=>{i(e),d(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",children:R.jsx(De,{className:"h-4 w-4"})})]})})]}),m.has(e.id)&&R.jsx("tr",{children:R.jsx("td",{colSpan:7,className:"px-6 py-4 bg-gray-50",children:R.jsxs("div",{className:"space-y-2",children:[R.jsxs("div",{children:[R.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Details: "}),R.jsx("span",{className:"text-sm text-gray-900",children:e.details})]}),R.jsxs("div",{children:[R.jsx("span",{className:"text-sm font-medium text-gray-700",children:"User Agent: "}),R.jsx("span",{className:"text-sm text-gray-900",children:e.userAgent})]}),Object.keys(e.metadata).length>0&&R.jsxs("div",{children:[R.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Metadata: "}),R.jsx("pre",{className:"text-sm text-gray-900 bg-gray-100 p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]})})})]},e.id))})]})}),R.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[R.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[R.jsx("button",{onClick:()=>h(Math.max(1,u-1)),disabled:1===u,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),R.jsx("button",{onClick:()=>h(Math.min(g,u+1)),disabled:u===g,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),R.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[R.jsx("div",{children:R.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",R.jsx("span",{className:"font-medium",children:(u-1)*y+1})," to"," ",R.jsx("span",{className:"font-medium",children:Math.min(u*y,e.length)})," of"," ",R.jsx("span",{className:"font-medium",children:e.length})," results"]})}),R.jsx("div",{children:R.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[R.jsx("button",{onClick:()=>h(Math.max(1,u-1)),disabled:1===u,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),R.jsx("button",{onClick:()=>h(Math.min(g,u+1)),disabled:u===g,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]}),R.jsx(Os,{isOpen:l,onClose:()=>d(!1),title:"Audit Log Details",size:"large",children:r&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Timestamp"}),R.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(r.timestamp).toLocaleString()})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),R.jsxs("div",{className:"mt-1 flex items-center",children:[C(r.status),R.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:r.status})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User"}),R.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[r.userName," (",r.userEmail,")"]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),R.jsxs("div",{className:"mt-1 flex items-center",children:[k(r.category),R.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:r.category})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Action"}),R.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.action})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Resource"}),R.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[r.resource," (ID: ",r.resourceId,")"]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"IP Address"}),R.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.ipAddress})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Details"}),R.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.details})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User Agent"}),R.jsx("p",{className:"mt-1 text-sm text-gray-900 break-all",children:r.userAgent})]}),Object.keys(r.metadata).length>0&&R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Metadata"}),R.jsx("pre",{className:"mt-1 text-sm text-gray-900 bg-gray-100 p-3 rounded-md overflow-x-auto",children:JSON.stringify(r.metadata,null,2)})]}),R.jsx("div",{className:"flex justify-end",children:R.jsx(pt,{onClick:()=>d(!1),variant:"secondary",children:"Close"})})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Mt=Object.freeze(Object.defineProperty({__proto__:null,AccessibilityDashboard:({className:e=""})=>{const{preferences:s,updatePreference:t}=P(),{announce:a}=E(),{deviceType:r,breakpoint:i,isTouch:l}=_(),[n,o]=O.useState(null),[d,m]=O.useState(!1),[x,u]=O.useState("preferences"),h=()=>c(null,null,function*(){m(!0),a("Starting accessibility scan","polite");try{yield new Promise(e=>setTimeout(e,2e3));const e=A.generateReport(),s=[{type:"Missing Alt Text",severity:"high",count:e.missingAltText.length,description:"Images without alternative text"},{type:"Missing Form Labels",severity:"critical",count:e.missingFormLabels.length,description:"Form inputs without proper labels"},{type:"Heading Issues",severity:"medium",count:e.headingIssues.length,description:"Improper heading hierarchy"}],t=s.reduce((e,s)=>e+s.count,0),r=Math.max(0,100-5*t);o({score:r,issues:s,compliance:{wcagA:r>=80,wcagAA:r>=90,wcagAAA:r>=95}}),a(`Accessibility scan complete. Score: ${r}%`,"assertive")}catch(e){a("Accessibility scan failed","assertive")}finally{m(!1)}});O.useEffect(()=>{h()},[]);const g=O.useMemo(()=>[{key:"reducedMotion",label:"Reduce Motion",description:"Minimize animations and transitions",icon:s.reducedMotion?os:ss,enabled:s.reducedMotion},{key:"highContrast",label:"High Contrast",description:"Increase color contrast for better visibility",icon:ie,enabled:s.highContrast},{key:"largeText",label:"Large Text",description:"Increase text size for better readability",icon:ds,enabled:s.largeText},{key:"keyboardNavigation",label:"Keyboard Navigation",description:"Enhanced keyboard navigation support",icon:cs,enabled:s.keyboardNavigation},{key:"focusVisible",label:"Focus Indicators",description:"Show visible focus indicators",icon:ms,enabled:s.focusVisible}],[s]),p=e=>{switch(e){case"critical":return"text-red-600 bg-red-50";case"high":return"text-orange-600 bg-orange-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}};return R.jsxs("div",{className:`space-y-6 ${e}`,children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:R.jsx(xs,{className:"w-6 h-6 text-purple-600"})}),R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Accessibility Dashboard"}),R.jsx("p",{className:"text-gray-600",children:"Monitor and manage accessibility features"})]})]}),R.jsxs("button",{onClick:h,disabled:d,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:[R.jsx(z,{className:"w-4 h-4 "+(d?"animate-spin":"")}),R.jsx("span",{children:d?"Scanning...":"Run Scan"})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:["mobile"===r&&R.jsx(us,{className:"w-5 h-5 text-blue-600"}),"tablet"===r&&R.jsx(hs,{className:"w-5 h-5 text-blue-600"}),"desktop"===r&&R.jsx(gs,{className:"w-5 h-5 text-blue-600"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"Device Type"}),R.jsx("p",{className:"text-sm text-gray-600 capitalize",children:r})]})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx(ms,{className:"w-5 h-5 text-green-600"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"Input Method"}),R.jsx("p",{className:"text-sm text-gray-600",children:l?"Touch":"Mouse/Keyboard"})]})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx(se,{className:"w-5 h-5 text-purple-600"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"Breakpoint"}),R.jsx("p",{className:"text-sm text-gray-600 uppercase",children:i})]})]})})]}),R.jsx("div",{className:"border-b border-gray-200",children:R.jsx("nav",{className:"flex space-x-8",children:[{id:"preferences",label:"Preferences",icon:le},{id:"metrics",label:"Metrics",icon:se},{id:"testing",label:"Testing",icon:z}].map(({id:e,label:s,icon:t})=>R.jsxs("button",{onClick:()=>u(e),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(x===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[R.jsx(t,{className:"w-4 h-4"}),R.jsx("span",{children:s})]},e))})}),R.jsxs("div",{className:"space-y-6",children:["preferences"===x&&R.jsxs(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Accessibility Preferences"}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(({key:e,label:s,description:r,icon:i,enabled:l})=>R.jsx(js.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-start justify-between",children:[R.jsxs("div",{className:"flex items-start space-x-3",children:[R.jsx("div",{className:"p-2 rounded-lg "+(l?"bg-purple-100":"bg-gray-100"),children:R.jsx(i,{className:"w-5 h-5 "+(l?"text-purple-600":"text-gray-400")})}),R.jsxs("div",{children:[R.jsx("h4",{className:"font-medium text-gray-900",children:s}),R.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r})]})]}),R.jsx("button",{onClick:()=>{t(e,!l),a(`${s} ${l?"disabled":"enabled"}`,"polite")},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(l?"bg-purple-600":"bg-gray-200"),role:"switch","aria-checked":l,"aria-label":`Toggle ${s}`,children:R.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(l?"translate-x-6":"translate-x-1")})})]})},e))})]}),"metrics"===x&&R.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:n?R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Accessibility Score"}),R.jsxs("div",{className:"text-3xl font-bold "+(y=n.score,y>=90?"text-green-600":y>=70?"text-yellow-600":"text-red-600"),children:[n.score,"%"]})]}),R.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:R.jsx("div",{className:"h-3 rounded-full transition-all duration-500 "+(n.score>=90?"bg-green-500":n.score>=70?"bg-yellow-500":"bg-red-500"),style:{width:`${n.score}%`}})}),R.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(n.compliance).map(([e,s])=>R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full mb-2 "+(s?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:s?R.jsx(U,{className:"w-4 h-4"}):R.jsx(K,{className:"w-4 h-4"})}),R.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.toUpperCase()}),R.jsx("p",{className:"text-xs text-gray-600",children:s?"Compliant":"Non-compliant"})]},e))})]}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Issues Breakdown"}),R.jsx("div",{className:"space-y-3",children:n.issues.map((e,s)=>R.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${p(e.severity)}`,children:e.severity.toUpperCase()}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:e.type}),R.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),R.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.count})]},s))})]})]}):R.jsxs("div",{className:"text-center py-8",children:[R.jsx(z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),R.jsx("p",{className:"text-gray-600",children:"Run an accessibility scan to see metrics"})]})}),"testing"===x&&R.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accessibility Testing Tools"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("button",{onClick:()=>{const e=A.checkAltText();a(`Found ${e.length} images without alt text`,"assertive")},className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors",children:[R.jsx(De,{className:"w-5 h-5 text-blue-600 mb-2"}),R.jsx("h4",{className:"font-medium text-gray-900",children:"Check Alt Text"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Find images missing alternative text"})]}),R.jsxs("button",{onClick:()=>{const e=A.checkFormLabels();a(`Found ${e.length} form inputs without labels`,"assertive")},className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors",children:[R.jsx(ds,{className:"w-5 h-5 text-green-600 mb-2"}),R.jsx("h4",{className:"font-medium text-gray-900",children:"Check Form Labels"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Find form inputs without proper labels"})]}),R.jsxs("button",{onClick:()=>{const e=A.checkHeadingHierarchy();a(`Found ${e.length} heading hierarchy issues`,"assertive")},className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors",children:[R.jsx(se,{className:"w-5 h-5 text-purple-600 mb-2"}),R.jsx("h4",{className:"font-medium text-gray-900",children:"Check Headings"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Verify proper heading hierarchy"})]}),R.jsxs("button",{onClick:h,disabled:d,className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors disabled:opacity-50",children:[R.jsx(z,{className:"w-5 h-5 text-orange-600 mb-2 "+(d?"animate-spin":"")}),R.jsx("h4",{className:"font-medium text-gray-900",children:"Full Scan"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Run comprehensive accessibility audit"})]})]})]})})]})]});var y}},Symbol.toStringTag,{value:"Module"})),It=({children:e,maxWidth:s,padding:t,className:a="",fluid:r=!1,centerContent:i=!0})=>{const{getResponsiveValue:l}=_(),n=O.useMemo(()=>{const e={};return!r&&s&&(e.maxWidth=l(s)||"100%"),t&&(e.padding=l(t)||"1rem"),e},[r,s,t,l]),o=O.useMemo(()=>["responsive-container",r?"w-full":"max-w-full",i&&"mx-auto",a].filter(Boolean).join(" "),[r,i,a]);return R.jsx("div",{className:o,style:n,children:e})},Lt=({children:e,columns:s,gap:t,className:a=""})=>{const{getResponsiveValue:r}=_(),{gridColumns:i}=T(s),l=O.useMemo(()=>({display:"grid",gridTemplateColumns:`repeat(${i}, 1fr)`,gap:r(t)||"1rem"}),[i,t,r]);return R.jsx("div",{className:`responsive-grid ${a}`,style:l,children:e})},Ut=({children:e,span:s=1,offset:t=0,order:a,className:r="",alignSelf:i="stretch"})=>{const{getResponsiveValue:l}=_(),{getColumnSpan:n}=T(),o=O.useMemo(()=>{const e="number"==typeof s?s:l(s)||1,r="number"==typeof t?t:l(t)||0,o="number"==typeof a?a:l(a),d={gridColumn:`span ${n(e)}`,alignSelf:i};return r>0&&(d.gridColumnStart=r+1),void 0!==o&&(d.order=o),d},[s,t,a,i,l,n]);return R.jsx("div",{className:`responsive-grid-item ${r}`,style:o,children:e})},$t=Object.freeze(Object.defineProperty({__proto__:null,ThemeCustomizationDashboard:({className:e=""})=>{const{themeConfig:s,preferences:t,systemPreferences:a,setMode:r,setColorScheme:i,setFontScale:l,setBorderRadius:n,setAnimationLevel:o,toggleHighContrast:d,toggleReducedMotion:c,resetToDefaults:m}=D(),{deviceType:x,breakpoint:u}=_(),[h,g]=O.useState("appearance"),[p,y]=O.useState("desktop"),b=[{value:"light",label:"Light",icon:ys,description:"Clean and bright interface - only mode available"}],f=O.useMemo(()=>[{name:"Dashboard Cards",description:"How dashboard components will look",preview:R.jsxs("div",{className:"space-y-3",children:[R.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[R.jsxs("div",{className:"flex items-center justify-between mb-2",children:[R.jsx("h3",{className:"font-semibold text-gray-900",children:"Total Users"}),R.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:R.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded"})})]}),R.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"12,345"}),R.jsx("div",{className:"text-sm text-green-600",children:"+12% from last month"})]}),R.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full"}),R.jsxs("div",{children:[R.jsx("div",{className:"font-medium text-gray-900",children:"John Doe"}),R.jsx("div",{className:"text-sm text-gray-600",children:"Administrator"})]})]})})]})},{name:"Form Elements",description:"Input fields and buttons",preview:R.jsxs("div",{className:"space-y-3",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),R.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email"})]}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Primary"}),R.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Secondary"})]})]})},{name:"Navigation",description:"Menu and navigation elements",preview:R.jsxs("div",{className:"space-y-2",children:[R.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 bg-blue-50 text-blue-700 rounded-lg",children:[R.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded"}),R.jsx("span",{className:"font-medium",children:"Dashboard"})]}),R.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:[R.jsx("div",{className:"w-5 h-5 bg-gray-400 rounded"}),R.jsx("span",{children:"Users"})]}),R.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:[R.jsx("div",{className:"w-5 h-5 bg-gray-400 rounded"}),R.jsx("span",{children:"Settings"})]})]})}],[]);return R.jsxs(It,{className:`space-y-6 ${e}`,children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:R.jsx(ie,{className:"w-6 h-6 text-purple-600"})}),R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Theme Customization"}),R.jsx("p",{className:"text-gray-600",children:"Customize the appearance and behavior of your dashboard"})]})]}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsxs("button",{onClick:()=>{const e={preferences:t,themeConfig:s,exportedAt:(new Date).toISOString()},a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=`theme-${s.colorScheme}-${Date.now()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},className:"flex items-center space-x-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[R.jsx(Ne,{className:"w-4 h-4"}),R.jsx("span",{children:"Export"})]}),R.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[R.jsx(ts,{className:"w-4 h-4"}),R.jsx("span",{children:"Reset"})]})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:["mobile"===x&&R.jsx(us,{className:"w-5 h-5 text-blue-600"}),"tablet"===x&&R.jsx(hs,{className:"w-5 h-5 text-blue-600"}),"desktop"===x&&R.jsx(gs,{className:"w-5 h-5 text-blue-600"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"Device"}),R.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[x," (",u,")"]})]})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx(gs,{className:"w-5 h-5 text-green-600"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"System Theme"}),R.jsx("p",{className:"text-sm text-gray-600",children:a.prefersDark?"Dark":"Light"})]})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx(De,{className:"w-5 h-5 text-purple-600"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:"Current Theme"}),R.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[s.mode," • ",s.colorScheme]})]})]})})]}),R.jsx("div",{className:"border-b border-gray-200",children:R.jsx("nav",{className:"flex space-x-8",children:[{id:"appearance",label:"Appearance",icon:ie},{id:"typography",label:"Typography",icon:ds},{id:"layout",label:"Layout",icon:ps},{id:"accessibility",label:"Accessibility",icon:De},{id:"preview",label:"Preview",icon:gs}].map(({id:e,label:s,icon:t})=>R.jsxs("button",{onClick:()=>g(e),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(h===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[R.jsx(t,{className:"w-4 h-4"}),R.jsx("span",{children:s})]},e))})}),R.jsxs("div",{className:"space-y-6",children:["appearance"===h&&R.jsxs(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Theme Mode"}),R.jsx(Lt,{columns:{xs:1,sm:2,lg:4},gap:{xs:"1rem",md:"1.5rem"},children:b.map(({value:e,label:s,icon:a,description:i})=>R.jsx(Ut,{children:R.jsxs(js.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(e),className:"w-full p-4 rounded-xl border-2 transition-all "+(t.mode===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[R.jsx(a,{className:"w-8 h-8 mx-auto mb-3 "+(t.mode===e?"text-purple-600":"text-gray-400")}),R.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),R.jsx("p",{className:"text-sm text-gray-600",children:i})]})},e))})]}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Color Scheme"}),R.jsx(Lt,{columns:{xs:1,sm:2,lg:5},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"neutral",label:"Neutral",colors:["#475569","#78716c"],description:"Professional and timeless"},{value:"warm",label:"Warm",colors:["#ea580c","#eab308"],description:"Inviting and energetic"},{value:"cool",label:"Cool",colors:["#3b82f6","#14b8a6"],description:"Calm and trustworthy"},{value:"vibrant",label:"Vibrant",colors:["#a855f7","#ef4444"],description:"Bold and creative"},{value:"monochrome",label:"Monochrome",colors:["#6b7280","#4b5563"],description:"Minimal and focused"}].map(({value:e,label:s,colors:a,description:r})=>R.jsx(Ut,{children:R.jsxs(js.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(e),className:"w-full p-4 rounded-xl border-2 transition-all "+(t.colorScheme===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[R.jsx("div",{className:"flex space-x-1 mb-3 justify-center",children:a.map((e,s)=>R.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:e}},s))}),R.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),R.jsx("p",{className:"text-sm text-gray-600",children:r})]})},e))})]})]}),"typography"===h&&R.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Font Scale"}),R.jsx(Lt,{columns:{xs:1,md:3},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"compact",label:"Compact",description:"More content, smaller text"},{value:"comfortable",label:"Comfortable",description:"Balanced readability"},{value:"spacious",label:"Spacious",description:"Larger text, easier reading"}].map(({value:e,label:s,description:a})=>R.jsx(Ut,{children:R.jsxs(js.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(e),className:"w-full p-6 rounded-xl border-2 transition-all text-left "+(t.fontScale===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[R.jsxs("div",{className:"mb-3 "+("compact"===e?"text-sm":"spacious"===e?"text-lg":"text-base"),children:[R.jsx("div",{className:"font-semibold",children:"Sample Text"}),R.jsx("div",{className:"text-gray-600",children:"This is how text will appear"})]}),R.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),R.jsx("p",{className:"text-sm text-gray-600",children:a})]})},e))})]})}),"layout"===h&&R.jsxs(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Border Radius"}),R.jsx(Lt,{columns:{xs:1,sm:2,lg:5},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"none",label:"None",description:"Sharp, modern edges"},{value:"small",label:"Small",description:"Subtle rounded corners"},{value:"medium",label:"Medium",description:"Balanced roundness"},{value:"large",label:"Large",description:"Soft, friendly curves"},{value:"full",label:"Full",description:"Pill-shaped elements"}].map(({value:e,label:s,description:a})=>R.jsx(Ut,{children:R.jsxs(js.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(e),className:`w-full p-4 border-2 transition-all ${t.borderRadius===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"} ${"none"===e?"rounded-none":"small"===e?"rounded-sm":"medium"===e?"rounded-lg":"large"===e?"rounded-xl":"rounded-full"}`,children:[R.jsx("div",{className:"w-12 h-12 bg-gray-300 mx-auto mb-3 "+("none"===e?"rounded-none":"small"===e?"rounded-sm":"medium"===e?"rounded-lg":"large"===e?"rounded-xl":"rounded-full")}),R.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),R.jsx("p",{className:"text-sm text-gray-600",children:a})]})},e))})]}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Animation Level"}),R.jsx(Lt,{columns:{xs:1,sm:2,lg:4},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"none",label:"None",description:"No animations"},{value:"reduced",label:"Reduced",description:"Minimal animations"},{value:"normal",label:"Normal",description:"Standard animations"},{value:"enhanced",label:"Enhanced",description:"Rich animations"}].map(({value:e,label:s,description:a})=>R.jsx(Ut,{children:R.jsxs(js.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(e),className:"w-full p-4 rounded-xl border-2 transition-all "+(t.animationLevel===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[R.jsx(ss,{className:"w-8 h-8 mx-auto mb-3 "+(t.animationLevel===e?"text-purple-600":"text-gray-400")}),R.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),R.jsx("p",{className:"text-sm text-gray-600",children:a})]})},e))})]})]}),"accessibility"===h&&R.jsxs(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx(bs,{className:"w-5 h-5 text-purple-600"}),R.jsxs("div",{children:[R.jsx("h4",{className:"font-medium text-gray-900",children:"High Contrast"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Increase contrast for better visibility"})]})]}),R.jsx("button",{onClick:d,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(t.highContrast?"bg-purple-600":"bg-gray-200"),children:R.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(t.highContrast?"translate-x-6":"translate-x-1")})})]})}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx(ss,{className:"w-5 h-5 text-purple-600"}),R.jsxs("div",{children:[R.jsx("h4",{className:"font-medium text-gray-900",children:"Reduced Motion"}),R.jsx("p",{className:"text-sm text-gray-600",children:"Minimize animations and transitions"})]})]}),R.jsx("button",{onClick:c,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(t.reducedMotion?"bg-purple-600":"bg-gray-200"),children:R.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(t.reducedMotion?"translate-x-6":"translate-x-1")})})]})})]}),R.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[R.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"System Preferences Detected"}),R.jsxs("div",{className:"space-y-2 text-sm",children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-blue-700",children:"Prefers Dark Mode:"}),R.jsx("span",{className:"text-blue-900 font-medium",children:a.prefersDark?"Yes":"No"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-blue-700",children:"Prefers Reduced Motion:"}),R.jsx("span",{className:"text-blue-900 font-medium",children:a.prefersReducedMotion?"Yes":"No"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{className:"text-blue-700",children:"Prefers High Contrast:"}),R.jsx("span",{className:"text-blue-900 font-medium",children:a.prefersHighContrast?"Yes":"No"})]})]})]})]}),"preview"===h&&R.jsxs(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[R.jsx("div",{className:"flex items-center justify-center space-x-4",children:[{value:"desktop",icon:gs,label:"Desktop"},{value:"tablet",icon:hs,label:"Tablet"},{value:"mobile",icon:us,label:"Mobile"}].map(({value:e,icon:s,label:t})=>R.jsxs("button",{onClick:()=>y(e),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors "+(p===e?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:[R.jsx(s,{className:"w-4 h-4"}),R.jsx("span",{children:t})]},e))}),R.jsx(Lt,{columns:{xs:1,lg:3},gap:{xs:"1.5rem",md:"2rem"},children:f.map((e,s)=>R.jsx(Ut,{children:R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[R.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.name}),R.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),R.jsx("div",{className:("mobile"===p?"scale-75":"tablet"===p?"scale-90":"scale-100")+" origin-top-left transition-transform",children:e.preview})]})},s))})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{Js as A,nt as C,Ds as L,Os as M,dt as N,Ts as P,it as S};
